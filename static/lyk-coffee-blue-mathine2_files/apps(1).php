!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=572)}([,function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(119),s=i(r);t["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,s["default"])(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()},function(e,t){var n=e.exports={version:"2.6.3"};"number"==typeof __e&&(__e=n)},,function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(73),o=r(s),a=n(74),u=r(a),l=n(172),c=i(l),d=n(171),f=i(d),h=n(173),p=r(h),m=n(328),v=(r(m),n(115)),_=r(v);o["default"].use(u["default"]),t["default"]=new u["default"].Store({state:_["default"].get(),getters:c,actions:f,mutations:p["default"],strict:!0,plugins:[]})},function(e,t,n){var i=n(9),r=n(3),s=n(21),o=n(25),a=n(28),u="prototype",l=function(e,t,n){var c,d,f,h=e&l.F,p=e&l.G,m=e&l.S,v=e&l.P,_=e&l.B,g=e&l.W,y=p?r:r[t]||(r[t]={}),b=y[u],w=p?i:m?i[t]:(i[t]||{})[u];p&&(n=t);for(c in n)d=!h&&w&&void 0!==w[c],d&&a(y,c)||(f=d?w[c]:n[c],y[c]=p&&"function"!=typeof w[c]?n[c]:_&&d?s(f,i):g&&w[c]==f?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t[u]=e[u],t}(f):v&&"function"==typeof f?s(Function.call,f):f,v&&((y.virtual||(y.virtual={}))[c]=f,e&l.R&&b&&!b[c]&&o(b,c,f)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},,,function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var i=n(93)("wks"),r=n(70),s=n(9).Symbol,o="function"==typeof s,a=e.exports=function(e){return i[e]||(i[e]=o&&s[e]||(o?s:r)("Symbol."+e))};a.store=i},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(207),s=i(r);t["default"]=s["default"]||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}},,,function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var i=n(17),r=n(129),s=n(95),o=Object.defineProperty;t.f=n(18)?Object.defineProperty:function(e,t,n){if(i(e),t=s(t,!0),i(n),r)try{return o(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(15);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(24)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},,,function(e,t,n){var i=n(46);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.notificationManager=t.guiManager=t.communicator=t.priorityWeight=t.datalayer=t.translator=t.calleoChat=void 0;var r=n(196),s=i(r),o=n(179),a=i(o),u=n(182),l=i(u),c=n(180),d=i(c),f=n(184),h=i(f),p=n(169),m=i(p),v=n(170),_=i(v),g=n(43),y=i(g),b=(t.calleoChat=new s["default"],t.translator=new h["default"]),w=t.datalayer=new a["default"](b,window);t.priorityWeight=new l["default"](w),t.communicator=new m["default"],t.guiManager=new _["default"],t.notificationManager=new d["default"](y["default"],b,window)},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var i=n(16),r=n(51);e.exports=n(18)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(84),r=n(67);e.exports=function(e){return i(r(e))}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DISPLAY_COLLAPSE="DISPLAY_COLLAPSE",t.DISPLAY_EXPAND="DISPLAY_EXPAND",t.WORKFLOW_DISABLED="WORKFLOW_DISABLED",t.WORKFLOW_NOT_STARTED="WORKFLOW_NOT_STARTED",t.WORKFLOW_COMPLETE_PROFILE_BEFORE_TO_START="WORKFLOW_COMPLETE_PROFILE_BEFORE_TO_START",t.WORKFLOW_QUEUE="WORKFLOW_QUEUE",t.WORKFLOW_CHAT="WORKFLOW_CHAT",t.WORKFLOW_RATING="WORKFLOW_RATING",t.WORKFLOW_TRANSCRIPT="WORKFLOW_TRANSCRIPT",t.WORKFLOW_TRANSCRIPT_SENT="WORKFLOW_TRANSCRIPT_SENT"},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},,function(e,t){e.exports={}},function(e,t,n){var i=n(137),r=n(83);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(67);e.exports=function(e){return Object(i(e))}},function(e,t,n){"use strict";var i=n(253)(!0);n(85)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},,,,,,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RECEIVE_MESSAGE="RECEIVE_MESSAGE",t.SEND_MESSAGE="SEND_MESSAGE",t.SEND_ATTACHMENT="SEND_ATTACHMENT",t.START_TYPING="START_TYPING",t.STOP_TYPING="STOP_TYPING",t.DISCONNECTED="DISCONNECTED",t.RECONNECTED="RECONNECTED",t.MARK_HAS_READ="MARK_HAS_READ",t.MARK_HAS_RECEIPT="MARK_HAS_RECEIPT",t.UPDATE_MESSAGE="UPDATE_MESSAGE",t.UPDATE_VIEW="UPDATE_VIEW",t.UPDATE_DISPLAY="UPDATE_DISPLAY",t.END_CHAT="END_CHAT",t.REVERT_PROFILE_TMP="REVERT_PROFILE_TMP",t.UPDATE_PROFILE_TMP="UPDATE_PROFILE_TMP",t.UPDATE_PROFILE_FORM="UPDATE_PROFILE_FORM",t.UPDATE_PROFILE="UPDATE_PROFILE",t.UPDATE_REQUEST_DATA="UPDATE_REQUEST_DATA",t.UPDATE_PROFILE_ID="UPDATE_PROFILE_ID",t.UPDATE_PROFILE_ERROR="UPDATE_PROFILE_ERROR",t.UPDATE_TRANSCRIPT="UPDATE_TRANSCRIPT",t.UPDATE_COMMUNICATOR="UPDATE_COMMUNICATOR",t.UPDATE_CALLEO_CHAT="UPDATE_CALLEO_CHAT",t.API_SUCCESS="API_SUCCESS",t.UPDATE_LIST="UPDATE_LIST",t.UPDATE_XMPP_SESSION="UPDATE_XMPP_SESSION",t.UPDATE_CONFIG="UPDATE_CONFIG",t.UPDATE_SETTINGS="UPDATE_SETTINGS",t.UPDATE_RATING="UPDATE_RATING",t.SHOW="SHOW",t.HIDE="HIDE",t.SHOW_REGISTER="SHOW_REGISTER",t.UPDATE_WORKFLOW="UPDATE_WORKFLOW",t.RESET_CHAT="RESET_CHAT",t.RESET_MESSAGES="RESET_MESSAGES",t.UPDATE_FIRST_MESSAGE="UPDATE_FIRST_MESSAGE",t.UPDATE_WAITING_QUEUE_SIZE="UPDATE_WAITING_QUEUE_SIZE",t.API_ERROR="API_ERROR"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(121),s=i(r),o=n(118),a=i(o),u=n(1),l=i(u),c=n(2),d=i(c),f=n(116),h=i(f),p=n(43),m=i(p),v=function(){function e(){(0,l["default"])(this,e)}return(0,d["default"])(e,null,[{key:"addClass",value:function(e,t){e.classList?e.classList.add(t):e.className+=" "+t}},{key:"hasClass",value:function(e,t){return!!e.classList&&e.classList.contains(t)}},{key:"removeClass",value:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}},{key:"create",value:function(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.appendChild(n.firstChild);return t}},{key:"html",value:function(e,t){t instanceof Element?e.innerHTML=t.outerHTML:e.innerHTML=t}},{key:"text",value:function(e,t){t instanceof Element?e.innerText=t.outerText:e.innerText=t}},{key:"htmlEscape",value:function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/`/g,"&#96;")}},{key:"wrapWordsInHtmlNoBreak",value:function(e,t){if(t&&t>1){var n="",i="",r=!1,s=void 0,o=function(){n+=i.length>1&&i.length<=t?"<nobr>"+i+"</nobr>"+s:""+i+s,i=""},u=!0,l=!1,c=void 0;try{for(var d,f=(0,a["default"])(e);!(u=(d=f.next()).done);u=!0)switch(s=d.value){case"<":r=!0,o();break;case(s.match(/\s/)||[" "])[0]:o();break;case">":r?(r=!1,n+=s):i+=s;break;default:r?n+=s:i+=s}}catch(h){l=!0,c=h}finally{try{!u&&f["return"]&&f["return"]()}finally{if(l)throw c}}return s="",i.length>0&&o(),n}return e}},{key:"nl2br",value:function(e){return String(e).replace(/(\r\n|\n\r)/g,"<br>").replace(/(\r|\n)/g,"<br>")}},{key:"loadJs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;return new s["default"](function(n,i){var r=document.createElement("script");r.src=e,r.onload=n,r.onreadystatechange=n,r.onerror=i,t.appendChild(r)})}},{key:"loadCss",value:function(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),document.body.appendChild(t)}},{key:"parseMessage",value:function(t){t=t.replace(/(;-?\))(\s|$)/gi,e.applySmileys("wink","$1")+"$2").replace(/(:-?3)(\s|$)/gi,e.applySmileys("waii","$1")+"$2").replace(/(:-?\()(\s|$)/gi,e.applySmileys("unhappy","$1")+"$2").replace(/(:-?P)(\s|$)/gi,e.applySmileys("tongue","$1")+"$2").replace(/(:-?O)(\s|$)/gi,e.applySmileys("surprised","$1")+"$2").replace(/(:-?\))(\s|$)/gi,e.applySmileys("smile","$1")+"$2").replace(/(\^_?\^)(\s|$)/gi,e.applySmileys("happy","$1")+"$2").replace(/(:-?D)(\s|$)/gi,e.applySmileys("grin","$1")+"$2"),t=e.nl2br(t),t=e.activateLinksInHtml(t);var n=parseInt(m["default"].apiSettings.nb_no_break_chars,10);return t=e.wrapWordsInHtmlNoBreak(t,n)}},{key:"preloadSound",value:function(e){var t=document.createElement("audio");t.style.display="none",t.setAttribute("preload","auto");var n=document.createElement("source");return n.setAttribute("type","audio/ogg"),n.setAttribute("src",m["default"].frontBaseUrl+"/apps/calleo-livechat/sound/"+e+".ogg"),t.appendChild(n),n=document.createElement("source"),n.setAttribute("type","audio/mpeg"),n.setAttribute("src",m["default"].frontBaseUrl+"/apps/calleo-livechat/sound/"+e+".mp3"),t.appendChild(n),document.body.appendChild(t),t}},{key:"applySmileys",value:function(e,t){return'<img class="s '+e+'" alt="'+t+'" title="'+t+'" src="'+m["default"].frontBaseUrl+'/apps/calleo-livechat/img/s.gif">'}},{key:"activateLinks",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e=String(e);var n=e;if(e.indexOf("://")===-1)return e;var i=/(^|\s|>|\(|\)|"|'|:|\[|])((https?|ftp|file|xmpp|irc|mailto|vnc|webcal|ssh|ldap|smb|magnet|spotify)(:\/\/)([^<>'"\s)(]+))/gim,r='target="_blank"';if(null===t&&(t=h["default"].parseURIBase(window.location.href).host),t)for(var s=void 0;s=i.exec(e);){var o=h["default"].parseURIBase(s[2].trim());r='target="_blank"',o&&o.host===t&&(r=""),n=n.replace(s[0],s[1]+'<a href="'+s[2]+'" '+r+">"+s[2]+"</a>")}else n=e.replace(i,'$1<a href="$2" '+r+">$2</a>");return n}},{key:"activateLinksInHtml",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i="",r=!1,s=0,o="",a="",u=0;u<t.length;u++)a=t[u],"<"===a?(r=!0,"a "===t.substring(u+1,u+3).toLocaleLowerCase()&&(s=!0),i&&(o+=e.activateLinks(i,n),i=""),o+=a):">"===a?(s&&(s="</a>"!==t.substring(u-3,u+1).toLocaleLowerCase()),s||(r=!1),o+=a):r?o+=a:i+=a;return i&&(o+=e.activateLinks(i,n)),o}},{key:"hasCssAnimationSupport",value:function(){var e=document.createElement("div");return"animationName"in e.style}}]),e}();t["default"]=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),s=(i(r),{frontBaseUrl:"https://www.contact.nespresso.com",defaultOperatorAvatarPath:"/assets/operators/avatar/default.png",livechatController:"contact/index",url:{api:"https://www.contact.nespresso.com",livechat:"https://www.contact.nespresso.com/livechat",bosh:"https://www.contact.nespresso.com/http-bind/"},apiSettings:{sendError:!1,opening_hours:{},timezone:0,customer_percent:100,time_format:24,nb_no_break_chars:21,enabled:!0,enabled_reactive:!0,enabled_upload:!0,enabled_contact_us:!0,moderator_in_room:1,allow_anonymous:!1,only_on_response:!1,enabled_languages:["en"],enabled_receipts:!1,exclude_url:[],notification_api_mode:"ifNotVisible",blink_title_new_message:!0,sounds:{new_message:{sound:"notification",mode:"ifNotVisibleChat"}},allowedHostPatterns:["*"]},livechatHost:"livechat.contact.nespresso.com",defaultStorage:"chatRequest",storagePrefix:"virtua_livechat"});t["default"]=s},function(e,t,n){e.exports={"default":n(226),__esModule:!0}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(213),s=i(r),o=n(212),a=i(o),u="function"==typeof a["default"]&&"symbol"==typeof s["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof a["default"]&&e.constructor===a["default"]&&e!==a["default"].prototype?"symbol":typeof e};t["default"]="function"==typeof a["default"]&&"symbol"===u(s["default"])?function(e){return"undefined"==typeof e?"undefined":u(e)}:function(e){return e&&"function"==typeof a["default"]&&e.constructor===a["default"]&&e!==a["default"].prototype?"symbol":"undefined"==typeof e?"undefined":u(e)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(21),r=n(132),s=n(130),o=n(17),a=n(69),u=n(98),l={},c={},t=e.exports=function(e,t,n,d,f){var h,p,m,v,_=f?function(){return e}:u(e),g=i(n,d,t?2:1),y=0;if("function"!=typeof _)throw TypeError(e+" is not iterable!");if(s(_)){for(h=a(e.length);h>y;y++)if(v=t?g(o(p=e[y])[0],p[1]):g(e[y]),v===l||v===c)return v}else for(m=_.call(e);!(p=m.next()).done;)if(v=r(m,g,p.value,t),v===l||v===c)return v};t.BREAK=l,t.RETURN=c},function(e,t){e.exports=!0},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(16).f,r=n(28),s=n(10)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,s)&&i(e,s,{configurable:!0,value:t})}},function(e,t,n){n(261);for(var i=n(9),r=n(25),s=n(30),o=n(10)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var l=a[u],c=i[l],d=c&&c.prototype;d&&!d[o]&&r(d,o,l),s[l]=s.Array}},,,,,,function(e,t,n){var i,r;!function(s,o){i=[n(315),n(314),n(316)],r=function(){return o.apply(this,arguments)}.apply(t,i),!(void 0!==r&&(e.exports=r))}(this,function(e,t,n){function i(e,t){return new a.Builder(e,t)}function r(e){return new a.Builder("message",e)}function s(e){return new a.Builder("iq",e)}function o(e){return new a.Builder("presence",e)}var a;return a={VERSION:"@VERSION@",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},XHTML:{tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"],validTag:function(e){for(var t=0;t<a.XHTML.tags.length;t++)if(e===a.XHTML.tags[t])return!0;return!1},validAttribute:function(e,t){if("undefined"!=typeof a.XHTML.attributes[e]&&a.XHTML.attributes[e].length>0)for(var n=0;n<a.XHTML.attributes[e].length;n++)if(t===a.XHTML.attributes[e][n])return!0;return!1},validCSS:function(e){for(var t=0;t<a.XHTML.css.length;t++)if(e===a.XHTML.css[t])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9,CONNTIMEOUT:10},ErrorCondition:{BAD_FORMAT:"bad-format",CONFLICT:"conflict",MISSING_JID_NODE:"x-strophe-bad-non-anon-jid",NO_AUTH_MECH:"no-auth-mech",UNKNOWN_REASON:"unknown"},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,addNamespace:function(e,t){a.NS[e]=t},forEachChild:function(e,t,n){var i,r;for(i=0;i<e.childNodes.length;i++)r=e.childNodes[i],r.nodeType!==a.ElementType.NORMAL||t&&!this.isTagEqual(r,t)||n(r)},isTagEqual:function(e,t){return e.tagName===t},_xmlGenerator:null,_makeGenerator:function(){var e;return void 0===document.implementation.createDocument||document.implementation.createDocument&&document.documentMode&&document.documentMode<10?(e=this._getIEXmlDom(),e.appendChild(e.createElement("strophe"))):e=document.implementation.createDocument("jabber:client","strophe",null),e},xmlGenerator:function(){return a._xmlGenerator||(a._xmlGenerator=a._makeGenerator()),a._xmlGenerator},_getIEXmlDom:function(){for(var e=null,t=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],n=0;n<t.length&&null===e;n++)try{e=new ActiveXObject(t[n])}catch(i){e=null}return e},xmlElement:function(e){if(!e)return null;var t,n,i,r=a.xmlGenerator().createElement(e);for(t=1;t<arguments.length;t++){var s=arguments[t];if(s)if("string"==typeof s||"number"==typeof s)r.appendChild(a.xmlTextNode(s));else if("object"==typeof s&&"function"==typeof s.sort)for(n=0;n<s.length;n++){var o=s[n];"object"==typeof o&&"function"==typeof o.sort&&void 0!==o[1]&&null!==o[1]&&r.setAttribute(o[0],o[1])}else if("object"==typeof s)for(i in s)s.hasOwnProperty(i)&&void 0!==s[i]&&null!==s[i]&&r.setAttribute(i,s[i])}return r},xmlescape:function(e){return e=e.replace(/\&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/'/g,"&apos;"),e=e.replace(/"/g,"&quot;")},xmlunescape:function(e){return e=e.replace(/\&amp;/g,"&"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&apos;/g,"'"),e=e.replace(/&quot;/g,'"')},xmlTextNode:function(e){return a.xmlGenerator().createTextNode(e)},xmlHtmlNode:function(e){var t;if(DOMParser){var n=new DOMParser;t=n.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},getText:function(e){if(!e)return null;var t="";0===e.childNodes.length&&e.nodeType===a.ElementType.TEXT&&(t+=e.nodeValue);for(var n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeType===a.ElementType.TEXT&&(t+=e.childNodes[n].nodeValue);return a.xmlescape(t)},copyElement:function(e){var t,n;if(e.nodeType===a.ElementType.NORMAL){for(n=a.xmlElement(e.tagName),t=0;t<e.attributes.length;t++)n.setAttribute(e.attributes[t].nodeName,e.attributes[t].value);for(t=0;t<e.childNodes.length;t++)n.appendChild(a.copyElement(e.childNodes[t]))}else e.nodeType===a.ElementType.TEXT&&(n=a.xmlGenerator().createTextNode(e.nodeValue));return n},createHtml:function(e){var t,n,i,r,s,o,u,l,c,d,f;if(e.nodeType===a.ElementType.NORMAL)if(r=e.nodeName.toLowerCase(),a.XHTML.validTag(r))try{for(n=a.xmlElement(r),t=0;t<a.XHTML.attributes[r].length;t++)if(s=a.XHTML.attributes[r][t],o=e.getAttribute(s),"undefined"!=typeof o&&null!==o&&""!==o&&o!==!1&&0!==o)if("style"===s&&"object"==typeof o&&"undefined"!=typeof o.cssText&&(o=o.cssText),"style"===s){for(u=[],l=o.split(";"),i=0;i<l.length;i++)c=l[i].split(":"),d=c[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase(),a.XHTML.validCSS(d)&&(f=c[1].replace(/^\s*/,"").replace(/\s*$/,""),u.push(d+": "+f));u.length>0&&(o=u.join("; "),n.setAttribute(s,o))}else n.setAttribute(s,o);for(t=0;t<e.childNodes.length;t++)n.appendChild(a.createHtml(e.childNodes[t]))}catch(h){n=a.xmlTextNode("")}else for(n=a.xmlGenerator().createDocumentFragment(),t=0;t<e.childNodes.length;t++)n.appendChild(a.createHtml(e.childNodes[t]));else if(e.nodeType===a.ElementType.FRAGMENT)for(n=a.xmlGenerator().createDocumentFragment(),t=0;t<e.childNodes.length;t++)n.appendChild(a.createHtml(e.childNodes[t]));else e.nodeType===a.ElementType.TEXT&&(n=a.xmlTextNode(e.nodeValue));return n},escapeNode:function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(e){return"string"!=typeof e?e:e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(e){return e.indexOf("@")<0?null:e.split("@")[0]},getDomainFromJid:function(e){var t=a.getBareJidFromJid(e);if(t.indexOf("@")<0)return t;var n=t.split("@");return n.splice(0,1),n.join("@")},getResourceFromJid:function(e){var t=e.split("/");return t.length<2?null:(t.splice(0,1),t.join("/"))},getBareJidFromJid:function(e){return e?e.split("/")[0]:null},_handleError:function(e){"undefined"!=typeof e.stack&&a.fatal(e.stack),e.sourceURL?a.fatal("error: "+this.handler+" "+e.sourceURL+":"+e.line+" - "+e.name+": "+e.message):e.fileName?a.fatal("error: "+this.handler+" "+e.fileName+":"+e.lineNumber+" - "+e.name+": "+e.message):a.fatal("error: "+e.message)},log:function(e,t){e===this.LogLevel.FATAL&&"object"==typeof window.console&&"function"==typeof window.console.error&&window.console.error(t)},debug:function(e){this.log(this.LogLevel.DEBUG,e)},info:function(e){this.log(this.LogLevel.INFO,e)},warn:function(e){this.log(this.LogLevel.WARN,e)},error:function(e){this.log(this.LogLevel.ERROR,e)},fatal:function(e){this.log(this.LogLevel.FATAL,e)},serialize:function(e){var t;if(!e)return null;"function"==typeof e.tree&&(e=e.tree());var n,i,r=e.nodeName;for(e.getAttribute("_realname")&&(r=e.getAttribute("_realname")),t="<"+r,n=0;n<e.attributes.length;n++)"_realname"!==e.attributes[n].nodeName&&(t+=" "+e.attributes[n].nodeName+"='"+a.xmlescape(e.attributes[n].value)+"'");if(e.childNodes.length>0){for(t+=">",n=0;n<e.childNodes.length;n++)switch(i=e.childNodes[n],i.nodeType){case a.ElementType.NORMAL:t+=a.serialize(i);break;case a.ElementType.TEXT:t+=a.xmlescape(i.nodeValue);break;case a.ElementType.CDATA:t+="<![CDATA["+i.nodeValue+"]]>"}t+="</"+r+">"}else t+="/>";return t},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(e,t){a._connectionPlugins[e]=t}},a.Builder=function(e,t){"presence"!==e&&"message"!==e&&"iq"!==e||(t&&!t.xmlns?t.xmlns=a.NS.CLIENT:t||(t={xmlns:a.NS.CLIENT})),this.nodeTree=a.xmlElement(e,t),this.node=this.nodeTree},a.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return a.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},root:function(){return this.node=this.nodeTree,this},attrs:function(e){for(var t in e)e.hasOwnProperty(t)&&(void 0===e[t]?this.node.removeAttribute(t):this.node.setAttribute(t,e[t]));return this},c:function(e,t,n){var i=a.xmlElement(e,t,n);return this.node.appendChild(i),"string"!=typeof n&&"number"!=typeof n&&(this.node=i),this},cnode:function(e){var t,n=a.xmlGenerator();try{t=void 0!==n.importNode}catch(i){t=!1}var r=t?n.importNode(e,!0):a.copyElement(e);return this.node.appendChild(r),this.node=r,this},t:function(e){var t=a.xmlTextNode(e);return this.node.appendChild(t),this},h:function(e){var t=document.createElement("body");t.innerHTML=e;for(var n=a.createHtml(t);n.childNodes.length>0;)this.node.appendChild(n.childNodes[0]);return this}},a.Handler=function(e,t,n,i,r,s,o){this.handler=e,this.ns=t,this.name=n,this.type=i,this.id=r,this.options=o||{matchBareFromJid:!1,ignoreNamespaceFragment:!1},this.options.matchBare&&(a.warn('The "matchBare" option is deprecated, use "matchBareFromJid" instead.'),this.options.matchBareFromJid=this.options.matchBare,delete this.options.matchBare),this.options.matchBareFromJid?this.from=s?a.getBareJidFromJid(s):null:this.from=s,this.user=!0},a.Handler.prototype={getNamespace:function(e){var t=e.getAttribute("xmlns");return t&&this.options.ignoreNamespaceFragment&&(t=t.split("#")[0]),t},namespaceMatch:function(e){var t=!1;if(!this.ns)return!0;var n=this;return a.forEachChild(e,null,function(e){n.getNamespace(e)===n.ns&&(t=!0)}),t=t||this.getNamespace(e)===this.ns},isMatch:function(e){var t=e.getAttribute("from");this.options.matchBareFromJid&&(t=a.getBareJidFromJid(t));var n=e.getAttribute("type");return!(!this.namespaceMatch(e)||this.name&&!a.isTagEqual(e,this.name)||this.type&&(Array.isArray(this.type)?this.type.indexOf(n)===-1:n!==this.type)||this.id&&e.getAttribute("id")!==this.id||this.from&&t!==this.from)},run:function(e){var t=null;try{t=this.handler(e)}catch(n){throw a._handleError(n),n}return t},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},a.TimedHandler=function(e,t){this.period=e,this.handler=t,this.lastCalled=(new Date).getTime(),this.user=!0},a.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},a.Connection=function(e,t){this.service=e,this.options=t||{};var i=this.options.protocol||"";0===e.indexOf("ws:")||0===e.indexOf("wss:")||0===i.indexOf("ws")?this._proto=new a.Websocket(this):this._proto=new a.Bosh(this),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.protocolErrorHandlers={HTTP:{},websocket:{}},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100),n.addCookies(this.options.cookies),this.registerSASLMechanisms(this.options.mechanisms);for(var r in a._connectionPlugins)if(a._connectionPlugins.hasOwnProperty(r)){var s=a._connectionPlugins[r],o=function(){};o.prototype=s,this[r]=new o,this[r].init(this)}},a.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this._data=[],this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(e){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)});return"string"==typeof e||"number"==typeof e?t+":"+e:t+""},addProtocolErrorHandler:function(e,t,n){this.protocolErrorHandlers[e][t]=n},connect:function(e,t,n,i,r,s,o){this.jid=e,this.authzid=a.getBareJidFromJid(this.jid),this.authcid=o||a.getNodeFromJid(this.jid),this.pass=t,this.servtype="xmpp",this.connect_callback=n,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.domain=a.getDomainFromJid(this.jid),this._changeConnectStatus(a.Status.CONNECTING,null),this._proto._connect(i,r,s)},attach:function(e,t,n,i,r,s,o){if(!(this._proto instanceof a.Bosh))throw{name:"StropheSessionError",message:'The "attach" method can only be used with a BOSH connection.'};this._proto._attach(e,t,n,i,r,s,o)},restore:function(e,t,n,i,r){if(!this._sessionCachingSupported())throw{name:"StropheSessionError",message:'The "restore" method can only be used with a BOSH connection.'};this._proto._restore(e,t,n,i,r)},_sessionCachingSupported:function(){if(this._proto instanceof a.Bosh){if(!JSON)return!1;try{sessionStorage.setItem("_strophe_","_strophe_"),sessionStorage.removeItem("_strophe_")}catch(e){return!1}return!0}return!1},xmlInput:function(e){},xmlOutput:function(e){},rawInput:function(e){},rawOutput:function(e){},nextValidRid:function(e){},send:function(e){if(null!==e){if("function"==typeof e.sort)for(var t=0;t<e.length;t++)this._queueData(e[t]);else"function"==typeof e.tree?this._queueData(e.tree()):this._queueData(e);this._proto._send()}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendPresence:function(e,t,n,i){var r=null,s=this;"function"==typeof e.tree&&(e=e.tree());var o=e.getAttribute("id");if(o||(o=this.getUniqueId("sendPresence"),e.setAttribute("id",o)),"function"==typeof t||"function"==typeof n){var a=this.addHandler(function(e){r&&s.deleteTimedHandler(r);var i=e.getAttribute("type");"error"===i?n&&n(e):t&&t(e)},null,"presence",null,o);i&&(r=this.addTimedHandler(i,function(){return s.deleteHandler(a),n&&n(null),!1}))}return this.send(e),o},sendIQ:function(e,t,n,i){var r=null,s=this;"function"==typeof e.tree&&(e=e.tree());var o=e.getAttribute("id");if(o||(o=this.getUniqueId("sendIQ"),e.setAttribute("id",o)),"function"==typeof t||"function"==typeof n){var a=this.addHandler(function(e){r&&s.deleteTimedHandler(r);var i=e.getAttribute("type");if("result"===i)t&&t(e);else{if("error"!==i)throw{name:"StropheError",message:"Got bad IQ type of "+i};n&&n(e)}},null,"iq",["error","result"],o);i&&(r=this.addTimedHandler(i,function(){return s.deleteHandler(a),n&&n(null),!1}))}return this.send(e),o},_queueData:function(e){if(null===e||!e.tagName||!e.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(e)},_sendRestart:function(){this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100)},addTimedHandler:function(e,t){var n=new a.TimedHandler(e,t);return this.addTimeds.push(n),n},deleteTimedHandler:function(e){this.removeTimeds.push(e)},addHandler:function(e,t,n,i,r,s,o){var u=new a.Handler(e,t,n,i,r,s,o);return this.addHandlers.push(u),u},deleteHandler:function(e){this.removeHandlers.push(e);var t=this.addHandlers.indexOf(e);t>=0&&this.addHandlers.splice(t,1)},registerSASLMechanisms:function(e){this.mechanisms={},e=e||[a.SASLAnonymous,a.SASLExternal,a.SASLMD5,a.SASLOAuthBearer,a.SASLXOAuth2,a.SASLPlain,a.SASLSHA1],e.forEach(this.registerSASLMechanism.bind(this))},registerSASLMechanism:function(e){this.mechanisms[e.prototype.name]=e},disconnect:function(e){
if(this._changeConnectStatus(a.Status.DISCONNECTING,e),a.info("Disconnect was called because: "+e),this.connected){var t=!1;this.disconnecting=!0,this.authenticated&&(t=o({xmlns:a.NS.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(t)}else a.info("Disconnect was called before Strophe connected to the server"),this._proto._abortAllRequests(),this._doDisconnect()},_changeConnectStatus:function(e,t,n){for(var i in a._connectionPlugins)if(a._connectionPlugins.hasOwnProperty(i)){var r=this[i];if(r.statusChanged)try{r.statusChanged(e,t)}catch(s){a.error(""+i+" plugin caused an exception changing status: "+s)}}if(this.connect_callback)try{this.connect_callback(e,t,n)}catch(o){a._handleError(o),a.error("User connection callback caused an exception: "+o)}},_doDisconnect:function(e){"number"==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),a.info("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(a.Status.DISCONNECTED,e),this.connected=!1},_dataRecv:function(e,t){a.info("_dataRecv called");var n=this._proto._reqToData(e);if(null!==n){this.xmlInput!==a.Connection.prototype.xmlInput&&(n.nodeName===this._proto.strip&&n.childNodes.length?this.xmlInput(n.childNodes[0]):this.xmlInput(n)),this.rawInput!==a.Connection.prototype.rawInput&&(t?this.rawInput(t):this.rawInput(a.serialize(n)));for(var i,r;this.removeHandlers.length>0;)r=this.removeHandlers.pop(),i=this.handlers.indexOf(r),i>=0&&this.handlers.splice(i,1);for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())return void this._doDisconnect();var s,o,u=n.getAttribute("type");if(null!==u&&"terminate"===u){if(this.disconnecting)return;return s=n.getAttribute("condition"),o=n.getElementsByTagName("conflict"),null!==s?("remote-stream-error"===s&&o.length>0&&(s="conflict"),this._changeConnectStatus(a.Status.CONNFAIL,s)):this._changeConnectStatus(a.Status.CONNFAIL,a.ErrorCondition.UNKOWN_REASON),void this._doDisconnect(s)}var l=this;a.forEachChild(n,null,function(e){var t,n;for(n=l.handlers,l.handlers=[],t=0;t<n.length;t++){var i=n[t];try{!i.isMatch(e)||!l.authenticated&&i.user?l.handlers.push(i):i.run(e)&&l.handlers.push(i)}catch(r){a.warn("Removing Strophe handlers due to uncaught exception: "+r.message)}}})}},mechanisms:{},_connect_cb:function(e,t,n){a.info("_connect_cb was called"),this.connected=!0;var i;try{i=this._proto._reqToData(e)}catch(r){if("badformat"!==r)throw r;this._changeConnectStatus(a.Status.CONNFAIL,a.ErrorCondition.BAD_FORMAT),this._doDisconnect(a.ErrorCondition.BAD_FORMAT)}if(i){this.xmlInput!==a.Connection.prototype.xmlInput&&(i.nodeName===this._proto.strip&&i.childNodes.length?this.xmlInput(i.childNodes[0]):this.xmlInput(i)),this.rawInput!==a.Connection.prototype.rawInput&&(n?this.rawInput(n):this.rawInput(a.serialize(i)));var s=this._proto._connect_cb(i);if(s!==a.Status.CONNFAIL){var o;if(o=i.getElementsByTagNameNS?i.getElementsByTagNameNS(a.NS.STREAM,"features").length>0:i.getElementsByTagName("stream:features").length>0||i.getElementsByTagName("features").length>0,!o)return void this._proto._no_auth_received(t);var u,l,c=[],d=i.getElementsByTagName("mechanism");if(d.length>0)for(u=0;u<d.length;u++)l=a.getText(d[u]),this.mechanisms[l]&&c.push(this.mechanisms[l]);return 0===c.length&&0===i.getElementsByTagName("auth").length?void this._proto._no_auth_received(t):void(this.do_authentication!==!1&&this.authenticate(c))}}},sortMechanismsByPriority:function(e){var t,n,i,r;for(t=0;t<e.length-1;++t){for(i=t,n=t+1;n<e.length;++n)e[n].prototype.priority>e[i].prototype.priority&&(i=n);i!==t&&(r=e[t],e[t]=e[i],e[i]=r)}return e},_attemptSASLAuth:function(e){e=this.sortMechanismsByPriority(e||[]);var t=0,n=!1;for(t=0;t<e.length;++t)if(e[t].prototype.test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new e[t],this._sasl_mechanism.onStart(this);var r=i("auth",{xmlns:a.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var s=this._sasl_mechanism.onChallenge(this,null);r.t(btoa(s))}this.send(r.tree()),n=!0;break}return n},_attemptLegacyAuth:function(){null===a.getNodeFromJid(this.jid)?(this._changeConnectStatus(a.Status.CONNFAIL,a.ErrorCondition.MISSING_JID_NODE),this.disconnect(a.ErrorCondition.MISSING_JID_NODE)):(this._changeConnectStatus(a.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(s({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:a.NS.AUTH}).c("username",{}).t(a.getNodeFromJid(this.jid)).tree()))},authenticate:function(e){this._attemptSASLAuth(e)||this._attemptLegacyAuth()},_sasl_challenge_cb:function(e){var t=atob(a.getText(e)),n=this._sasl_mechanism.onChallenge(this,t),r=i("response",{xmlns:a.NS.SASL});return""!==n&&r.t(btoa(n)),this.send(r.tree()),!0},_auth1_cb:function(e){var t=s({type:"set",id:"_auth_2"}).c("query",{xmlns:a.NS.AUTH}).c("username",{}).t(a.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return a.getResourceFromJid(this.jid)||(this.jid=a.getBareJidFromJid(this.jid)+"/strophe"),t.up().c("resource",{}).t(a.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(t.tree()),!1},_sasl_success_cb:function(e){if(this._sasl_data["server-signature"]){var t,n=atob(a.getText(e)),i=/([a-z]+)=([^,]+)(,|$)/,r=n.match(i);if("v"===r[1]&&(t=r[2]),t!==this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}a.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);var s=[],o=function(e,t){for(;e.length;)this.deleteHandler(e.pop());return this._sasl_auth1_cb.bind(this)(t),!1};return s.push(this._addSysHandler(function(e){o.bind(this)(s,e)}.bind(this),null,"stream:features",null,null)),s.push(this._addSysHandler(function(e){o.bind(this)(s,e)}.bind(this),a.NS.STREAM,"features",null,null)),this._sendRestart(),!1},_sasl_auth1_cb:function(e){this.features=e;var t,n;for(t=0;t<e.childNodes.length;t++)n=e.childNodes[t],"bind"===n.nodeName&&(this.do_bind=!0),"session"===n.nodeName&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(a.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var i=a.getResourceFromJid(this.jid);return i?this.send(s({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:a.NS.BIND}).c("resource",{}).t(i).tree()):this.send(s({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:a.NS.BIND}).tree()),!1},_sasl_bind_cb:function(e){if("error"===e.getAttribute("type")){a.info("SASL binding failed.");var t,n=e.getElementsByTagName("conflict");return n.length>0&&(t=a.ErrorCondition.CONFLICT),this._changeConnectStatus(a.Status.AUTHFAIL,t,e),!1}var i,r=e.getElementsByTagName("bind");return r.length>0?(i=r[0].getElementsByTagName("jid"),void(i.length>0&&(this.jid=a.getText(i[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(s({type:"set",id:"_session_auth_2"}).c("session",{xmlns:a.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(a.Status.CONNECTED,null))))):(a.info("SASL binding failed."),this._changeConnectStatus(a.Status.AUTHFAIL,null,e),!1)},_sasl_session_cb:function(e){if("result"===e.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(a.Status.CONNECTED,null);else if("error"===e.getAttribute("type"))return a.info("Session creation failed."),this._changeConnectStatus(a.Status.AUTHFAIL,null,e),!1;return!1},_sasl_failure_cb:function(e){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(a.Status.AUTHFAIL,null,e),!1},_auth2_cb:function(e){return"result"===e.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(a.Status.CONNECTED,null)):"error"===e.getAttribute("type")&&(this._changeConnectStatus(a.Status.AUTHFAIL,null,e),this.disconnect("authentication failed")),!1},_addSysTimedHandler:function(e,t){var n=new a.TimedHandler(e,t);return n.user=!1,this.addTimeds.push(n),n},_addSysHandler:function(e,t,n,i,r){var s=new a.Handler(e,t,n,i,r);return s.user=!1,this.addHandlers.push(s),s},_onDisconnectTimeout:function(){return a.info("_onDisconnectTimeout was called"),this._changeConnectStatus(a.Status.CONNTIMEOUT,null),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(){for(var e,t,n,i;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;)t=this.removeTimeds.pop(),e=this.timedHandlers.indexOf(t),e>=0&&this.timedHandlers.splice(e,1);var r=(new Date).getTime();for(i=[],e=0;e<this.timedHandlers.length;e++)t=this.timedHandlers[e],!this.authenticated&&t.user||(n=t.lastCalled+t.period,n-r<=0?t.run()&&i.push(t):i.push(t));this.timedHandlers=i,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100))}},a.SASLMechanism=function(e,t,n){this.name=e,this.isClientFirst=t,this.priority=n},a.SASLMechanism.prototype={test:function(e){return!0},onStart:function(e){this._connection=e},onChallenge:function(e,t){throw new Error("You should implement challenge handling!")},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},a.SASLAnonymous=function(){},a.SASLAnonymous.prototype=new a.SASLMechanism("ANONYMOUS",(!1),20),a.SASLAnonymous.prototype.test=function(e){return null===e.authcid},a.SASLPlain=function(){},a.SASLPlain.prototype=new a.SASLMechanism("PLAIN",(!0),50),a.SASLPlain.prototype.test=function(e){return null!==e.authcid},a.SASLPlain.prototype.onChallenge=function(e){var t=e.authzid;return t+="\0",t+=e.authcid,t+="\0",t+=e.pass,n.utf16to8(t)},a.SASLSHA1=function(){},a.SASLSHA1.prototype=new a.SASLMechanism("SCRAM-SHA-1",(!0),70),a.SASLSHA1.prototype.test=function(e){return null!==e.authcid},a.SASLSHA1.prototype.onChallenge=function(i,r,s){var o=s||t.hexdigest(1234567890*Math.random()),a="n="+n.utf16to8(i.authcid);return a+=",r=",a+=o,i._sasl_data.cnonce=o,i._sasl_data["client-first-message-bare"]=a,a="n,,"+a,this.onChallenge=function(t,i){for(var r,s,o,a,u,l,c,d,f,h,p,m,v="c=biws,",_=t._sasl_data["client-first-message-bare"]+","+i+",",g=t._sasl_data.cnonce,y=/([a-z]+)=([^,]+)(,|$)/;i.match(y);){var b=i.match(y);switch(i=i.replace(b[0],""),b[1]){case"r":r=b[2];break;case"s":s=b[2];break;case"i":o=b[2]}}if(r.substr(0,g.length)!==g)return t._sasl_data={},t._sasl_failure_cb();for(v+="r="+r,_+=v,s=atob(s),s+="\0\0\0",f=n.utf16to8(t.pass),a=l=e.core_hmac_sha1(f,s),c=1;c<o;c++){for(u=e.core_hmac_sha1(f,e.binb2str(l)),d=0;d<5;d++)a[d]^=u[d];l=u}for(a=e.binb2str(a),h=e.core_hmac_sha1(a,"Client Key"),p=e.str_hmac_sha1(a,"Server Key"),m=e.core_hmac_sha1(e.str_sha1(e.binb2str(h)),_),t._sasl_data["server-signature"]=e.b64_hmac_sha1(p,_),d=0;d<5;d++)h[d]^=m[d];return v+=",p="+btoa(e.binb2str(h))}.bind(this),a},a.SASLMD5=function(){},a.SASLMD5.prototype=new a.SASLMechanism("DIGEST-MD5",(!1),60),a.SASLMD5.prototype.test=function(e){return null!==e.authcid},a.SASLMD5.prototype._quote=function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},a.SASLMD5.prototype.onChallenge=function(e,i,r){for(var s,o=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,a=r||t.hexdigest(""+1234567890*Math.random()),u="",l=null,c="",d="";i.match(o);)switch(s=i.match(o),i=i.replace(s[0],""),s[2]=s[2].replace(/^"(.+)"$/,"$1"),s[1]){case"realm":u=s[2];break;case"nonce":c=s[2];break;case"qop":d=s[2];break;case"host":l=s[2]}var f=e.servtype+"/"+e.domain;null!==l&&(f=f+"/"+l);var h=n.utf16to8(e.authcid+":"+u+":"+this._connection.pass),p=t.hash(h)+":"+c+":"+a,m="AUTHENTICATE:"+f,v="";return v+="charset=utf-8,",v+="username="+this._quote(n.utf16to8(e.authcid))+",",v+="realm="+this._quote(u)+",",v+="nonce="+this._quote(c)+",",v+="nc=00000001,",v+="cnonce="+this._quote(a)+",",v+="digest-uri="+this._quote(f)+",",v+="response="+t.hexdigest(t.hexdigest(p)+":"+c+":00000001:"+a+":auth:"+t.hexdigest(m))+",",v+="qop=auth",this.onChallenge=function(){return""},v},a.SASLOAuthBearer=function(){},a.SASLOAuthBearer.prototype=new a.SASLMechanism("OAUTHBEARER",(!0),40),a.SASLOAuthBearer.prototype.test=function(e){return null!==e.pass},a.SASLOAuthBearer.prototype.onChallenge=function(e){var t="n,";return null!==e.authcid&&(t=t+"a="+e.authzid),t+=",",t+="",t+="auth=Bearer ",t+=e.pass,t+="",t+="",n.utf16to8(t)},a.SASLExternal=function(){},a.SASLExternal.prototype=new a.SASLMechanism("EXTERNAL",(!0),10),a.SASLExternal.prototype.onChallenge=function(e){return e.authcid===e.authzid?"":e.authzid},a.SASLXOAuth2=function(){},a.SASLXOAuth2.prototype=new a.SASLMechanism("X-OAUTH2",(!0),30),a.SASLXOAuth2.prototype.test=function(e){return null!==e.pass},a.SASLXOAuth2.prototype.onChallenge=function(e){var t="\0";return null!==e.authcid&&(t+=e.authzid),t+="\0",t+=e.pass,n.utf16to8(t)},{Strophe:a,$build:i,$iq:s,$msg:r,$pres:o,SHA1:e,MD5:t,b64_hmac_sha1:e.b64_hmac_sha1,b64_sha1:e.b64_sha1,str_hmac_sha1:e.str_hmac_sha1,str_sha1:e.str_sha1}})},function(e,t){e.exports=function(e,t,n,i){var r,s=e=e||{},o=typeof e["default"];"object"!==o&&"function"!==o||(r=e,s=e["default"]);var a="function"==typeof s?s.options:s;if(t&&(a.render=t.render,a.staticRenderFns=t.staticRenderFns),n&&(a._scopeId=n),i){var u=a.computed||(a.computed={});Object.keys(i).forEach(function(e){var t=i[e];u[e]=function(){return t}})}return{esModule:r,exports:s,options:a}}},,,,,function(e,t,n){e.exports={"default":n(218),__esModule:!0}},function(e,t,n){var i=n(47),r=n(10)("toStringTag"),s="Arguments"==i(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=o(t=Object(e),r))?n:s?i(t):"Object"==(a=i(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(17),r=n(248),s=n(83),o=n(92)("IE_PROTO"),a=function(){},u="prototype",l=function(){var e,t=n(82)("iframe"),i=s.length,r="<",o=">";for(t.style.display="none",n(128).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+o+"document.F=Object"+r+"/script"+o),e.close(),l=e.F;i--;)delete l[u][s[i]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(a[u]=i(e),n=new a,a[u]=null,n[o]=e):n=l(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(94),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},,,function(e,t,n){"use strict";(function(t){function n(e){return null==e?"":"object"==typeof e?JSON.stringify(e,null,2):String(e)}function i(e){var t=parseFloat(e);return isNaN(t)?e:t}function r(e,t){for(var n=Object.create(null),i=e.split(","),r=0;r<i.length;r++)n[i[r]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}function s(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}function o(e,t){return Tn.call(e,t)}function a(e){return"string"==typeof e||"number"==typeof e}function u(e){var t=Object.create(null);return function(n){var i=t[n];return i||(t[n]=e(n))}}function l(e,t){function n(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function c(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function d(e,t){for(var n in t)e[n]=t[n];return e}function f(e){return null!==e&&"object"==typeof e}function h(e){return On.call(e)===Mn}function p(e){for(var t={},n=0;n<e.length;n++)e[n]&&d(t,e[n]);return t}function m(){}function v(e){return e.reduce(function(e,t){return e.concat(t.staticKeys||[])},[]).join(",")}function _(e,t){var n=f(e),i=f(t);return n&&i?JSON.stringify(e)===JSON.stringify(t):!n&&!i&&String(e)===String(t)}function g(e,t){for(var n=0;n<e.length;n++)if(_(e[n],t))return n;return-1}function y(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function b(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function w(e){if(!Ln.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}function S(e){return/native code/.test(e.toString())}function T(e){Kn.target&&Vn.push(Kn.target),Kn.target=e}function E(){Kn.target=Vn.pop()}function C(e,t){e.__proto__=t}function A(e,t,n){for(var i=0,r=n.length;i<r;i++){var s=n[i];b(e,s,t[s])}}function x(e,t){if(f(e)){var n;return o(e,"__ob__")&&e.__ob__ instanceof ti?n=e.__ob__:ei.shouldConvert&&!Wn()&&(Array.isArray(e)||h(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new ti(e)),t&&n&&n.vmCount++,n}}function k(e,t,n,i){var r=new Kn,s=Object.getOwnPropertyDescriptor(e,t);if(!s||s.configurable!==!1){var o=s&&s.get,a=s&&s.set,u=x(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=o?o.call(e):n;return Kn.target&&(r.depend(),u&&u.dep.depend(),Array.isArray(t)&&I(t)),t},set:function(t){var i=o?o.call(e):n;t===i||t!==t&&i!==i||(a?a.call(e,t):n=t,u=x(t),r.notify())}})}}function O(e,t,n){if(Array.isArray(e))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(o(e,t))return void(e[t]=n);var i=e.__ob__;if(!(e._isVue||i&&i.vmCount))return i?(k(i.value,t,n),i.dep.notify(),n):void(e[t]=n)}function M(e,t){var n=e.__ob__;e._isVue||n&&n.vmCount||o(e,t)&&(delete e[t],n&&n.dep.notify())}function I(e){for(var t=void 0,n=0,i=e.length;n<i;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&I(t)}function P(e,t){if(!t)return e;for(var n,i,r,s=Object.keys(t),a=0;a<s.length;a++)n=s[a],i=e[n],r=t[n],o(e,n)?h(i)&&h(r)&&P(i,r):O(e,n,r);return e}function R(e,t){return t?e?e.concat(t):Array.isArray(t)?t:[t]:e}function L(e,t){var n=Object.create(e||null);return t?d(n,t):n}function N(e){var t=e.props;if(t){var n,i,r,s={};if(Array.isArray(t))for(n=t.length;n--;)i=t[n],"string"==typeof i&&(r=Cn(i),s[r]={type:null});else if(h(t))for(var o in t)i=t[o],r=Cn(o),s[r]=h(i)?i:{type:i};e.props=s}}function D(e){var t=e.directives;if(t)for(var n in t){var i=t[n];"function"==typeof i&&(t[n]={bind:i,update:i})}}function F(e,t,n){function i(i){var r=ni[i]||ii;c[i]=r(e[i],t[i],n,i)}N(t),D(t);var r=t["extends"];if(r&&(e="function"==typeof r?F(e,r.options,n):F(e,r,n)),t.mixins)for(var s=0,a=t.mixins.length;s<a;s++){var u=t.mixins[s];u.prototype instanceof We&&(u=u.options),e=F(e,u,n)}var l,c={};for(l in e)i(l);for(l in t)o(e,l)||i(l);return c}function q(e,t,n,i){if("string"==typeof n){var r=e[t];if(o(r,n))return r[n];var s=Cn(n);if(o(r,s))return r[s];var a=An(s);if(o(r,a))return r[a];var u=r[n]||r[s]||r[a];return u}}function U(e,t,n,i){var r=t[e],s=!o(n,e),a=n[e];if(z(Boolean,r.type)&&(s&&!o(r,"default")?a=!1:z(String,r.type)||""!==a&&a!==kn(e)||(a=!0)),void 0===a){a=H(i,r,e);var u=ei.shouldConvert;ei.shouldConvert=!0,x(a),ei.shouldConvert=u}return a}function H(e,t,n){if(o(t,"default")){var i=t["default"];return f(i),e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e[n]?e[n]:"function"==typeof i&&t.type!==Function?i.call(e):i}}function j(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t&&t[1]}function z(e,t){if(!Array.isArray(t))return j(t)===j(e);for(var n=0,i=t.length;n<i;n++)if(j(t[n])===j(e))return!0;return!1}function W(e){return new si((void 0),(void 0),(void 0),String(e))}function $(e){var t=new si(e.tag,e.data,e.children,e.text,e.elm,e.context,e.componentOptions);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isCloned=!0,t}function B(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=$(e[n]);return t}function Q(e,t,n,i,r){if(e){var s=n.$options._base;if(f(e)&&(e=s.extend(e)),"function"==typeof e){if(!e.cid)if(e.resolved)e=e.resolved;else if(e=Z(e,s,function(){n.$forceUpdate()}),!e)return;ze(e),t=t||{};var o=ee(t,e);if(e.options.functional)return X(e,o,t,n,i);var a=t.on;t.on=t.nativeOn,e.options["abstract"]&&(t={}),ne(t);var u=e.options.name||r,l=new si("vue-component-"+e.cid+(u?"-"+u:""),t,(void 0),(void 0),(void 0),n,{Ctor:e,propsData:o,listeners:a,tag:r,children:i});return l}}}function X(e,t,n,i,r){var s={},o=e.options.props;if(o)for(var a in o)s[a]=U(a,o,t);var u=Object.create(i),l=function(e,t,n,i){return de(u,e,t,n,i,!0)},c=e.options.render.call(null,l,{props:s,data:n,parent:i,children:r,slots:function(){return ve(r,i)}});return c instanceof si&&(c.functionalContext=i,n.slot&&((c.data||(c.data={})).slot=n.slot)),c}function G(e,t,n,i){var r=e.componentOptions,s={_isComponent:!0,parent:t,propsData:r.propsData,_componentTag:r.tag,_parentVnode:e,_parentListeners:r.listeners,_renderChildren:r.children,_parentElm:n||null,_refElm:i||null},o=e.data.inlineTemplate;return o&&(s.render=o.render,s.staticRenderFns=o.staticRenderFns),new r.Ctor(s)}function K(e,t,n,i){if(!e.componentInstance||e.componentInstance._isDestroyed){var r=e.componentInstance=G(e,pi,n,i);r.$mount(t?e.elm:void 0,t)}else if(e.data.keepAlive){var s=e;V(s,s)}}function V(e,t){var n=t.componentOptions,i=t.componentInstance=e.componentInstance;i._updateFromParent(n.propsData,n.listeners,t,n.children)}function J(e){e.componentInstance._isMounted||(e.componentInstance._isMounted=!0,Ee(e.componentInstance,"mounted")),e.data.keepAlive&&(e.componentInstance._inactive=!1,Ee(e.componentInstance,"activated"))}function Y(e){e.componentInstance._isDestroyed||(e.data.keepAlive?(e.componentInstance._inactive=!0,Ee(e.componentInstance,"deactivated")):e.componentInstance.$destroy())}function Z(e,t,n){if(!e.requested){e.requested=!0;var i=e.pendingCallbacks=[n],r=!0,s=function(n){if(f(n)&&(n=t.extend(n)),e.resolved=n,!r)for(var s=0,o=i.length;s<o;s++)i[s](n)},o=function(e){},a=e(s,o);return a&&"function"==typeof a.then&&!e.resolved&&a.then(s,o),r=!1,e.resolved}e.pendingCallbacks.push(n)}function ee(e,t){var n=t.options.props;if(n){var i={},r=e.attrs,s=e.props,o=e.domProps;if(r||s||o)for(var a in n){var u=kn(a);te(i,s,a,u,!0)||te(i,r,a,u)||te(i,o,a,u)}return i}}function te(e,t,n,i,r){if(t){if(o(t,n))return e[n]=t[n],r||delete t[n],!0;if(o(t,i))return e[n]=t[i],r||delete t[i],!0}return!1}function ne(e){e.hook||(e.hook={});for(var t=0;t<ci.length;t++){var n=ci[t],i=e.hook[n],r=li[n];e.hook[n]=i?ie(r,i):r}}function ie(e,t){return function(n,i,r,s){e(n,i,r,s),t(n,i,r,s)}}function re(e,t,n,i){i+=t;var r=e.__injected||(e.__injected={});if(!r[i]){r[i]=!0;var s=e[t];s?e[t]=function(){s.apply(this,arguments),n.apply(this,arguments)}:e[t]=n}}function se(e){var t={fn:e,invoker:function(){var e=arguments,n=t.fn;if(Array.isArray(n))for(var i=0;i<n.length;i++)n[i].apply(null,e);else n.apply(null,arguments)}};return t}function oe(e,t,n,i,r){var s,o,a,u;for(s in e)o=e[s],a=t[s],u=di(s),o&&(a?o!==a&&(a.fn=o,e[s]=a):(o.invoker||(o=e[s]=se(o)),n(u.name,o.invoker,u.once,u.capture)));for(s in t)e[s]||(u=di(s),i(u.name,t[s].invoker,u.capture))}function ae(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function ue(e){return a(e)?[W(e)]:Array.isArray(e)?le(e):void 0}function le(e,t){var n,i,r,s=[];for(n=0;n<e.length;n++)i=e[n],null!=i&&"boolean"!=typeof i&&(r=s[s.length-1],Array.isArray(i)?s.push.apply(s,le(i,(t||"")+"_"+n)):a(i)?r&&r.text?r.text+=String(i):""!==i&&s.push(W(i)):i.text&&r&&r.text?s[s.length-1]=W(r.text+i.text):(i.tag&&null==i.key&&null!=t&&(i.key="__vlist"+t+"_"+n+"__"),s.push(i)));return s}function ce(e){return e&&e.filter(function(e){return e&&e.componentOptions})[0]}function de(e,t,n,i,r,s){return(Array.isArray(n)||a(n))&&(r=i,i=n,n=void 0),s&&(r=hi),fe(e,t,n,i,r)}function fe(e,t,n,i,r){if(n&&n.__ob__)return ui();if(!t)return ui();Array.isArray(i)&&"function"==typeof i[0]&&(n=n||{},n.scopedSlots={"default":i[0]},i.length=0),r===hi?i=ue(i):r===fi&&(i=ae(i));var s,o;if("string"==typeof t){var a;o=Rn.getTagNamespace(t),s=Rn.isReservedTag(t)?new si(Rn.parsePlatformTagName(t),n,i,(void 0),(void 0),e):(a=q(e.$options,"components",t))?Q(a,n,e,i,t):new si(t,n,i,(void 0),(void 0),e)}else s=Q(t,n,e,i);return s?(o&&he(s,o),s):ui()}function he(e,t){if(e.ns=t,"foreignObject"!==e.tag&&e.children)for(var n=0,i=e.children.length;n<i;n++){var r=e.children[n];r.tag&&!r.ns&&he(r,t)}}function pe(e){e.$vnode=null,e._vnode=null,e._staticTrees=null;var t=e.$options._parentVnode,n=t&&t.context;e.$slots=ve(e.$options._renderChildren,n),e.$scopedSlots={},e._c=function(t,n,i,r){return de(e,t,n,i,r,!1)},e.$createElement=function(t,n,i,r){return de(e,t,n,i,r,!0)}}function me(e){function t(e,t,n){if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]&&"string"!=typeof e[i]&&r(e[i],t+"_"+i,n);else r(e,t,n)}function r(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}e.prototype.$nextTick=function(e){return Bn(e,this)},e.prototype._render=function(){var e=this,t=e.$options,n=t.render,i=t.staticRenderFns,r=t._parentVnode;if(e._isMounted)for(var s in e.$slots)e.$slots[s]=B(e.$slots[s]);r&&r.data.scopedSlots&&(e.$scopedSlots=r.data.scopedSlots),i&&!e._staticTrees&&(e._staticTrees=[]),e.$vnode=r;var o;try{o=n.call(e._renderProxy,e.$createElement)}catch(a){if(!Rn.errorHandler)throw a;Rn.errorHandler.call(null,a,e),o=e._vnode}return o instanceof si||(o=ui()),o.parent=r,o},e.prototype._s=n,e.prototype._v=W,e.prototype._n=i,e.prototype._e=ui,e.prototype._q=_,e.prototype._i=g,e.prototype._m=function(e,n){var i=this._staticTrees[e];return i&&!n?Array.isArray(i)?B(i):$(i):(i=this._staticTrees[e]=this.$options.staticRenderFns[e].call(this._renderProxy),t(i,"__static__"+e,!1),i)},e.prototype._o=function(e,n,i){return t(e,"__once__"+n+(i?"_"+i:""),!0),e},e.prototype._f=function(e){return q(this.$options,"filters",e,!0)||Pn},e.prototype._l=function(e,t){var n,i,r,s,o;if(Array.isArray(e)||"string"==typeof e)for(n=new Array(e.length),i=0,r=e.length;i<r;i++)n[i]=t(e[i],i);else if("number"==typeof e)for(n=new Array(e),i=0;i<e;i++)n[i]=t(i+1,i);else if(f(e))for(s=Object.keys(e),n=new Array(s.length),i=0,r=s.length;i<r;i++)o=s[i],n[i]=t(e[o],o,i);return n},e.prototype._t=function(e,t,n,i){var r=this.$scopedSlots[e];if(r)return n=n||{},i&&d(n,i),r(n)||t;var s=this.$slots[e];return s||t},e.prototype._b=function(e,t,n,i){if(n)if(f(n)){Array.isArray(n)&&(n=p(n));for(var r in n)if("class"===r||"style"===r)e[r]=n[r];else{var s=e.attrs&&e.attrs.type,o=i||Rn.mustUseProp(t,s,r)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={});o[r]=n[r]}}else;return e},e.prototype._k=function(e,t,n){var i=Rn.keyCodes[t]||n;return Array.isArray(i)?i.indexOf(e)===-1:i!==e}}function ve(e,t){var n={};if(!e)return n;for(var i,r,s=[],o=0,a=e.length;o<a;o++)if(r=e[o],(r.context===t||r.functionalContext===t)&&r.data&&(i=r.data.slot)){var u=n[i]||(n[i]=[]);"template"===r.tag?u.push.apply(u,r.children):u.push(r)}else s.push(r);return s.length&&(1!==s.length||" "!==s[0].text&&!s[0].isComment)&&(n["default"]=s),n}function _e(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&be(e,t)}function ge(e,t,n){n?ai.$once(e,t):ai.$on(e,t)}function ye(e,t){ai.$off(e,t)}function be(e,t,n){ai=e,oe(t,n||{},ge,ye,e)}function we(e){var t=/^hook:/;e.prototype.$on=function(e,n){var i=this;return(i._events[e]||(i._events[e]=[])).push(n),t.test(e)&&(i._hasHookEvent=!0),i},e.prototype.$once=function(e,t){function n(){i.$off(e,n),t.apply(i,arguments)}var i=this;return n.fn=t,i.$on(e,n),i},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;var i=n._events[e];if(!i)return n;if(1===arguments.length)return n._events[e]=null,n;for(var r,s=i.length;s--;)if(r=i[s],r===t||r.fn===t){i.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?c(n):n;for(var i=c(arguments,1),r=0,s=n.length;r<s;r++)n[r].apply(t,i)}return t}}function Se(e){var t=e.$options,n=t.parent;if(n&&!t["abstract"]){for(;n.$options["abstract"]&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Te(e){e.prototype._mount=function(e,t){var n=this;return n.$el=e,n.$options.render||(n.$options.render=ui),Ee(n,"beforeMount"),n._watcher=new wi(n,function(){n._update(n._render(),t)},m),t=!1,null==n.$vnode&&(n._isMounted=!0,Ee(n,"mounted")),n},e.prototype._update=function(e,t){var n=this;n._isMounted&&Ee(n,"beforeUpdate");var i=n.$el,r=n._vnode,s=pi;pi=n,n._vnode=e,r?n.$el=n.__patch__(r,e):n.$el=n.__patch__(n.$el,e,t,!1,n.$options._parentElm,n.$options._refElm),pi=s,i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype._updateFromParent=function(e,t,n,i){var r=this,s=!(!r.$options._renderChildren&&!i);if(r.$options._parentVnode=n,r.$vnode=n,r._vnode&&(r._vnode.parent=n),r.$options._renderChildren=i,e&&r.$options.props){ei.shouldConvert=!1;for(var o=r.$options._propKeys||[],a=0;a<o.length;a++){var u=o[a];r[u]=U(u,r.$options.props,e,r)}ei.shouldConvert=!0,r.$options.propsData=e}if(t){var l=r.$options._parentListeners;r.$options._parentListeners=t,be(r,t,l)}s&&(r.$slots=ve(i,n.context),r.$forceUpdate())},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Ee(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options["abstract"]||s(t.$children,e),e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,Ee(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.__patch__(e._vnode,null)}}}function Ee(e,t){var n=e.$options[t];if(n)for(var i=0,r=n.length;i<r;i++)n[i].call(e);e._hasHookEvent&&e.$emit("hook:"+t)}function Ce(){mi.length=0,vi={},_i=gi=!1}function Ae(){gi=!0;var e,t,n;for(mi.sort(function(e,t){return e.id-t.id}),yi=0;yi<mi.length;yi++)e=mi[yi],t=e.id,vi[t]=null,e.run();for(yi=mi.length;yi--;)e=mi[yi],n=e.vm,n._watcher===e&&n._isMounted&&Ee(n,"updated");$n&&Rn.devtools&&$n.emit("flush"),Ce()}function xe(e){var t=e.id;if(null==vi[t]){if(vi[t]=!0,gi){for(var n=mi.length-1;n>=0&&mi[n].id>e.id;)n--;mi.splice(Math.max(n,yi)+1,0,e)}else mi.push(e);_i||(_i=!0,Bn(Ae))}}function ke(e){Si.clear(),Oe(e,Si)}function Oe(e,t){var n,i,r=Array.isArray(e);if((r||f(e))&&Object.isExtensible(e)){if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(r)for(n=e.length;n--;)Oe(e[n],t);else for(i=Object.keys(e),n=i.length;n--;)Oe(e[i[n]],t)}}function Me(e){e._watchers=[];var t=e.$options;t.props&&Ie(e,t.props),t.methods&&Ne(e,t.methods),t.data?Pe(e):x(e._data={},!0),t.computed&&Re(e,t.computed),t.watch&&De(e,t.watch)}function Ie(e,t){var n=e.$options.propsData||{},i=e.$options._propKeys=Object.keys(t),r=!e.$parent;
ei.shouldConvert=r;for(var s=function(r){var s=i[r];k(e,s,U(s,t,n,e))},o=0;o<i.length;o++)s(o);ei.shouldConvert=!0}function Pe(e){var t=e.$options.data;t=e._data="function"==typeof t?t.call(e):t||{},h(t)||(t={});for(var n=Object.keys(t),i=e.$options.props,r=n.length;r--;)i&&o(i,n[r])||Ue(e,n[r]);x(t,!0)}function Re(e,t){for(var n in t){var i=t[n];"function"==typeof i?(Ti.get=Le(i,e),Ti.set=m):(Ti.get=i.get?i.cache!==!1?Le(i.get,e):l(i.get,e):m,Ti.set=i.set?l(i.set,e):m),Object.defineProperty(e,n,Ti)}}function Le(e,t){var n=new wi(t,e,m,{lazy:!0});return function(){return n.dirty&&n.evaluate(),Kn.target&&n.depend(),n.value}}function Ne(e,t){for(var n in t)e[n]=null==t[n]?m:l(t[n],e)}function De(e,t){for(var n in t){var i=t[n];if(Array.isArray(i))for(var r=0;r<i.length;r++)Fe(e,n,i[r]);else Fe(e,n,i)}}function Fe(e,t,n){var i;h(n)&&(i=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,i)}function qe(e){var t={};t.get=function(){return this._data},Object.defineProperty(e.prototype,"$data",t),e.prototype.$set=O,e.prototype.$delete=M,e.prototype.$watch=function(e,t,n){var i=this;n=n||{},n.user=!0;var r=new wi(i,e,t,n);return n.immediate&&t.call(i,r.value),function(){r.teardown()}}}function Ue(e,t){y(t)||Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return e._data[t]},set:function(n){e._data[t]=n}})}function He(e){e.prototype._init=function(e){var t=this;t._uid=Ei++,t._isVue=!0,e&&e._isComponent?je(t,e):t.$options=F(ze(t.constructor),e||{},t),t._renderProxy=t,t._self=t,Se(t),_e(t),pe(t),Ee(t,"beforeCreate"),Me(t),Ee(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function je(e,t){var n=e.$options=Object.create(e.constructor.options);n.parent=t.parent,n.propsData=t.propsData,n._parentVnode=t._parentVnode,n._parentListeners=t._parentListeners,n._renderChildren=t._renderChildren,n._componentTag=t._componentTag,n._parentElm=t._parentElm,n._refElm=t._refElm,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function ze(e){var t=e.options;if(e["super"]){var n=e["super"].options,i=e.superOptions,r=e.extendOptions;n!==i&&(e.superOptions=n,r.render=t.render,r.staticRenderFns=t.staticRenderFns,r._scopeId=t._scopeId,t=e.options=F(n,r),t.name&&(t.components[t.name]=e))}return t}function We(e){this._init(e)}function $e(e){e.use=function(e){if(!e.installed){var t=c(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}}}function Be(e){e.mixin=function(e){this.options=F(this.options,e)}}function Qe(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,i=n.cid,r=e._Ctor||(e._Ctor={});if(r[i])return r[i];var s=e.name||n.options.name,o=function(e){this._init(e)};return o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.cid=t++,o.options=F(n.options,e),o["super"]=n,o.extend=n.extend,o.mixin=n.mixin,o.use=n.use,Rn._assetTypes.forEach(function(e){o[e]=n[e]}),s&&(o.options.components[s]=o),o.superOptions=n.options,o.extendOptions=e,r[i]=o,o}}function Xe(e){Rn._assetTypes.forEach(function(t){e[t]=function(e,n){return n?("component"===t&&h(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"==typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}})}function Ge(e){return e&&(e.Ctor.options.name||e.tag)}function Ke(e,t){return"string"==typeof e?e.split(",").indexOf(t)>-1:e.test(t)}function Ve(e,t){for(var n in e){var i=e[n];if(i){var r=Ge(i.componentOptions);r&&!t(r)&&(Je(i),e[n]=null)}}}function Je(e){e&&(e.componentInstance._inactive||Ee(e.componentInstance,"deactivated"),e.componentInstance.$destroy())}function Ye(e){var t={};t.get=function(){return Rn},Object.defineProperty(e,"config",t),e.util=ri,e.set=O,e["delete"]=M,e.nextTick=Bn,e.options=Object.create(null),Rn._assetTypes.forEach(function(t){e.options[t+"s"]=Object.create(null)}),e.options._base=e,d(e.options.components,xi),$e(e),Be(e),Qe(e),Xe(e)}function Ze(e){for(var t=e.data,n=e,i=e;i.componentInstance;)i=i.componentInstance._vnode,i.data&&(t=et(i.data,t));for(;n=n.parent;)n.data&&(t=et(t,n.data));return tt(t)}function et(e,t){return{staticClass:nt(e.staticClass,t.staticClass),"class":e["class"]?[e["class"],t["class"]]:t["class"]}}function tt(e){var t=e["class"],n=e.staticClass;return n||t?nt(n,it(t)):""}function nt(e,t){return e?t?e+" "+t:e:t||""}function it(e){var t="";if(!e)return t;if("string"==typeof e)return e;if(Array.isArray(e)){for(var n,i=0,r=e.length;i<r;i++)e[i]&&(n=it(e[i]))&&(t+=n+" ");return t.slice(0,-1)}if(f(e)){for(var s in e)e[s]&&(t+=s+" ");return t.slice(0,-1)}return t}function rt(e){return Hi(e)?"svg":"math"===e?"math":void 0}function st(e){if(!Dn)return!0;if(ji(e))return!1;if(e=e.toLowerCase(),null!=zi[e])return zi[e];var t=document.createElement(e);return e.indexOf("-")>-1?zi[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:zi[e]=/HTMLUnknownElement/.test(t.toString())}function ot(e){if("string"==typeof e){if(e=document.querySelector(e),!e)return document.createElement("div")}return e}function at(e,t){var n=document.createElement(e);return"select"!==e?n:(t.data&&t.data.attrs&&"multiple"in t.data.attrs&&n.setAttribute("multiple","multiple"),n)}function ut(e,t){return document.createElementNS(qi[e],t)}function lt(e){return document.createTextNode(e)}function ct(e){return document.createComment(e)}function dt(e,t,n){e.insertBefore(t,n)}function ft(e,t){e.removeChild(t)}function ht(e,t){e.appendChild(t)}function pt(e){return e.parentNode}function mt(e){return e.nextSibling}function vt(e){return e.tagName}function _t(e,t){e.textContent=t}function gt(e,t,n){e.setAttribute(t,n)}function yt(e,t){var n=e.data.ref;if(n){var i=e.context,r=e.componentInstance||e.elm,o=i.$refs;t?Array.isArray(o[n])?s(o[n],r):o[n]===r&&(o[n]=void 0):e.data.refInFor?Array.isArray(o[n])&&o[n].indexOf(r)<0?o[n].push(r):o[n]=[r]:o[n]=r}}function bt(e){return null==e}function wt(e){return null!=e}function St(e,t){return e.key===t.key&&e.tag===t.tag&&e.isComment===t.isComment&&!e.data==!t.data}function Tt(e,t,n){var i,r,s={};for(i=t;i<=n;++i)r=e[i].key,wt(r)&&(s[r]=i);return s}function Et(e){function t(e){return new si(x.tagName(e).toLowerCase(),{},[],(void 0),e)}function n(e,t){function n(){0===--n.listeners&&i(e)}return n.listeners=t,n}function i(e){var t=x.parentNode(e);t&&x.removeChild(t,e)}function s(e,t,n,i,r){if(e.isRootInsert=!r,!o(e,t,n,i)){var s=e.data,a=e.children,u=e.tag;wt(u)?(e.elm=e.ns?x.createElementNS(e.ns,u):x.createElement(u,e),p(e),d(e,a,t),wt(s)&&h(e,t),c(n,e.elm,i)):e.isComment?(e.elm=x.createComment(e.text),c(n,e.elm,i)):(e.elm=x.createTextNode(e.text),c(n,e.elm,i))}}function o(e,t,n,i){var r=e.data;if(wt(r)){var s=wt(e.componentInstance)&&r.keepAlive;if(wt(r=r.hook)&&wt(r=r.init)&&r(e,!1,n,i),wt(e.componentInstance))return u(e,t),s&&l(e,t,n,i),!0}}function u(e,t){e.data.pendingInsert&&t.push.apply(t,e.data.pendingInsert),e.elm=e.componentInstance.$el,f(e)?(h(e,t),p(e)):(yt(e),t.push(e))}function l(e,t,n,i){for(var r,s=e;s.componentInstance;)if(s=s.componentInstance._vnode,wt(r=s.data)&&wt(r=r.transition)){for(r=0;r<C.activate.length;++r)C.activate[r](Bi,s);t.push(s);break}c(n,e.elm,i)}function c(e,t,n){e&&(n?x.insertBefore(e,t,n):x.appendChild(e,t))}function d(e,t,n){if(Array.isArray(t))for(var i=0;i<t.length;++i)s(t[i],n,e.elm,null,!0);else a(e.text)&&x.appendChild(e.elm,x.createTextNode(e.text))}function f(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return wt(e.tag)}function h(e,t){for(var n=0;n<C.create.length;++n)C.create[n](Bi,e);T=e.data.hook,wt(T)&&(T.create&&T.create(Bi,e),T.insert&&t.push(e))}function p(e){var t;wt(t=e.context)&&wt(t=t.$options._scopeId)&&x.setAttribute(e.elm,t,""),wt(t=pi)&&t!==e.context&&wt(t=t.$options._scopeId)&&x.setAttribute(e.elm,t,"")}function m(e,t,n,i,r,o){for(;i<=r;++i)s(n[i],o,e,t)}function v(e){var t,n,i=e.data;if(wt(i))for(wt(t=i.hook)&&wt(t=t.destroy)&&t(e),t=0;t<C.destroy.length;++t)C.destroy[t](e);if(wt(t=e.children))for(n=0;n<e.children.length;++n)v(e.children[n])}function _(e,t,n,r){for(;n<=r;++n){var s=t[n];wt(s)&&(wt(s.tag)?(g(s),v(s)):i(s.elm))}}function g(e,t){if(t||wt(e.data)){var r=C.remove.length+1;for(t?t.listeners+=r:t=n(e.elm,r),wt(T=e.componentInstance)&&wt(T=T._vnode)&&wt(T.data)&&g(T,t),T=0;T<C.remove.length;++T)C.remove[T](e,t);wt(T=e.data.hook)&&wt(T=T.remove)?T(e,t):t()}else i(e.elm)}function y(e,t,n,i,r){for(var o,a,u,l,c=0,d=0,f=t.length-1,h=t[0],p=t[f],v=n.length-1,g=n[0],y=n[v],w=!r;c<=f&&d<=v;)bt(h)?h=t[++c]:bt(p)?p=t[--f]:St(h,g)?(b(h,g,i),h=t[++c],g=n[++d]):St(p,y)?(b(p,y,i),p=t[--f],y=n[--v]):St(h,y)?(b(h,y,i),w&&x.insertBefore(e,h.elm,x.nextSibling(p.elm)),h=t[++c],y=n[--v]):St(p,g)?(b(p,g,i),w&&x.insertBefore(e,p.elm,h.elm),p=t[--f],g=n[++d]):(bt(o)&&(o=Tt(t,c,f)),a=wt(g.key)?o[g.key]:null,bt(a)?(s(g,i,e,h.elm),g=n[++d]):(u=t[a],St(u,g)?(b(u,g,i),t[a]=void 0,w&&x.insertBefore(e,g.elm,h.elm),g=n[++d]):(s(g,i,e,h.elm),g=n[++d])));c>f?(l=bt(n[v+1])?null:n[v+1].elm,m(e,l,n,d,v,i)):d>v&&_(e,t,c,f)}function b(e,t,n,i){if(e!==t){if(t.isStatic&&e.isStatic&&t.key===e.key&&(t.isCloned||t.isOnce))return t.elm=e.elm,void(t.componentInstance=e.componentInstance);var r,s=t.data,o=wt(s);o&&wt(r=s.hook)&&wt(r=r.prepatch)&&r(e,t);var a=t.elm=e.elm,u=e.children,l=t.children;if(o&&f(t)){for(r=0;r<C.update.length;++r)C.update[r](e,t);wt(r=s.hook)&&wt(r=r.update)&&r(e,t)}bt(t.text)?wt(u)&&wt(l)?u!==l&&y(a,u,l,n,i):wt(l)?(wt(e.text)&&x.setTextContent(a,""),m(a,null,l,0,l.length-1,n)):wt(u)?_(a,u,0,u.length-1):wt(e.text)&&x.setTextContent(a,""):e.text!==t.text&&x.setTextContent(a,t.text),o&&wt(r=s.hook)&&wt(r=r.postpatch)&&r(e,t)}}function w(e,t,n){if(n&&e.parent)e.parent.data.pendingInsert=t;else for(var i=0;i<t.length;++i)t[i].data.hook.insert(t[i])}function S(e,t,n){t.elm=e;var i=t.tag,r=t.data,s=t.children;if(wt(r)&&(wt(T=r.hook)&&wt(T=T.init)&&T(t,!0),wt(T=t.componentInstance)))return u(t,n),!0;if(wt(i)){if(wt(s))if(e.hasChildNodes()){for(var o=!0,a=e.firstChild,l=0;l<s.length;l++){if(!a||!S(a,s[l],n)){o=!1;break}a=a.nextSibling}if(!o||a)return!1}else d(t,s,n);if(wt(r))for(var c in r)if(!k(c)){h(t,n);break}}else e.data!==t.text&&(e.data=t.text);return!0}var T,E,C={},A=e.modules,x=e.nodeOps;for(T=0;T<Qi.length;++T)for(C[Qi[T]]=[],E=0;E<A.length;++E)void 0!==A[E][Qi[T]]&&C[Qi[T]].push(A[E][Qi[T]]);var k=r("attrs,style,class,staticClass,staticStyle,key");return function(e,n,i,r,o,a){if(!n)return void(e&&v(e));var u=!1,l=[];if(e){var c=wt(e.nodeType);if(!c&&St(e,n))b(e,n,l,r);else{if(c){if(1===e.nodeType&&e.hasAttribute("server-rendered")&&(e.removeAttribute("server-rendered"),i=!0),i&&S(e,n,l))return w(n,l,!0),e;e=t(e)}var d=e.elm,h=x.parentNode(d);if(s(n,l,d._leaveCb?null:h,x.nextSibling(d)),n.parent){for(var p=n.parent;p;)p.elm=n.elm,p=p.parent;if(f(n))for(var m=0;m<C.create.length;++m)C.create[m](Bi,n.parent)}null!==h?_(h,[e],0,0):wt(e.tag)&&v(e)}}else u=!0,s(n,l,o,a);return w(n,l,u),n.elm}}function Ct(e,t){(e.data.directives||t.data.directives)&&At(e,t)}function At(e,t){var n,i,r,s=e===Bi,o=t===Bi,a=xt(e.data.directives,e.context),u=xt(t.data.directives,t.context),l=[],c=[];for(n in u)i=a[n],r=u[n],i?(r.oldValue=i.value,Ot(r,"update",t,e),r.def&&r.def.componentUpdated&&c.push(r)):(Ot(r,"bind",t,e),r.def&&r.def.inserted&&l.push(r));if(l.length){var d=function(){for(var n=0;n<l.length;n++)Ot(l[n],"inserted",t,e)};s?re(t.data.hook||(t.data.hook={}),"insert",d,"dir-insert"):d()}if(c.length&&re(t.data.hook||(t.data.hook={}),"postpatch",function(){for(var n=0;n<c.length;n++)Ot(c[n],"componentUpdated",t,e)},"dir-postpatch"),!s)for(n in a)u[n]||Ot(a[n],"unbind",e,e,o)}function xt(e,t){var n=Object.create(null);if(!e)return n;var i,r;for(i=0;i<e.length;i++)r=e[i],r.modifiers||(r.modifiers=Gi),n[kt(r)]=r,r.def=q(t.$options,"directives",r.name,!0);return n}function kt(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Ot(e,t,n,i,r){var s=e.def&&e.def[t];s&&s(n.elm,e,n,i,r)}function Mt(e,t){if(e.data.attrs||t.data.attrs){var n,i,r,s=t.elm,o=e.data.attrs||{},a=t.data.attrs||{};a.__ob__&&(a=t.data.attrs=d({},a));for(n in a)i=a[n],r=o[n],r!==i&&It(s,n,i);Un&&a.value!==o.value&&It(s,"value",a.value);for(n in o)null==a[n]&&(Ni(n)?s.removeAttributeNS(Li,Di(n)):Pi(n)||s.removeAttribute(n))}}function It(e,t,n){Ri(t)?Fi(n)?e.removeAttribute(t):e.setAttribute(t,t):Pi(t)?e.setAttribute(t,Fi(n)||"false"===n?"false":"true"):Ni(t)?Fi(n)?e.removeAttributeNS(Li,Di(t)):e.setAttributeNS(Li,t,n):Fi(n)?e.removeAttribute(t):e.setAttribute(t,n)}function Pt(e,t){var n=t.elm,i=t.data,r=e.data;if(i.staticClass||i["class"]||r&&(r.staticClass||r["class"])){var s=Ze(t),o=n._transitionClasses;o&&(s=nt(s,it(o))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}function Rt(e,t,n,i){if(n){var r=t,s=ki;t=function(n){Lt(e,t,i,s),1===arguments.length?r(n):r.apply(null,arguments)}}ki.addEventListener(e,t,i)}function Lt(e,t,n,i){(i||ki).removeEventListener(e,t,n)}function Nt(e,t){if(e.data.on||t.data.on){var n=t.data.on||{},i=e.data.on||{};ki=t.elm,oe(n,i,Rt,Lt,t.context)}}function Dt(e,t){if(e.data.domProps||t.data.domProps){var n,i,r=t.elm,s=e.data.domProps||{},o=t.data.domProps||{};o.__ob__&&(o=t.data.domProps=d({},o));for(n in s)null==o[n]&&(r[n]="");for(n in o)if(i=o[n],"textContent"!==n&&"innerHTML"!==n||(t.children&&(t.children.length=0),i!==s[n]))if("value"===n){r._value=i;var a=null==i?"":String(i);Ft(r,t,a)&&(r.value=a)}else r[n]=i}}function Ft(e,t,n){return!e.composing&&("option"===t.tag||qt(e,n)||Ut(t,n))}function qt(e,t){return document.activeElement!==e&&e.value!==t}function Ut(e,t){var n=e.elm.value,r=e.elm._vModifiers;return r&&r.number||"number"===e.elm.type?i(n)!==i(t):r&&r.trim?n.trim()!==t.trim():n!==t}function Ht(e){var t=jt(e.style);return e.staticStyle?d(e.staticStyle,t):t}function jt(e){return Array.isArray(e)?p(e):"string"==typeof e?er(e):e}function zt(e,t){var n,i={};if(t)for(var r=e;r.componentInstance;)r=r.componentInstance._vnode,r.data&&(n=Ht(r.data))&&d(i,n);(n=Ht(e.data))&&d(i,n);for(var s=e;s=s.parent;)s.data&&(n=Ht(s.data))&&d(i,n);return i}function Wt(e,t){var n=t.data,i=e.data;if(n.staticStyle||n.style||i.staticStyle||i.style){var r,s,o=t.elm,a=e.data.staticStyle,u=e.data.style||{},l=a||u,c=jt(t.data.style)||{};t.data.style=c.__ob__?d({},c):c;var f=zt(t,!0);for(s in l)null==f[s]&&ir(o,s,"");for(s in f)r=f[s],r!==l[s]&&ir(o,s,null==r?"":r)}}function $t(e,t){if(t&&t.trim())if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach(function(t){return e.classList.add(t)}):e.classList.add(t);else{var n=" "+e.getAttribute("class")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function Bt(e,t){if(t&&t.trim())if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t);else{for(var n=" "+e.getAttribute("class")+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");e.setAttribute("class",n.trim())}}function Qt(e){pr(function(){pr(e)})}function Xt(e,t){(e._transitionClasses||(e._transitionClasses=[])).push(t),$t(e,t)}function Gt(e,t){e._transitionClasses&&s(e._transitionClasses,t),Bt(e,t)}function Kt(e,t,n){var i=Vt(e,t),r=i.type,s=i.timeout,o=i.propCount;if(!r)return n();var a=r===ur?dr:hr,u=0,l=function(){e.removeEventListener(a,c),n()},c=function(t){t.target===e&&++u>=o&&l()};setTimeout(function(){u<o&&l()},s+1),e.addEventListener(a,c)}function Vt(e,t){var n,i=window.getComputedStyle(e),r=i[cr+"Delay"].split(", "),s=i[cr+"Duration"].split(", "),o=Jt(r,s),a=i[fr+"Delay"].split(", "),u=i[fr+"Duration"].split(", "),l=Jt(a,u),c=0,d=0;t===ur?o>0&&(n=ur,c=o,d=s.length):t===lr?l>0&&(n=lr,c=l,d=u.length):(c=Math.max(o,l),n=c>0?o>l?ur:lr:null,d=n?n===ur?s.length:u.length:0);var f=n===ur&&mr.test(i[cr+"Property"]);return{type:n,timeout:c,propCount:d,hasTransform:f}}function Jt(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map(function(t,n){return Yt(t)+Yt(e[n])}))}function Yt(e){return 1e3*Number(e.slice(0,-1))}function Zt(e,t){var n=e.elm;n._leaveCb&&(n._leaveCb.cancelled=!0,n._leaveCb());var i=tn(e.data.transition);if(i&&!n._enterCb&&1===n.nodeType){for(var r=i.css,s=i.type,o=i.enterClass,a=i.enterToClass,u=i.enterActiveClass,l=i.appearClass,c=i.appearToClass,d=i.appearActiveClass,f=i.beforeEnter,h=i.enter,p=i.afterEnter,m=i.enterCancelled,v=i.beforeAppear,_=i.appear,g=i.afterAppear,y=i.appearCancelled,b=pi,w=pi.$vnode;w&&w.parent;)w=w.parent,b=w.context;var S=!b._isMounted||!e.isRootInsert;if(!S||_||""===_){var T=S?l:o,E=S?d:u,C=S?c:a,A=S?v||f:f,x=S&&"function"==typeof _?_:h,k=S?g||p:p,O=S?y||m:m,M=r!==!1&&!Un,I=x&&(x._length||x.length)>1,P=n._enterCb=nn(function(){M&&(Gt(n,C),Gt(n,E)),P.cancelled?(M&&Gt(n,T),O&&O(n)):k&&k(n),n._enterCb=null});e.data.show||re(e.data.hook||(e.data.hook={}),"insert",function(){var t=n.parentNode,i=t&&t._pending&&t._pending[e.key];i&&i.tag===e.tag&&i.elm._leaveCb&&i.elm._leaveCb(),x&&x(n,P)},"transition-insert"),A&&A(n),M&&(Xt(n,T),Xt(n,E),Qt(function(){Xt(n,C),Gt(n,T),P.cancelled||I||Kt(n,s,P)})),e.data.show&&(t&&t(),x&&x(n,P)),M||I||P()}}}function en(e,t){function n(){_.cancelled||(e.data.show||((i.parentNode._pending||(i.parentNode._pending={}))[e.key]=e),c&&c(i),m&&(Xt(i,a),Xt(i,l),Qt(function(){Xt(i,u),Gt(i,a),_.cancelled||v||Kt(i,o,_)})),d&&d(i,_),m||v||_())}var i=e.elm;i._enterCb&&(i._enterCb.cancelled=!0,i._enterCb());var r=tn(e.data.transition);if(!r)return t();if(!i._leaveCb&&1===i.nodeType){var s=r.css,o=r.type,a=r.leaveClass,u=r.leaveToClass,l=r.leaveActiveClass,c=r.beforeLeave,d=r.leave,f=r.afterLeave,h=r.leaveCancelled,p=r.delayLeave,m=s!==!1&&!Un,v=d&&(d._length||d.length)>1,_=i._leaveCb=nn(function(){i.parentNode&&i.parentNode._pending&&(i.parentNode._pending[e.key]=null),m&&(Gt(i,u),Gt(i,l)),_.cancelled?(m&&Gt(i,a),h&&h(i)):(t(),f&&f(i)),i._leaveCb=null});p?p(n):n()}}function tn(e){if(e){if("object"==typeof e){var t={};return e.css!==!1&&d(t,vr(e.name||"v")),d(t,e),t}return"string"==typeof e?vr(e):void 0}}function nn(e){var t=!1;return function(){t||(t=!0,e())}}function rn(e,t){t.data.show||Zt(t)}function sn(e,t,n){var i=t.value,r=e.multiple;if(!r||Array.isArray(i)){for(var s,o,a=0,u=e.options.length;a<u;a++)if(o=e.options[a],r)s=g(i,an(o))>-1,o.selected!==s&&(o.selected=s);else if(_(an(o),i))return void(e.selectedIndex!==a&&(e.selectedIndex=a));r||(e.selectedIndex=-1)}}function on(e,t){for(var n=0,i=t.length;n<i;n++)if(_(an(t[n]),e))return!1;return!0}function an(e){return"_value"in e?e._value:e.value}function un(e){e.target.composing=!0}function ln(e){e.target.composing=!1,cn(e.target,"input")}function cn(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function dn(e){return!e.componentInstance||e.data&&e.data.transition?e:dn(e.componentInstance._vnode)}function fn(e){var t=e&&e.componentOptions;return t&&t.Ctor.options["abstract"]?fn(ce(t.children)):e}function hn(e){var t={},n=e.$options;for(var i in n.propsData)t[i]=e[i];var r=n._parentListeners;for(var s in r)t[Cn(s)]=r[s].fn;return t}function pn(e,t){return/\d-keep-alive$/.test(t.tag)?e("keep-alive"):null}function mn(e){for(;e=e.parent;)if(e.data.transition)return!0}function vn(e,t){return t.key===e.key&&t.tag===e.tag}function _n(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function gn(e){e.data.newPos=e.elm.getBoundingClientRect()}function yn(e){var t=e.data.pos,n=e.data.newPos,i=t.left-n.left,r=t.top-n.top;if(i||r){e.data.moved=!0;var s=e.elm.style;s.transform=s.WebkitTransform="translate("+i+"px,"+r+"px)",s.transitionDuration="0s"}}var bn,wn,Sn=r("slot,component",!0),Tn=Object.prototype.hasOwnProperty,En=/-(\w)/g,Cn=u(function(e){return e.replace(En,function(e,t){return t?t.toUpperCase():""})}),An=u(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),xn=/([^-])([A-Z])/g,kn=u(function(e){return e.replace(xn,"$1-$2").replace(xn,"$1-$2").toLowerCase()}),On=Object.prototype.toString,Mn="[object Object]",In=function(){return!1},Pn=function(e){return e},Rn={optionMergeStrategies:Object.create(null),silent:!1,devtools:!1,errorHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:In,isUnknownElement:In,getTagNamespace:m,parsePlatformTagName:Pn,mustUseProp:In,_assetTypes:["component","directive","filter"],_lifecycleHooks:["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated"],_maxUpdateCount:100},Ln=/[^\w.$]/,Nn="__proto__"in{},Dn="undefined"!=typeof window,Fn=Dn&&window.navigator.userAgent.toLowerCase(),qn=Fn&&/msie|trident/.test(Fn),Un=Fn&&Fn.indexOf("msie 9.0")>0,Hn=Fn&&Fn.indexOf("edge/")>0,jn=Fn&&Fn.indexOf("android")>0,zn=Fn&&/iphone|ipad|ipod|ios/.test(Fn),Wn=function(){return void 0===bn&&(bn=!Dn&&"undefined"!=typeof t&&"server"===t.process.env.VUE_ENV),bn},$n=Dn&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Bn=function(){function e(){i=!1;var e=n.slice(0);n.length=0;for(var t=0;t<e.length;t++)e[t]()}var t,n=[],i=!1;if("undefined"!=typeof Promise&&S(Promise)){var r=Promise.resolve(),s=function(e){console.error(e)};t=function(){r.then(e)["catch"](s),zn&&setTimeout(m)}}else if("undefined"==typeof MutationObserver||!S(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())t=function(){setTimeout(e,0)};else{var o=1,a=new MutationObserver(e),u=document.createTextNode(String(o));a.observe(u,{characterData:!0}),t=function(){o=(o+1)%2,u.data=String(o)}}return function(e,r){var s;if(n.push(function(){e&&e.call(r),s&&s(r)}),i||(i=!0,t()),!e&&"undefined"!=typeof Promise)return new Promise(function(e){s=e})}}();wn="undefined"!=typeof Set&&S(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return this.set[e]===!0},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var Qn,Xn=m,Gn=0,Kn=function(){this.id=Gn++,this.subs=[]};Kn.prototype.addSub=function(e){this.subs.push(e)},Kn.prototype.removeSub=function(e){s(this.subs,e)},Kn.prototype.depend=function(){Kn.target&&Kn.target.addDep(this)},Kn.prototype.notify=function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()},Kn.target=null;var Vn=[],Jn=Array.prototype,Yn=Object.create(Jn);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=Jn[e];b(Yn,e,function(){for(var n=arguments,i=arguments.length,r=new Array(i);i--;)r[i]=n[i];var s,o=t.apply(this,r),a=this.__ob__;switch(e){case"push":s=r;break;case"unshift":s=r;break;case"splice":s=r.slice(2)}return s&&a.observeArray(s),a.dep.notify(),o})});var Zn=Object.getOwnPropertyNames(Yn),ei={shouldConvert:!0,isSettingProps:!1},ti=function(e){if(this.value=e,this.dep=new Kn,this.vmCount=0,b(e,"__ob__",this),Array.isArray(e)){var t=Nn?C:A;t(e,Yn,Zn),this.observeArray(e)}else this.walk(e)};ti.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)k(e,t[n],e[t[n]])},ti.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)x(e[t])};var ni=Rn.optionMergeStrategies;ni.data=function(e,t,n){return n?e||t?function(){var i="function"==typeof t?t.call(n):t,r="function"==typeof e?e.call(n):void 0;return i?P(i,r):r}:void 0:t?"function"!=typeof t?e:e?function(){return P(t.call(this),e.call(this))}:t:e},Rn._lifecycleHooks.forEach(function(e){ni[e]=R}),Rn._assetTypes.forEach(function(e){ni[e+"s"]=L}),ni.watch=function(e,t){if(!t)return e;if(!e)return t;var n={};d(n,e);for(var i in t){var r=n[i],s=t[i];r&&!Array.isArray(r)&&(r=[r]),n[i]=r?r.concat(s):[s]}return n},ni.props=ni.methods=ni.computed=function(e,t){if(!t)return e;if(!e)return t;var n=Object.create(null);return d(n,e),d(n,t),n};var ii=function(e,t){return void 0===t?e:t},ri=Object.freeze({defineReactive:k,_toString:n,toNumber:i,makeMap:r,isBuiltInTag:Sn,remove:s,hasOwn:o,isPrimitive:a,cached:u,camelize:Cn,capitalize:An,hyphenate:kn,bind:l,toArray:c,extend:d,isObject:f,isPlainObject:h,toObject:p,noop:m,no:In,identity:Pn,genStaticKeys:v,looseEqual:_,looseIndexOf:g,isReserved:y,def:b,parsePath:w,hasProto:Nn,inBrowser:Dn,UA:Fn,isIE:qn,isIE9:Un,isEdge:Hn,isAndroid:jn,isIOS:zn,isServerRendering:Wn,devtools:$n,nextTick:Bn,get _Set(){return wn},mergeOptions:F,resolveAsset:q,get warn(){return Xn},get formatComponentName(){return Qn},validateProp:U}),si=function(e,t,n,i,r,s,o){this.tag=e,this.data=t,this.children=n,this.text=i,this.elm=r,this.ns=void 0,this.context=s,this.functionalContext=void 0,this.key=t&&t.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1},oi={child:{}};oi.child.get=function(){return this.componentInstance},Object.defineProperties(si.prototype,oi);var ai,ui=function(){var e=new si;return e.text="",e.isComment=!0,e},li={init:K,prepatch:V,insert:J,destroy:Y},ci=Object.keys(li),di=u(function(e){var t="~"===e.charAt(0);e=t?e.slice(1):e;var n="!"===e.charAt(0);return e=n?e.slice(1):e,{name:e,once:t,capture:n}}),fi=1,hi=2,pi=null,mi=[],vi={},_i=!1,gi=!1,yi=0,bi=0,wi=function(e,t,n,i){this.vm=e,e._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++bi,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new wn,this.newDepIds=new wn,this.expression="","function"==typeof t?this.getter=t:(this.getter=w(t),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()};wi.prototype.get=function(){T(this);var e=this.getter.call(this.vm,this.vm);return this.deep&&ke(e),E(),this.cleanupDeps(),e},wi.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},wi.prototype.cleanupDeps=function(){for(var e=this,t=this.deps.length;t--;){var n=e.deps[t];e.newDepIds.has(n.id)||n.removeSub(e)}var i=this.depIds;this.depIds=this.newDepIds,this.newDepIds=i,this.newDepIds.clear(),i=this.deps,this.deps=this.newDeps,this.newDeps=i,this.newDeps.length=0},wi.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():xe(this)},wi.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||f(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(n){if(!Rn.errorHandler)throw n;Rn.errorHandler.call(null,n,this.vm)}else this.cb.call(this.vm,e,t)}}},wi.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},wi.prototype.depend=function(){for(var e=this,t=this.deps.length;t--;)e.deps[t].depend()},wi.prototype.teardown=function(){var e=this;if(this.active){this.vm._isBeingDestroyed||s(this.vm._watchers,this);for(var t=this.deps.length;t--;)e.deps[t].removeSub(e);this.active=!1}};var Si=new wn,Ti={enumerable:!0,configurable:!0,get:m,set:m},Ei=0;He(We),qe(We),we(We),Te(We),me(We);var Ci=[String,RegExp],Ai={name:"keep-alive","abstract":!0,props:{include:Ci,exclude:Ci},created:function(){this.cache=Object.create(null)},destroyed:function(){var e=this;for(var t in this.cache)Je(e.cache[t])},watch:{include:function(e){Ve(this.cache,function(t){return Ke(e,t)})},exclude:function(e){Ve(this.cache,function(t){return!Ke(e,t)})}},render:function(){var e=ce(this.$slots["default"]),t=e&&e.componentOptions;if(t){var n=Ge(t);if(n&&(this.include&&!Ke(this.include,n)||this.exclude&&Ke(this.exclude,n)))return e;var i=null==e.key?t.Ctor.cid+(t.tag?"::"+t.tag:""):e.key;this.cache[i]?e.componentInstance=this.cache[i].componentInstance:this.cache[i]=e,e.data.keepAlive=!0}return e}},xi={KeepAlive:Ai};Ye(We),Object.defineProperty(We.prototype,"$isServer",{get:Wn}),We.version="2.1.10";var ki,Oi,Mi=r("input,textarea,option,select"),Ii=function(e,t,n){return"value"===n&&Mi(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},Pi=r("contenteditable,draggable,spellcheck"),Ri=r("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Li="http://www.w3.org/1999/xlink",Ni=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Di=function(e){return Ni(e)?e.slice(6,e.length):""},Fi=function(e){return null==e||e===!1},qi={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Ui=r("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template"),Hi=r("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),ji=function(e){return Ui(e)||Hi(e)},zi=Object.create(null),Wi=Object.freeze({createElement:at,createElementNS:ut,createTextNode:lt,createComment:ct,insertBefore:dt,removeChild:ft,appendChild:ht,parentNode:pt,nextSibling:mt,tagName:vt,setTextContent:_t,setAttribute:gt}),$i={create:function(e,t){yt(t)},update:function(e,t){e.data.ref!==t.data.ref&&(yt(e,!0),yt(t))},destroy:function(e){yt(e,!0)}},Bi=new si("",{},[]),Qi=["create","activate","update","remove","destroy"],Xi={create:Ct,update:Ct,destroy:function(e){Ct(e,Bi)}},Gi=Object.create(null),Ki=[$i,Xi],Vi={create:Mt,update:Mt},Ji={create:Pt,update:Pt},Yi={create:Nt,update:Nt},Zi={create:Dt,update:Dt},er=u(function(e){var t={},n=/;(?![^(]*\))/g,i=/:(.+)/;return e.split(n).forEach(function(e){if(e){var n=e.split(i);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}),tr=/^--/,nr=/\s*!important$/,ir=function(e,t,n){tr.test(t)?e.style.setProperty(t,n):nr.test(n)?e.style.setProperty(t,n.replace(nr,""),"important"):e.style[sr(t)]=n},rr=["Webkit","Moz","ms"],sr=u(function(e){if(Oi=Oi||document.createElement("div"),e=Cn(e),"filter"!==e&&e in Oi.style)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<rr.length;n++){var i=rr[n]+t;if(i in Oi.style)return i}}),or={create:Wt,update:Wt},ar=Dn&&!Un,ur="transition",lr="animation",cr="transition",dr="transitionend",fr="animation",hr="animationend";ar&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(cr="WebkitTransition",dr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(fr="WebkitAnimation",hr="webkitAnimationEnd"));var pr=Dn&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout,mr=/\b(transform|all)(,|$)/,vr=u(function(e){return{enterClass:e+"-enter",leaveClass:e+"-leave",appearClass:e+"-enter",enterToClass:e+"-enter-to",leaveToClass:e+"-leave-to",appearToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveActiveClass:e+"-leave-active",appearActiveClass:e+"-enter-active"}}),_r=Dn?{create:rn,activate:rn,remove:function(e,t){e.data.show?t():en(e,t)}}:{},gr=[Vi,Ji,Yi,Zi,or,_r],yr=gr.concat(Ki),br=Et({nodeOps:Wi,modules:yr});Un&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&cn(e,"input")});var wr={inserted:function(e,t,n){if("select"===n.tag){var i=function(){sn(e,t,n.context)};i(),(qn||Hn)&&setTimeout(i,0)}else"textarea"!==n.tag&&"text"!==e.type||(e._vModifiers=t.modifiers,t.modifiers.lazy||(jn||(e.addEventListener("compositionstart",un),e.addEventListener("compositionend",ln)),Un&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){sn(e,t,n.context);
var i=e.multiple?t.value.some(function(t){return on(t,e.options)}):t.value!==t.oldValue&&on(t.value,e.options);i&&cn(e,"change")}}},Sr={bind:function(e,t,n){var i=t.value;n=dn(n);var r=n.data&&n.data.transition,s=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;i&&r&&!Un?(n.data.show=!0,Zt(n,function(){e.style.display=s})):e.style.display=i?s:"none"},update:function(e,t,n){var i=t.value,r=t.oldValue;if(i!==r){n=dn(n);var s=n.data&&n.data.transition;s&&!Un?(n.data.show=!0,i?Zt(n,function(){e.style.display=e.__vOriginalDisplay}):en(n,function(){e.style.display="none"})):e.style.display=i?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,i,r){r||(e.style.display=e.__vOriginalDisplay)}},Tr={model:wr,show:Sr},Er={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String},Cr={name:"transition",props:Er,"abstract":!0,render:function(e){var t=this,n=this.$slots["default"];if(n&&(n=n.filter(function(e){return e.tag}),n.length)){var i=this.mode,r=n[0];if(mn(this.$vnode))return r;var s=fn(r);if(!s)return r;if(this._leaving)return pn(e,r);var o="__transition-"+this._uid+"-",u=s.key=null==s.key?o+s.tag:a(s.key)?0===String(s.key).indexOf(o)?s.key:o+s.key:s.key,l=(s.data||(s.data={})).transition=hn(this),c=this._vnode,f=fn(c);if(s.data.directives&&s.data.directives.some(function(e){return"show"===e.name})&&(s.data.show=!0),f&&f.data&&!vn(s,f)){var h=f&&(f.data.transition=d({},l));if("out-in"===i)return this._leaving=!0,re(h,"afterLeave",function(){t._leaving=!1,t.$forceUpdate()},u),pn(e,r);if("in-out"===i){var p,m=function(){p()};re(l,"afterEnter",m,u),re(l,"enterCancelled",m,u),re(h,"delayLeave",function(e){p=e},u)}}return r}}},Ar=d({tag:String,moveClass:String},Er);delete Ar.mode;var xr={props:Ar,render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,r=this.$slots["default"]||[],s=this.children=[],o=hn(this),a=0;a<r.length;a++){var u=r[a];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))s.push(u),n[u.key]=u,(u.data||(u.data={})).transition=o;else;}if(i){for(var l=[],c=[],d=0;d<i.length;d++){var f=i[d];f.data.transition=o,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?l.push(f):c.push(f)}this.kept=e(t,null,l),this.removed=c}return e(t,null,s)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";if(e.length&&this.hasMove(e[0].elm,t)){e.forEach(_n),e.forEach(gn),e.forEach(yn);document.body.offsetHeight;e.forEach(function(e){if(e.data.moved){var n=e.elm,i=n.style;Xt(n,t),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(dr,n._moveCb=function r(e){e&&!/transform$/.test(e.propertyName)||(n.removeEventListener(dr,r),n._moveCb=null,Gt(n,t))})}})}},methods:{hasMove:function(e,t){if(!ar)return!1;if(null!=this._hasMove)return this._hasMove;Xt(e,t);var n=Vt(e);return Gt(e,t),this._hasMove=n.hasTransform}}},kr={Transition:Cr,TransitionGroup:xr};We.config.isUnknownElement=st,We.config.isReservedTag=ji,We.config.getTagNamespace=rt,We.config.mustUseProp=Ii,d(We.options.directives,Tr),d(We.options.components,kr),We.prototype.__patch__=Dn?br:m,We.prototype.$mount=function(e,t){return e=e&&Dn?ot(e):void 0,this._mount(e,t)},setTimeout(function(){Rn.devtools&&$n&&$n.emit("init",We)},0),e.exports=We}).call(t,n(78))},function(e,t,n){/**
 * vuex v2.1.2
 * (c) 2017 Evan You
 * @license MIT
 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e){w&&(e._devtoolHook=w,w.emit("vuex:init",e),w.on("vuex:travel-to-state",function(t){e.replaceState(t)}),e.subscribe(function(e,t){w.emit("vuex:mutation",e,t)}))}function t(e){return Array.isArray(e)?e.map(function(e){return{key:e,val:e}}):Object.keys(e).map(function(t){return{key:t,val:e[t]}})}function n(e){return function(t,n){return"string"!=typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function i(e,t,n){var i=e._modulesNamespaceMap[n];return i||console.error("[vuex] module namespace not found in "+t+"(): "+n),i}function r(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function s(e){return null!==e&&"object"==typeof e}function o(e){return e&&"function"==typeof e.then}function a(e,t){if(!e)throw new Error("[vuex] "+t)}function u(e,t){if(e.update(t),t.modules)for(var n in t.modules){if(!e.getChild(n))return void console.warn("[vuex] trying to add a new module '"+n+"' on hot reloading, manual reload is needed");u(e.getChild(n),t.modules[n])}}function l(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;d(e,n,[],e._modules.root,!0),c(e,n,t)}function c(e,t,n){var i=e._vm;e.getters={};var s=e._wrappedGetters,o={};r(s,function(t,n){o[n]=function(){return t(e)},Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})});var a=M.config.silent;M.config.silent=!0,e._vm=new M({data:{state:t},computed:o}),M.config.silent=a,e.strict&&_(e),i&&(n&&e._withCommit(function(){i.state=null}),M.nextTick(function(){return i.$destroy()}))}function d(e,t,n,i,r){var s=!n.length,o=e._modules.getNamespace(n);if(o&&(e._modulesNamespaceMap[o]=i),!s&&!r){var a=g(t,n.slice(0,-1)),u=n[n.length-1];e._withCommit(function(){M.set(a,u,i.state)})}var l=i.context=f(e,o,n);i.forEachMutation(function(t,n){var i=o+n;p(e,i,t,l)}),i.forEachAction(function(t,n){var i=o+n;m(e,i,t,l)}),i.forEachGetter(function(t,n){var i=o+n;v(e,i,t,l)}),i.forEachChild(function(i,s){d(e,t,n.concat(s),i,r)})}function f(e,t,n){var i=""===t,r={dispatch:i?e.dispatch:function(n,i,r){var s=y(n,i,r),o=s.payload,a=s.options,u=s.type;return a&&a.root||(u=t+u,e._actions[u])?e.dispatch(u,o):void console.error("[vuex] unknown local action type: "+s.type+", global type: "+u)},commit:i?e.commit:function(n,i,r){var s=y(n,i,r),o=s.payload,a=s.options,u=s.type;return a&&a.root||(u=t+u,e._mutations[u])?void e.commit(u,o,a):void console.error("[vuex] unknown local mutation type: "+s.type+", global type: "+u)}};return Object.defineProperties(r,{getters:{get:i?function(){return e.getters}:function(){return h(e,t)}},state:{get:function(){return g(e.state,n)}}}),r}function h(e,t){var n={},i=t.length;return Object.keys(e.getters).forEach(function(r){if(r.slice(0,i)===t){var s=r.slice(i);Object.defineProperty(n,s,{get:function(){return e.getters[r]},enumerable:!0})}}),n}function p(e,t,n,i){var r=e._mutations[t]||(e._mutations[t]=[]);r.push(function(e){n(i.state,e)})}function m(e,t,n,i){var r=e._actions[t]||(e._actions[t]=[]);r.push(function(t,r){var s=n({dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},t,r);return o(s)||(s=Promise.resolve(s)),e._devtoolHook?s["catch"](function(t){throw e._devtoolHook.emit("vuex:error",t),t}):s})}function v(e,t,n,i){return e._wrappedGetters[t]?void console.error("[vuex] duplicate getter key: "+t):void(e._wrappedGetters[t]=function(e){return n(i.state,i.getters,e.state,e.getters)})}function _(e){e._vm.$watch("state",function(){a(e._committing,"Do not mutate vuex store state outside mutation handlers.")},{deep:!0,sync:!0})}function g(e,t){return t.length?t.reduce(function(e,t){return e[t]},e):e}function y(e,t,n){return s(e)&&e.type&&(n=t,t=e,e=e.type),a("string"==typeof e,"Expects string as the type, but found "+typeof e+"."),{type:e,payload:t,options:n}}function b(e){return M?void console.error("[vuex] already installed. Vue.use(Vuex) should be called only once."):(M=e,void S(M))}var w="undefined"!=typeof window&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,S=function(e){function t(){var e=this.$options;e.store?this.$store=e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}var n=Number(e.version.split(".")[0]);if(n>=2){var i=e.config._lifecycleHooks.indexOf("init")>-1;e.mixin(i?{init:t}:{beforeCreate:t})}else{var r=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[t].concat(e.init):t,r.call(this,e)}}},T=n(function(e,n){var r={};return t(n).forEach(function(t){var n=t.key,s=t.val;r[n]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var r=i(this.$store,"mapState",e);if(!r)return;t=r.context.state,n=r.context.getters}return"function"==typeof s?s.call(this,t,n):t[s]}}),r}),E=n(function(e,n){var r={};return t(n).forEach(function(t){var n=t.key,s=t.val;s=e+s,r[n]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(!e||i(this.$store,"mapMutations",e))return this.$store.commit.apply(this.$store,[s].concat(t))}}),r}),C=n(function(e,n){var r={};return t(n).forEach(function(t){var n=t.key,s=t.val;s=e+s,r[n]=function(){if(!e||i(this.$store,"mapGetters",e))return s in this.$store.getters?this.$store.getters[s]:void console.error("[vuex] unknown getter: "+s)}}),r}),A=n(function(e,n){var r={};return t(n).forEach(function(t){var n=t.key,s=t.val;s=e+s,r[n]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(!e||i(this.$store,"mapActions",e))return this.$store.dispatch.apply(this.$store,[s].concat(t))}}),r}),x=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e},k={state:{},namespaced:{}};k.state.get=function(){return this._rawModule.state||{}},k.namespaced.get=function(){return!!this._rawModule.namespaced},x.prototype.addChild=function(e,t){this._children[e]=t},x.prototype.removeChild=function(e){delete this._children[e]},x.prototype.getChild=function(e){return this._children[e]},x.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},x.prototype.forEachChild=function(e){r(this._children,e)},x.prototype.forEachGetter=function(e){this._rawModule.getters&&r(this._rawModule.getters,e)},x.prototype.forEachAction=function(e){this._rawModule.actions&&r(this._rawModule.actions,e)},x.prototype.forEachMutation=function(e){this._rawModule.mutations&&r(this._rawModule.mutations,e)},Object.defineProperties(x.prototype,k);var O=function(e){var t=this;this.root=new x(e,(!1)),e.modules&&r(e.modules,function(e,n){t.register([n],e,!1)})};O.prototype.get=function(e){return e.reduce(function(e,t){return e.getChild(t)},this.root)},O.prototype.getNamespace=function(e){var t=this.root;return e.reduce(function(e,n){return t=t.getChild(n),e+(t.namespaced?n+"/":"")},"")},O.prototype.update=function(e){u(this.root,e)},O.prototype.register=function(e,t,n){var i=this;void 0===n&&(n=!0);var s=this.get(e.slice(0,-1)),o=new x(t,n);s.addChild(e[e.length-1],o),t.modules&&r(t.modules,function(t,r){i.register(e.concat(r),t,n)})},O.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];t.getChild(n).runtime&&t.removeChild(n)};var M,I=function(t){var n=this;void 0===t&&(t={}),a(M,"must call Vue.use(Vuex) before creating a store instance."),a("undefined"!=typeof Promise,"vuex requires a Promise polyfill in this browser.");var i=t.state;void 0===i&&(i={});var r=t.plugins;void 0===r&&(r=[]);var s=t.strict;void 0===s&&(s=!1),this._committing=!1,this._actions=Object.create(null),this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new O(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new M;var o=this,u=this,l=u.dispatch,f=u.commit;this.dispatch=function(e,t){return l.call(o,e,t)},this.commit=function(e,t,n){return f.call(o,e,t,n)},this.strict=s,d(this,i,[],this._modules.root),c(this,i),r.concat(e).forEach(function(e){return e(n)})},P={state:{}};P.state.get=function(){return this._vm.$data.state},P.state.set=function(e){a(!1,"Use store.replaceState() to explicit replace store state.")},I.prototype.commit=function(e,t,n){var i=this,r=y(e,t,n),s=r.type,o=r.payload,a=r.options,u={type:s,payload:o},l=this._mutations[s];return l?(this._withCommit(function(){l.forEach(function(e){e(o)})}),this._subscribers.forEach(function(e){return e(u,i.state)}),void(a&&a.silent&&console.warn("[vuex] mutation type: "+s+". Silent option has been removed. Use the filter functionality in the vue-devtools"))):void console.error("[vuex] unknown mutation type: "+s)},I.prototype.dispatch=function(e,t){var n=y(e,t),i=n.type,r=n.payload,s=this._actions[i];return s?s.length>1?Promise.all(s.map(function(e){return e(r)})):s[0](r):void console.error("[vuex] unknown action type: "+i)},I.prototype.subscribe=function(e){var t=this._subscribers;return t.indexOf(e)<0&&t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}},I.prototype.watch=function(e,t,n){var i=this;return a("function"==typeof e,"store.watch only accepts a function."),this._watcherVM.$watch(function(){return e(i.state,i.getters)},t,n)},I.prototype.replaceState=function(e){var t=this;this._withCommit(function(){t._vm.state=e})},I.prototype.registerModule=function(e,t){"string"==typeof e&&(e=[e]),a(Array.isArray(e),"module path must be a string or an Array."),this._modules.register(e,t),d(this,this.state,e,this._modules.get(e)),c(this,this.state)},I.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),a(Array.isArray(e),"module path must be a string or an Array."),this._modules.unregister(e),this._withCommit(function(){var n=g(t.state,e.slice(0,-1));M["delete"](n,e[e.length-1])}),l(this)},I.prototype.hotUpdate=function(e){this._modules.update(e),l(this,!0)},I.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(I.prototype,P),"undefined"!=typeof window&&window.Vue&&b(window.Vue);var R={Store:I,install:b,version:"2.1.2",mapState:T,mapMutations:E,mapGetters:C,mapActions:A};return R})},,,,function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(i){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=i(o),u=function(){function e(){(0,s["default"])(this,e)}return(0,a["default"])(e,null,[{key:"getTime",value:function(){var t=new Date;return e.padZero(t.getHours())+":"+e.padZero(t.getMinutes())}},{key:"formatTime",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;return 12===parseInt(n,10)?e.formatTimeAmPm(t):e.formatTimeHHMM(t)}},{key:"formatTimeHHMM",value:function(t){return e.padZero(t.getHours())+":"+e.padZero(t.getMinutes())}},{key:"formatTimeAmPm",value:function(e){var t=e.getHours(),n=e.getMinutes(),i=t>=12?"pm":"am";return t%=12,t=t?t:12,n=n<10?"0"+n:n,t+":"+n+" "+i}},{key:"padZero",value:function(e){return e=parseInt(e,0),e>-10&&e<0?"-0"+e*-1:e<10&&e>=0?"0"+e:e}},{key:"getInternetExplorerVersion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e;if("Microsoft Internet Explorer"===navigator.appName){var n=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})");null!==n.exec(navigator.userAgent)&&(t=parseFloat(RegExp.$1))}else if("Netscape"===navigator.appName){var i=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})");null!==i.exec(navigator.userAgent)&&(t=parseFloat(RegExp.$1))}return t}},{key:"parseQuery",value:function(e){for(var t={},n=("?"===e[0]?e.substr(1):e).split("&"),i=0;i<n.length;i++){var r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}return t}},{key:"matchRulePatern",value:function(e,t){var n=function(e){return e.replace(/([.*+?^=!:${}()|\\[\\]\/\\])/g,"\\$1")};return new RegExp("^"+t.split("*").map(n).join(".*")+"$").test(e)}},{key:"matchOneHostPatern",value:function(t,n){for(var i=t.replace("http://","").replace("https://","").split(/[\/?#]/)[0],r=0;r<n.length;r++)if(e.matchRulePatern(i,n[r]))return!0;return!1}}]),e}();t["default"]=u},function(e,t,n){e.exports={"default":n(225),__esModule:!0}},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(15),r=n(9).document,s=i(r)&&i(r.createElement);e.exports=function(e){return s?r.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(47);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t,n){"use strict";var i=n(49),r=n(6),s=n(141),o=n(25),a=n(30),u=n(245),l=n(52),c=n(136),d=n(10)("iterator"),f=!([].keys&&"next"in[].keys()),h="@@iterator",p="keys",m="values",v=function(){return this};e.exports=function(e,t,n,_,g,y,b){u(n,t,_);var w,S,T,E=function(e){if(!f&&e in k)return k[e];switch(e){case p:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},C=t+" Iterator",A=g==m,x=!1,k=e.prototype,O=k[d]||k[h]||g&&k[g],M=O||E(g),I=g?A?E("entries"):M:void 0,P="Array"==t?k.entries||O:O;if(P&&(T=c(P.call(new e)),T!==Object.prototype&&T.next&&(l(T,C,!0),i||"function"==typeof T[d]||o(T,d,v))),A&&O&&O.name!==m&&(x=!0,M=function(){return O.call(this)}),i&&!b||!f&&!x&&k[d]||o(k,d,M),a[t]=M,a[C]=v,g)if(w={values:A?M:E(m),keys:y?M:E(p),entries:I},b)for(S in w)S in k||s(k,S,w[S]);else r(r.P+r.F*(f||x),t,w);return w}},function(e,t,n){var i=n(70)("meta"),r=n(15),s=n(28),o=n(16).f,a=0,u=Object.isExtensible||function(){return!0},l=!n(24)(function(){return u(Object.preventExtensions({}))}),c=function(e){o(e,i,{value:{i:"O"+ ++a,w:{}}})},d=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,i)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[i].i},f=function(e,t){if(!s(e,i)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[i].w},h=function(e){return l&&p.NEED&&u(e)&&!s(e,i)&&c(e),e},p=e.exports={KEY:i,NEED:!1,fastKey:d,getWeak:f,onFreeze:h}},function(e,t,n){"use strict";function i(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=r(t),this.reject=r(n)}var r=n(46);e.exports.f=function(e){return new i(e)}},function(e,t,n){var i=n(50),r=n(51),s=n(26),o=n(95),a=n(28),u=n(129),l=Object.getOwnPropertyDescriptor;t.f=n(18)?l:function(e,t){if(e=s(e),t=o(t,!0),u)try{return l(e,t)}catch(n){}if(a(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(6),r=n(3),s=n(24);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],o={};o[e]=t(n),i(i.S+i.F*s(function(){n(1)}),"Object",o)}},function(e,t,n){var i=n(25);e.exports=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:i(e,r,t[r]);return e}},function(e,t,n){var i=n(93)("keys"),r=n(70);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t,n){var i=n(3),r=n(9),s="__core-js_shared__",o=r[s]||(r[s]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(49)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(15);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(9),r=n(3),s=n(49),o=n(97),a=n(16).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=s?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:o.f(e)})}},function(e,t,n){t.f=n(10)},function(e,t,n){var i=n(66),r=n(10)("iterator"),s=n(30);e.exports=n(3).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||s[i(e)]}},function(e,t){},,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(12),o=r(s),a=n(27),u=i(a);t["default"]={get:function(){var e={settings:{},config:{},list:{},request:{id:null,categoryId:null,country:null,marketId:null,replyLang:null,liveTriggerId:null,source:"chat_embed",customerType:"",rqTime:0,timeDiffServer:0,priority:0,rqStartAt:0,rqTakeAt:0,faqId:null},profileTmp:{id:null,title:"",firstName:"",lastName:"",email:"",legalTerms:!1},xmppSession:{jid:null,node:null,bareJid:null,resource:null,chatState:null,operatorXid:null,operatorNick:null,operatorAvatar:null,customersInQueue:null,operatorsInQueue:null},profile:{id:null,title:"",firstName:"",lastName:"",email:"",legalTerms:!1,nessClubId:null},profileError:null,rating:{delay:"",quality:"",satisfaction:"",comment:""},messages:[],message:"",firstMessage:"",disconnected:!1,messagesUnread:0,isTyping:!1,vueWait:!1,vueMessage:!0,vueProfile:!1,vueRating:!1,vueSendTranscript:!1,vueUpload:!1,vueRegister:!1,display:u.DISPLAY_COLLAPSE,close:!1,transcriptSent:!1,hide:!1,workflow:u.WORKFLOW_NOT_STARTED,waitingQueueSize:null,apiError:!1};return(0,o["default"])({},e)}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=i(o),u=function(){function e(){(0,s["default"])(this,e)}return(0,a["default"])(e,null,[{key:"convertToRelativeUrl",value:function(e){return String(e).replace(/^(?:\/\/|[^\/]+)*/,"")||"/"}},{key:"_matchURI",value:function(e){return String(e).match(/^((https?):\/\/(([^@]*)@|)(([^:\/?#]*)(?::([0-9]+))?)|)(\/[^?#]*)?(\?([^#]*)|)(#(.*)|)$/)||null}},{key:"getSchemeDefaultPort",value:function(e){switch(e){case"http":return 80;case"https":return 443;default:return""}}},{key:"parseURI",value:function(t){var n=e._matchURI(t);return n&&{scheme:n[2]||"",userinfo:n[4]||"",host:n[6]||"",port:parseInt(n[7],10)||e.getSchemeDefaultPort(n[2])||"",path:n[8]||(n[6]?"/":""),query:n[10]||"",fragment:n[12]||""}}},{key:"parseURIBase",value:function(t){var n=e._matchURI(t);return n&&{host:n[6]||"",path:n[8]||(n[6]?"/":""),query:n[10]||"",fragment:n[12]||""}}},{key:"concatUrlItem",value:function(e){var t=e.path;return t+=e.query?"?"+e.query+"}":""}}]),e}();t["default"]=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=i(o),u=function(){function e(){(0,s["default"])(this,e),this.data={}}return(0,a["default"])(e,[{key:"sleep",value:function(){return this.data}},{key:"wakeUp",value:function(e){this.data=e}},{key:"callValue",value:function(e){this.data[e]=arguments.length<=1?void 0:arguments[1]}},{key:"getValue",value:function(e){return"undefined"!=typeof this.data[e]?this.data[e]:null}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(e){this.data=e}}]),e}();t["default"]=u},function(e,t,n){e.exports={"default":n(216),__esModule:!0}},function(e,t,n){e.exports={"default":n(222),__esModule:!0}},function(e,t,n){e.exports={"default":n(228),__esModule:!0}},function(e,t,n){e.exports={"default":n(229),__esModule:!0}},function(e,t,n){e.exports={"default":n(230),__esModule:!0}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(80),s=i(r),o=n(210),a=i(o);t["default"]=function u(e,t,n){null===e&&(e=Function.prototype);var i=(0,a["default"])(e,t);if(void 0===i){var r=(0,s["default"])(e);return null===r?void 0:u(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(211),s=i(r),o=n(208),a=i(o),u=n(45),l=i(u);t["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,l["default"])(t)));e.prototype=(0,a["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s["default"]?(0,s["default"])(e,t):e.__proto__=t)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(45),s=i(r);t["default"]=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":(0,s["default"])(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(205),s=i(r),o=n(118),a=i(o);t["default"]=function(){function e(e,t){var n=[],i=!0,r=!1,s=void 0;try{for(var o,u=(0,a["default"])(e);!(i=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(l){r=!0,s=l}finally{try{!i&&u["return"]&&u["return"]()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,s["default"])(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(204),s=i(r);t["default"]=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,s["default"])(e)}},function(e,t,n){var i=n(9).document;e.exports=i&&i.documentElement},function(e,t,n){e.exports=!n(18)&&!n(24)(function(){return 7!=Object.defineProperty(n(82)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(30),r=n(10)("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[r]===e)}},function(e,t,n){var i=n(47);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(17);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(s){var o=e["return"];throw void 0!==o&&i(o.call(e)),s}}},function(e,t,n){var i=n(10)("iterator"),r=!1;try{var s=[7][i]();s["return"]=function(){r=!0},Array.from(s,function(){throw 2})}catch(o){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var s=[7],o=s[i]();o.next=function(){return{done:n=!0}},s[i]=function(){return o},e(s)}catch(a){}return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var i=n(137),r=n(83).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(28),r=n(32),s=n(92)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,n){var i=n(28),r=n(26),s=n(235)(!1),o=n(92)("IE_PROTO");e.exports=function(e,t){var n,a=r(e),u=0,l=[];for(n in a)n!=o&&i(a,n)&&l.push(n);for(;t.length>u;)i(a,n=t[u++])&&(~s(l,n)||l.push(n));return l}},function(e,t,n){var i=n(31),r=n(26),s=n(50).f;e.exports=function(e){return function(t){for(var n,o=r(t),a=i(o),u=a.length,l=0,c=[];u>l;)s.call(o,n=a[l++])&&c.push(e?[n,o[n]]:o[n]);return c}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,n){var i=n(17),r=n(15),s=n(87);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=s.f(e),o=n.resolve;return o(t),n.promise}},function(e,t,n){e.exports=n(25)},function(e,t,n){"use strict";var i=n(9),r=n(3),s=n(16),o=n(18),a=n(10)("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:i[e];o&&t&&!t[a]&&s.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var i=n(17),r=n(46),s=n(10)("species");e.exports=function(e,t){var n,o=i(e).constructor;return void 0===o||void 0==(n=i(o)[s])?t:r(n)}},function(e,t,n){var i,r,s,o=n(21),a=n(244),u=n(128),l=n(82),c=n(9),d=c.process,f=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,m=c.Dispatch,v=0,_={},g="onreadystatechange",y=function(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},b=function(e){y.call(e.data)};f&&h||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return _[++v]=function(){a("function"==typeof e?e:Function(e),t)},i(v),v},h=function(e){delete _[e]},"process"==n(47)(d)?i=function(e){d.nextTick(o(y,e,1))}:m&&m.now?i=function(e){m.now(o(y,e,1))}:p?(r=new p,s=r.port2,r.port1.onmessage=b,i=o(s.postMessage,s,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):i=g in l("script")?function(e){u.appendChild(l("script"))[g]=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(o(y,e,1),0)}),e.exports={set:f,clear:h}},function(e,t,n){var i=n(15);e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(174),s=i(r),o=n(309),a=i(o),u=n(181),l=i(u),c=n(177),d=i(c),f=n(183),h=i(f),p=n(175),m=i(p),v=n(176),_=i(v),g=n(23),y=n(43),b=i(y),w=new a["default"];g.communicator.init(b["default"],w),g.communicator.loadCss();var S=new l["default"],T=new d["default"](b["default"],S),E=new m["default"](b["default"]),C=new _["default"];T.setStorage({chatRequest:E,gui:C});var A=new h["default"](window,T,w,g.datalayer);g.communicator.setTestMode(A.isEnabled),new s["default"](b["default"],T,w,window)},,,,,,,,,,,,,,,,function(e,t,n){var i,r,s;/*!
	Autosize 3.0.21
	license: MIT
	http://www.jacklmoore.com/autosize
*/
!function(n,o){r=[t,e],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(this,function(e,t){"use strict";function n(e){function t(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),u="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(u)&&(u=0),a()}function n(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function i(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function r(){var t=e.style.height,n=i(e),r=document.documentElement&&document.documentElement.scrollTop;e.style.height="auto";var s=e.scrollHeight+u;return 0===e.scrollHeight?void(e.style.height=t):(e.style.height=s+"px",l=e.clientWidth,n.forEach(function(e){e.node.scrollTop=e.scrollTop}),void(r&&(document.documentElement.scrollTop=r)))}function a(){r();var t=Math.round(parseFloat(e.style.height)),i=window.getComputedStyle(e,null),s="content-box"===i.boxSizing?Math.round(parseFloat(i.height)):e.offsetHeight;if(s!==t?"hidden"===i.overflowY&&(n("scroll"),r(),s="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==i.overflowY&&(n("hidden"),r(),s="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),c!==s){c=s;var a=o("autosize:resized");try{e.dispatchEvent(a)}catch(u){}}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!s.has(e)){var u=null,l=e.clientWidth,c=null,d=function(){e.clientWidth!==l&&a()},f=function(t){window.removeEventListener("resize",d,!1),e.removeEventListener("input",a,!1),e.removeEventListener("keyup",a,!1),e.removeEventListener("autosize:destroy",f,!1),e.removeEventListener("autosize:update",a,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),s["delete"](e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",f,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",a,!1),window.addEventListener("resize",d,!1),e.addEventListener("input",a,!1),e.addEventListener("autosize:update",a,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",s.set(e,{destroy:f,update:a}),t()}}function i(e){var t=s.get(e);t&&t.destroy()}function r(e){var t=s.get(e);t&&t.update()}var s="function"==typeof Map?new Map:function(){var e=[],t=[];return{has:function(t){return e.indexOf(t)>-1},get:function(n){return t[e.indexOf(n)]},set:function(n,i){e.indexOf(n)===-1&&(e.push(n),t.push(i))},"delete":function(n){var i=e.indexOf(n);i>-1&&(e.splice(i,1),t.splice(i,1))}}}(),o=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(a){o=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var u=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(u=function(e){return e},u.destroy=function(e){return e},u.update=function(e){return e}):(u=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e,t)}),e},u.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},u.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e}),t.exports=u})},function(e,t,n){var i,r,s;!function(n,o,a){r=[],i=a,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(this,"b64toBlob",function(){"use strict";return function(e,t,n){t=t||"",n=n||512;for(var i=atob(e),r=[],s=0;s<i.length;s+=n){for(var o=i.slice(s,s+n),a=new Array(o.length),u=0;u<o.length;u++)a[u]=o.charCodeAt(u);var l=new Uint8Array(a);r.push(l)}var c=new Blob(r,{type:t});return c}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),s=i(r),o=n(65),a=i(o),u=n(1),l=i(u),c=n(2),d=i(c),f=n(312),h=i(f),p=n(42),m=i(p),v=n(5),_=i(v),g=function(){function e(){(0,l["default"])(this,e),this.market=null,this.language=null,this.channel=null,this.testMode=0,this.isIE9=window.XMLHttpRequest&&window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)}return(0,d["default"])(e,[{key:"init",value:function(e,t){this.config=e,this.dispatcher=t,this.baseUrl=e.url.api}},{key:"setTestMode",value:function(e){this.testMode=e?1:0}},{key:"getDispatcher",value:function(){return this.dispatcher}},{key:"setContextParams",value:function(e,t,n){this.market=e,this.language=t,this.channel=n}},{key:"retrieveRules",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n||(n=function(e){t.dispatcher.emit("livechat.loading.error",e)});var i={market:this.market,language:this.language,channel:this.channel},r=this.baseUrl+"/api/livechat/";this.testMode&&(i.t=Date.now(),i.testmode=this.testMode),this.dispatcher.emit("livechat.loading",r,i),(0,h["default"])({url:r,type:"json",method:"get",data:i,contentType:"application/json",crossOrigin:!0,error:function(e){n(e)},success:function(t){e(t)}})}},{key:"sendAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=this.baseUrl+"/api/livechat/"+t;s||(s=function(e,t){});var u=this._addMarketInfoToObject(n);u.country=this.market,u.requestId=e,this.dispatcher.emit("livechat.send-action",t);var l=(0,a["default"])(u);(0,h["default"])({url:o,type:"json",method:"post",withCredentials:!0,data:l,contentType:"application/json",crossOrigin:!0,error:function(e){s(e),i.dispatcher.emit("livechat.send-action.error",e),i.sendErrorToServer("rest:action:"+t,{error:i._formatXhrError(e),jsonData:l})},success:function(e){r(e)}})}},{key:"start",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.baseUrl+"/api/livechat/start";i||(i=function(e,t){}),e=this._addMarketInfoToObject(e),e.country=this.market,e.lang=this.language,this.dispatcher.emit("livechat.start",e);var s=(0,a["default"])(e);(0,h["default"])({url:r,type:"json",method:"post",withCredentials:!0,data:s,contentType:"application/json",crossOrigin:!0,error:function(e){i(e),n.dispatcher.emit("livechat.start.error",e),n.sendErrorToServer("rest:start",{error:n._formatXhrError(e),jsonData:s})},success:function(e){t(e)}})}},{key:"_addMarketInfoToObject",value:function(e){var t=void 0;return t=e?(0,s["default"])({},e):{},t.market=this.market,t.language=this.language,t.channel=this.channel,t.srjid=_["default"].state.xmppSession.jid,t}},{key:"registerJid",value:function(e,t){var n=this,i=this.baseUrl+"/api/livechat/register",r=(0,a["default"])(this._addMarketInfoToObject({jid:e,rid:t}));(0,h["default"])({url:i,method:"post",type:"json",contentType:"application/json",withCredentials:!0,data:r,crossOrigin:!0,error:function(e){n.dispatcher.emit("livechat.registerJid.error",e),n.sendErrorToServer("rest:register",{error:n._formatXhrError(e),jsonData:r})},success:function(){}})}},{key:"sendErrorToServer",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.config&&this.config.apiSettings.sendError){var r=function(){try{n.description=e,n.url="livechat",n.line=0,n.parent_url=window.location.href,n.user_agent=window.navigator.userAgent,n.jid=_["default"].state.xmppSession.jid,n.request_id=_["default"].state.request.id,n.market=t.market,n.language=t.language,n.channel=t.channel;var i=0,r=5,s=5e3,o={url:t.baseUrl+"/api/livechat/js-chat-err-log",method:"post",contentType:"application/x-www-form-urlencoded",withCredentials:!0,data:n,crossOrigin:!0,success:function(){}};o.error=function(){i<r&&(i++,window.setTimeout(function(){try{i<=r&&(o.data.retry=i,(0,h["default"])(o))}catch(e){}},s))},(0,h["default"])(o)}catch(a){}};i?r():window.setTimeout(r,1)}}},{key:"loadCss",value:function(){m["default"].loadCss(this.baseUrl+"/apps.php?a=calleo-livechat.css")}},{key:"_formatXhrError",value:function(e){var t=e.status+" "+e.statusText;try{var n=JSON.parse(e.response);t+=": "+n.error_description}catch(i){}return t}}]),e}();t["default"]=g},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),o=r(s),a=n(2),u=r(a),l=n(73),c=r(l),d=n(5),f=r(d),h=n(317),p=r(h),m=n(23),v=n(115),_=r(v),g=n(27),y=i(g),b=function(){function e(){(0,o["default"])(this,e)}return(0,u["default"])(e,[{key:"init",value:function(e,t){this.data=t,this.isEnableNewChat=!0;var n=document.createElement("div");n.id="root-nespresso-livechat",document.body.insertBefore(n,document.body.childNodes[0]),c["default"].config.debug=!1,c["default"].use(m.translator),e&&e.messages?(e.workflow===y.WORKFLOW_DISABLED&&(e.workflow=y.WORKFLOW_NOT_STARTED,e.display=y.DISPLAY_COLLAPSE),f["default"].replaceState(e),this.updateData(),f["default"].dispatch("restoreChat")):(this.updateData(),f["default"].dispatch("updateProfileFromDatalayer")),f["default"].dispatch("show"),new c["default"]({el:"#root-nespresso-livechat",store:f["default"],render:function(e){return e(p["default"])}})}},{key:"startQueue",value:function(e){e&&f["default"].dispatch("updateRequestData",e),f["default"].dispatch("openChat")}},{key:"hide",value:function(){f["default"].dispatch("hide")}},{key:"disable",value:function(){f["default"].dispatch("disable")}},{key:"restoreDefaultState",value:function(){f["default"].replaceState(_["default"].get()),this.updateData(),f["default"].dispatch("updateProfileFromDatalayer"),this.data.settings.enabled_reactive||this.hide()}},{key:"getIsEnableNewChat",value:function(){return this.isEnableNewChat}},{key:"setIsEnableNewChat",value:function(e){this.isEnableNewChat=e}},{key:"updateData",value:function(){f["default"].dispatch("updateList",this.data.list),f["default"].dispatch("updateConfig",this.data.config),f["default"].dispatch("updateSettings",this.data.settings)}},{key:"isChatNotStarted",value:function(){switch(f["default"].state.workflow){case y.WORKFLOW_DISABLED:case y.WORKFLOW_NOT_STARTED:case y.WORKFLOW_COMPLETE_PROFILE_BEFORE_TO_START:return!0;default:return!1}}},{key:"isChatDisabled",value:function(){return f["default"].state.workflow===y.WORKFLOW_DISABLED}},{key:"isChatInProgress",value:function(){switch(f["default"].state.workflow){case y.WORKFLOW_CHAT:case y.WORKFLOW_RATING:case y.WORKFLOW_TRANSCRIPT:case y.WORKFLOW_TRANSCRIPT_SENT:return!0;default:return!1}}},{key:"isChatInQueue",value:function(){return f["default"].state.workflow===y.WORKFLOW_QUEUE}}]),e}();t["default"]=b},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.queueWaitingSize=t.updateProfileFromDatalayer=t.showTranscript=t.showRating=t.showMessage=t.showWait=t.showRegister=t.showProfile=t.updateSettings=t.updateConfig=t.updateList=t.apiErrorFinish=t.apiError=t.apiSuccess=t.start=t.show=t.disable=t.hide=t.expandChat=t.goInQueue=t.openChat=t.downloadAttachment=t.sendTranscript=t.sendRating=t.closeChat=t.cancelRequest=t.updateRequestData=t.updateXmppSession=t.updateProfile=t.reconnected=t.disconnected=t.restoreChat=t.chatTransfered=t.sendChatState=t.stopTyping=t.startTyping=t.receiveReceipt=t.receiveMessage=t.sendAttachment=t.sendMessage=void 0;var s=n(12),o=r(s),a=n(44),u=r(a),l=n(120),c=r(l),d=n(209),f=r(d),h=n(206),p=r(h),m=n(41),v=i(m),_=n(27),g=i(_),y=n(23),b=n(168),w=r(b),S=n(310),T=r(S),E=function(e,t){if("profile_form_incorrect"===e.error){var n=[],i=new p["default"]((0,f["default"])(e.error_details));return i.forEach(function(e,t){if(e){var i=(0,c["default"])(e);i.length&&n.push({field:t,error:i[0]})}}),n.length&&t(v.UPDATE_PROFILE_ERROR,n),!0}return!1};t.sendMessage=function(e,t){var n=e.commit,i=e.state,r=""+t,s=y.calleoChat.sendMessage(t);n(v.SEND_MESSAGE,{message:r,id:s}),i.workflow===g.WORKFLOW_NOT_STARTED&&n(v.UPDATE_FIRST_MESSAGE,r),y.communicator.dispatcher.emit("store.message-sent")},t.sendAttachment=function(e,t){var n=e.commit,i=(e.state,t.name),r=t.location,s=y.calleoChat.sendAttachment(i,r);n(v.SEND_ATTACHMENT,{payload:t,id:s}),y.communicator.dispatcher.emit("store.message-sent")},t.receiveMessage=function(e,t){var n=e.commit,i=e.dispatch,r=e.state;r.workflow===g.WORKFLOW_QUEUE&&(n(v.RESET_MESSAGES),n(v.UPDATE_REQUEST_DATA,{rqTakeAt:(new Date).getTime()})),n(v.RECEIVE_MESSAGE,t),r.workflow===g.WORKFLOW_QUEUE&&(r.firstMessage&&i("sendMessage",r.firstMessage),y.communicator.dispatcher.emit("start",r.request.id,r.request.liveTriggerId,r.request.source),n(v.UPDATE_WORKFLOW,g.WORKFLOW_CHAT),y.calleoChat.sendChatState("active"),y.calleoChat.sendDatalayer(),i("showMessage")),(!t.rel||"welcome"!==t.rel&&"register"!==t.rel)&&y.notificationManager.messageReceived(t),y.communicator.dispatcher.emit("store.message-received")},t.receiveReceipt=function(e,t){var n=e.commit;n(v.MARK_HAS_RECEIPT,t.getAttribute("id")),y.communicator.dispatcher.emit("store.message-receipt-received")},t.startTyping=function(e,t){var n=e.commit;n(v.START_TYPING,t)},t.stopTyping=function(e){var t=e.commit;t(v.STOP_TYPING)},t.sendChatState=function(e,t){e.commit;y.notificationManager.setChatState(t),y.calleoChat.sendChatState(t)},t.chatTransfered=function(e,t){var n=e.dispatch;n("receiveMessage",{message:y.translator.get("livechat.chat_transferred_to")+" <strong>"+t.name+"</strong>",operator:{},read:!0,rel:"system"})},t.restoreChat=function(e){var t=e.state,n=e.dispatch;t.workflow!==g.WORKFLOW_QUEUE&&t.workflow!==g.WORKFLOW_CHAT||(t.xmppSession.jid?y.calleoChat.restoreChat(t):y.calleoChat.startChat(t)),t.workflow!==g.WORKFLOW_NOT_STARTED&&y.notificationManager.requestPermission(),n("apiErrorFinish")},t.disconnected=function(e){var t=e.commit;t(v.DISCONNECTED)},t.reconnected=function(e){var t=e.commit;window.setTimeout(function(){y.calleoChat.sendDatalayer()},2e3),t(v.RECONNECTED)},t.updateProfile=function(e){var t=e.commit,n=e.state,i=e.dispatch;if(n.workflow!==g.WORKFLOW_TRANSCRIPT_SENT)return t(v.UPDATE_PROFILE),n.workflow===g.WORKFLOW_NOT_STARTED||n.workflow===g.WORKFLOW_COMPLETE_PROFILE_BEFORE_TO_START?(i("showWait"),void i("start")):void y.communicator.sendAction(n.request.id,"update-profile",n.profile,function(e){t(v.UPDATE_PROFILE_ERROR,null),t(v.UPDATE_PROFILE_ID,e.profile_id),t(v.REVERT_PROFILE_TMP),y.calleoChat.updateProfile(),n.workflow!==g.WORKFLOW_DISABLED&&(n.workflow===g.WORKFLOW_NOT_STARTED||n.workflow===g.WORKFLOW_QUEUE?i("goInQueue"):n.workflow===g.WORKFLOW_COMPLETE_PROFILE_BEFORE_TO_START?i("goInQueue"):n.workflow===g.WORKFLOW_CHAT?i("showMessage"):n.workflow===g.WORKFLOW_RATING?i("showRating"):n.workflow===g.WORKFLOW_TRANSCRIPT&&(i("sendTranscript"),i("showTranscript"),y.communicator.dispatcher.emit("transcript-sent-from-anonymous",n.request.id,n.request.liveTriggerId,n.request.source)))},function(e){try{var n=JSON.parse(e.response);if(i("showProfile"),E(n,t))return;i("apiError",e.response)}catch(r){i("apiError",r)}})},t.updateXmppSession=function(e,t){var n=e.commit;n(v.UPDATE_XMPP_SESSION,t)},t.updateRequestData=function(e,t){var n=e.commit;n(v.UPDATE_REQUEST_DATA,t)},t.cancelRequest=function(e,t){var n=e.state,i=e.commit,r=e.dispatch,s=(0,u["default"])(n.xmppSession.operatorsInQueue||{}).length;y.calleoChat.finishChat(),i(v.UPDATE_DISPLAY,g.DISPLAY_COLLAPSE),i(v.UPDATE_WORKFLOW,g.WORKFLOW_NOT_STARTED),n.request.id&&!n.close&&(y.communicator.dispatcher.emit("cancel",n.request.id,n.request.liveTriggerId,n.request.source),y.communicator.sendAction(n.request.id,"end",(0,o["default"])({},t,{profileId:n.profile.id,jsAction:"cancel",lastMessage:n.messages.slice(-10),nbOperatorsInQueue:s}),function(){},function(){})),i(v.END_CHAT),y.guiManager.restoreDefaultState(),y.guiManager.getIsEnableNewChat()||(r("disable"),r("hide"))},t.closeChat=function(e,t){var n=e.commit,i=e.state,r=e.dispatch,s=(0,u["default"])(i.xmppSession.operatorsInQueue||{}).length;n(v.MARK_HAS_READ),n(v.UPDATE_WORKFLOW,g.WORKFLOW_RATING),r("showRating"),y.communicator.dispatcher.emit("end",i.request.id,i.request.liveTriggerId,i.request.source),y.communicator.sendAction(i.request.id,"end",(0,o["default"])({},t,{profileId:i.profile.id,jsAction:"close",lastMessage:i.messages.slice(-10),nbOperatorsInQueue:s}),function(){},function(){}),n(v.END_CHAT),y.calleoChat.finishChat()},t.sendRating=function(e){var t=e.state;y.communicator.dispatcher.emit("rating",t.request.id,t.request.liveTriggerId,(0,o["default"])({},t.rating),t.request.source),y.communicator.sendAction(t.request.id,"rating",{rating:t.rating},function(){},function(){})},t.sendTranscript=function(e){var t=e.state,n=e.commit;y.communicator.sendAction(t.request.id,"send-transcript",null,function(e){return n(v.UPDATE_TRANSCRIPT,e)},function(){}),y.communicator.dispatcher.emit("transcript-sent",t.request.id,t.request.liveTriggerId,t.request.source),n(v.UPDATE_WORKFLOW,g.WORKFLOW_TRANSCRIPT_SENT)},t.downloadAttachment=function(e,t){var n=e.state;y.communicator.sendAction(n.request.id,"download-attachment",{attachment:t.location},function(e){e.data&&e.type&&(0,T["default"])((0,w["default"])(e.data,e.type),t.name)},function(){}),y.communicator.dispatcher.emit("download-attachment",n.request.id,t)},t.openChat=function(e){var t=e.dispatch;t("show"),t("expandChat")},t.goInQueue=function(e){var t=e.dispatch;t("showWait"),t("start")},t.expandChat=function(e){var t=e.state,n=e.commit,i=e.dispatch;t.workflow===g.WORKFLOW_NOT_STARTED&&(y.datalayer.load(),i("updateProfileFromDatalayer"),0===t.messages.length&&(t.settings.allow_anonymous||y.datalayer.isLoggedIn&&y.datalayer.email&&y.datalayer.firstName&&y.datalayer.lastName?t.settings.only_on_response?i("receiveMessage",{message:y.translator.get("livechat.welcome_default"),operator:{},read:!0,rel:"welcome"}):i("goInQueue"):(i("showRegister"),i("receiveMessage",{message:y.translator.get("livechat.registration_welcome"),operator:{},read:!0,rel:"register"}))),y.notificationManager.requestPermission()),n(v.UPDATE_DISPLAY,g.DISPLAY_EXPAND)},t.hide=function(e){var t=e.state,n=e.commit;t.workflow!==g.WORKFLOW_NOT_STARTED&&t.workflow!==g.WORKFLOW_DISABLED||n(v.HIDE)},t.disable=function(e){var t=e.state,n=e.commit;if(t.workflow!==g.WORKFLOW_DISABLED){var i=(0,u["default"])(t.xmppSession.operatorsInQueue||{}).length,r=t.display;y.calleoChat.finishChat(),t.request.id&&!t.close&&(y.communicator.dispatcher.emit("cancel",t.request.id,t.request.liveTriggerId,t.request.source),y.communicator.sendAction(t.request.id,"end",{source:"disable",profileId:t.profile.id,jsAction:"disable",lastMessage:t.messages.slice(-10),nbOperatorsInQueue:i},function(){},function(){})),n(v.END_CHAT),y.guiManager.restoreDefaultState(),n(v.UPDATE_WORKFLOW,g.WORKFLOW_DISABLED),n(v.UPDATE_DISPLAY,r)}},t.show=function(e){var t=e.commit;t(v.SHOW)},t.start=function(e){var t=e.state,n=e.commit,i=e.dispatch;if(!t.request.id){var r=t.profile,s=r.firstName,o=r.title,a=r.lastName,u=r.email,l=r.legalTerms,c=r.nessClubId;y.communicator.start({request:{source:t.request.source,faq_id:t.request.faqId},profile:{title:o,email:u,firstName:s,lastName:a,nessClubId:c,legalTerms:l},additional_data:{current_url:window.location.href},live_trigger_id:t.request.liveTriggerId,is_logged_in:y.datalayer.isLoggedIn},function(e){i("apiErrorFinish"),i("apiSuccess",e)},function(e){try{var r=JSON.parse(e.response);if("livechat_closed"===r.error||"livechat_nothing_online"===r.error){var s=t.display;return n(v.END_CHAT),y.guiManager.restoreDefaultState(),n(v.UPDATE_WORKFLOW,g.WORKFLOW_DISABLED),void n(v.UPDATE_DISPLAY,s)}if("anon_not_allowed"===r.error||E(r,n))return n(v.UPDATE_WORKFLOW,g.WORKFLOW_NOT_STARTED),void i("showRegister");i("showRegister"),i("apiError",e.response)}catch(o){i("showRegister"),i("apiError",o)}}),n(v.UPDATE_REQUEST_DATA,{rqStartAt:(new Date).getTime()})}},t.apiSuccess=function(e,t){var n=e.commit,i=e.state;y.communicator.dispatcher.emit("launch",t.request.id,i.request.liveTriggerId,i.request.source),n(v.API_SUCCESS,t),y.calleoChat.startChat(i)},t.apiError=function(e,t){var n=e.commit;n(v.API_ERROR,!0)},t.apiErrorFinish=function(e){var t=e.commit;t(v.API_ERROR,!1)},t.updateList=function(e,t){var n=e.commit;n(v.UPDATE_LIST,t)},t.updateConfig=function(e,t){var n=e.commit;n(v.UPDATE_CONFIG,t)},t.updateSettings=function(e,t){var n=e.commit;n(v.UPDATE_SETTINGS,t)},t.showProfile=function(e){var t=e.commit;t(v.UPDATE_VIEW,{vueMessage:!1,vueWait:!1,vueProfile:!0,vueRating:!1,vueSendTranscript:!1,vueUpload:!1,vueRegister:!1})},t.showRegister=function(e){var t=e.commit;t(v.UPDATE_VIEW,{vueMessage:!1,vueWait:!1,vueProfile:!1,vueRating:!1,vueSendTranscript:!1,vueUpload:!1,vueRegister:!0})},t.showWait=function(e){var t=e.commit;t(v.UPDATE_VIEW,{vueMessage:!1,vueWait:!0,vueProfile:!1,vueRating:!1,vueSendTranscript:!1,vueUpload:!1,vueRegister:!1}),t(v.UPDATE_WORKFLOW,g.WORKFLOW_QUEUE)},t.showMessage=function(e){var t=e.commit;t(v.UPDATE_VIEW,{vueMessage:!0,vueWait:!1,vueProfile:!1,vueRating:!1,vueSendTranscript:!1,vueUpload:!1,vueRegister:!1})},t.showRating=function(e){var t=e.commit;t(v.UPDATE_VIEW,{vueMessage:!1,vueWait:!1,vueProfile:!1,vueRating:!0,vueSendTranscript:!1,vueUpload:!1,vueRegister:!1})},t.showTranscript=function(e){var t=e.commit;t(v.UPDATE_VIEW,{vueMessage:!1,vueWait:!1,vueProfile:!1,vueRating:!1,vueSendTranscript:!0,vueUpload:!1,vueRegister:!1})},t.updateProfileFromDatalayer=function(e){var t=e.commit,n=y.datalayer.title,i=y.datalayer.firstName,r=y.datalayer.lastName,s=y.datalayer.email,o=y.datalayer.nessClubId,a={title:n,firstName:i,lastName:r,email:s,nessClubId:o};t(v.UPDATE_PROFILE_TMP,a),t(v.UPDATE_PROFILE,a)},t.queueWaitingSize=function(e,t){var n=e.commit;n(v.UPDATE_WAITING_QUEUE_SIZE,t)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.apiError=t.waitingQueueSize=t.workflow=t.profileTmp=t.settings=t.close=t.hide=t.transcriptSent=t.rating=t.config=t.isEditingProfile=t.list=t.request=t.profileError=t.profile=t.display=t.vueRegister=t.vueSendTranscript=t.vueUpload=t.vueRating=t.vueProfile=t.vueWait=t.vueMessage=t.messagesUnread=t.disconnected=t.isTyping=t.message=t.messages=void 0;var r=n(65),s=i(r);t.messages=function(e){return e.messages},t.message=function(e){return e.message},t.isTyping=function(e){return e.isTyping},t.disconnected=function(e){return e.disconnected},t.messagesUnread=function(e){return e.messages.filter(function(e){return!e.read}).length},t.vueMessage=function(e){return e.vueMessage},t.vueWait=function(e){return e.vueWait},t.vueProfile=function(e){return e.vueProfile},t.vueRating=function(e){return e.vueRating},t.vueUpload=function(e){return e.vueUpload},t.vueSendTranscript=function(e){return e.vueSendTranscript},t.vueRegister=function(e){return e.vueRegister},t.display=function(e){return e.display},t.profile=function(e){return e.profile},t.profileError=function(e){return e.profileError},t.request=function(e){return e.request},t.list=function(e){return e.list},t.isEditingProfile=function(e){return(0,s["default"])(e.profile)!==(0,s["default"])(e.profileTmp)},t.config=function(e){return e.config},t.rating=function(e){return e.rating},t.transcriptSent=function(e){return e.transcriptSent},t.hide=function(e){return e.hide},t.close=function(e){return e.close},t.settings=function(e){return e.settings},t.profileTmp=function(e){return e.profileTmp},t.workflow=function(e){return e.workflow},t.waitingQueueSize=function(e){return e.waitingQueueSize},t.apiError=function(e){return e.apiError}},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.messages.push({id:i,message:m["default"].parseMessage(m["default"].htmlEscape(t)),attachment:n,rel:"client",time:(new Date).getTime(),read:!0,receipt:r})}function o(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"nespresso",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;e.messages.push({id:o,message:m["default"].parseMessage(t),attachment:s,operator:n,read:i,rel:r,time:(new Date).getTime()})}Object.defineProperty(t,"__esModule",{value:!0});var a,u=n(214),l=r(u),c=n(12),d=r(c),f=n(41),h=i(f),p=n(42),m=r(p),v=n(23),_=n(27),g=i(_);t["default"]=(a={},(0,l["default"])(a,h.SEND_MESSAGE,function(e,t){s(e,t.message,null,t.id)}),(0,l["default"])(a,h.SEND_ATTACHMENT,function(e,t){var n=t.payload;s(e,n.name,n,t.id,null)}),(0,l["default"])(a,h.RECEIVE_MESSAGE,function(e,t){var n=t.message,i=t.operator,r=t.read,s=t.rel,a=void 0===s?"nespresso":s,u=t.attachment,l=void 0===u?null:u,c=t.id,d=void 0===c?null:c,f=!1;e.messages.forEach(function(e){e.id===d&&(f=!0)}),f||o(e,n,i,r,a,l,d)}),(0,l["default"])(a,h.START_TYPING,function(e,t){e.isTyping=t}),(0,l["default"])(a,h.STOP_TYPING,function(e){e.isTyping=!1}),(0,l["default"])(a,h.DISCONNECTED,function(e){e.disconnected=!0}),(0,l["default"])(a,h.RECONNECTED,function(e){e.disconnected=!1}),(0,l["default"])(a,h.MARK_HAS_READ,function(e){e.messages.forEach(function(e){e.read=!0}),v.notificationManager.messageRead()}),(0,l["default"])(a,h.MARK_HAS_RECEIPT,function(e,t){e.messages.forEach(function(e){e.id===t&&(e.receipt=!0)})}),(0,l["default"])(a,h.UPDATE_MESSAGE,function(e,t){e.message=t}),(0,l["default"])(a,h.UPDATE_VIEW,function(e,t){var n=t.vueWait,i=t.vueMessage,r=t.vueProfile,s=t.vueRating,o=t.vueSendTranscript,a=t.vueUpload,u=t.vueRegister;e.vueWait=n,e.vueMessage=i,e.vueProfile=r,e.vueRating=s,e.vueSendTranscript=o,e.vueUpload=a,e.vueRegister=u}),(0,l["default"])(a,h.UPDATE_DISPLAY,function(e,t){e.display=t,v.communicator.dispatcher.emit("display-status",t===g.DISPLAY_EXPAND)}),(0,l["default"])(a,h.HIDE,function(e){e.hide=!0}),(0,l["default"])(a,h.SHOW,function(e){e.hide=!1}),(0,l["default"])(a,h.END_CHAT,function(e){e.close=!0,v.notificationManager.closeChat()}),(0,l["default"])(a,h.UPDATE_REQUEST_DATA,function(e,t){e.request=(0,d["default"])({},e.request,t)}),(0,l["default"])(a,h.UPDATE_PROFILE_TMP,function(e,t){e.profileTmp=(0,d["default"])({},e.profileTmp,t)}),(0,l["default"])(a,h.REVERT_PROFILE_TMP,function(e){e.profileTmp=(0,d["default"])({},e.profileTmp,e.profile)}),(0,l["default"])(a,h.UPDATE_PROFILE,function(e){e.profile=(0,d["default"])({},e.profile,e.profileTmp)}),(0,l["default"])(a,h.UPDATE_XMPP_SESSION,function(e,t){e.xmppSession=(0,d["default"])({},e.xmppSession,t)}),(0,l["default"])(a,h.UPDATE_PROFILE_ID,function(e,t){e.profile.id=t}),(0,l["default"])(a,h.UPDATE_PROFILE_ERROR,function(e,t){e.profileError=t}),(0,l["default"])(a,h.UPDATE_PROFILE_FORM,function(e,t){e.formProfile=t}),(0,l["default"])(a,h.UPDATE_TRANSCRIPT,function(e,t){e.transcriptSent=t}),(0,l["default"])(a,h.UPDATE_COMMUNICATOR,function(e,t){e.communicator=t}),(0,l["default"])(a,h.UPDATE_CALLEO_CHAT,function(e,t){e.calleoChat=t}),(0,l["default"])(a,h.UPDATE_LIST,function(e,t){e.list=t}),(0,l["default"])(a,h.UPDATE_CONFIG,function(e,t){e.config=t}),(0,l["default"])(a,h.UPDATE_SETTINGS,function(e,t){e.settings=t}),(0,l["default"])(a,h.UPDATE_RATING,function(e,t){e.rating=(0,d["default"])({},e.rating,t)}),(0,l["default"])(a,h.UPDATE_WORKFLOW,function(e,t){e.workflow=t}),(0,l["default"])(a,h.API_SUCCESS,function(e,t){if(t){if(t.request){var n=t.request,i=n.id,r=n.category_id,s=n.country,o=n.market_id,a=n.reply_lang,u=n.rq_time,l=n.customer_type,c=n.source;e.request.id=i,e.request.categoryId=r,e.request.country=s,e.request.marketId=o,e.request.replyLang=a,e.request.rqTime=parseInt(u,10),e.request.customerType=l,e.request.source=c,e.request.timeDiffServer=Math.ceil((new Date).getTime()/1e3)-parseInt(u,10)}t.profile&&t.profile.id&&(e.profile.id=t.profile.id)}}),(0,l["default"])(a,h.RESET_CHAT,function(e,t){e=t}),(0,l["default"])(a,h.RESET_MESSAGES,function(e){e.messages=[]}),(0,l["default"])(a,h.UPDATE_FIRST_MESSAGE,function(e,t){e.firstMessage=t}),(0,l["default"])(a,h.UPDATE_WAITING_QUEUE_SIZE,function(e,t){(null===e.waitingQueueSize||e.waitingQueueSize>t)&&(e.waitingQueueSize=t)}),(0,l["default"])(a,h.API_ERROR,function(e,t){e.apiError=t}),a)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(45),s=i(r),o=n(121),a=i(o),u=n(127),l=i(u),c=n(44),d=i(c),f=n(1),h=i(f),p=n(2),m=i(p),v=n(116),_=i(v),g=n(79),y=i(g),b=n(23),w=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;(0,h["default"])(this,e),this._config=t,this._chatManager=b.guiManager,this._webLoadder=null,this._storage=n,this._dispatcher=i,this._window=r,this._launched=!1,this._started=!1,this._pageUnloaded=!1,this._timeoutSaveStorage=null,this._rulesLoaded=!1,this._isOpen=!0,this._queueActionAfterLoad=[],this._config.url.bosh||this._dispatcher.emit("config.no-url"),this._processApiLoader()}return(0,m["default"])(e,[{key:"start",value:function(e,t){return this._started?t():(this._started=!0,void this._loadRules(e,t))}},{key:"saveStorage",value:function(){this._storage&&this._storage.sleep()}},{key:"saveStorageDelayed",value:function(){var e=this;this._timeoutSaveStorage&&(this._window.clearTimeout(this._timeoutSaveStorage),this._timeoutSaveStorage=null),this._pageUnloaded?this.saveStorage():this._timeoutSaveStorage=this._window.setTimeout(function(){return e.saveStorage()},100)}},{key:"_unload",value:function(){this._started=!1,this._pageUnloaded=!0,this.saveStorage()}},{key:"hasLivechatStorage",value:function(){return this._window.sessionStorage.getItem(this._config.storagePrefix+"_gui")}},{key:"_processApiLoader",value:function(){var e=this;if(this._window._calleoChat){var t=this._window._calleoChat;t.app=this,t.market=String(t.market).toLowerCase(),t.language=String(t.language).toLowerCase(),t.channel=String(t.channel).toLowerCase(),t.country=String(t.country).toLowerCase(),t.queue.unshift([this._config.defaultStorage+".market",t.market]),t.queue.unshift([this._config.defaultStorage+".language",t.language]),t.queue.unshift([this._config.defaultStorage+".channel",t.channel]),t.queue.unshift([this._config.defaultStorage+".country",t.country]),b.communicator.setContextParams(t.market,t.language,t.channel,t.country),b.datalayer.init(t.market,t.language,t.channel),this._webLoadder=t,this._processApiBinding(),this.launchChat()}else this._window.setTimeout(function(){return e._processApiLoader()},200)}},{key:"_loadRules",value:function(e,t){var n=this;b.calleoChat.initializeDependencies(this._config,this._dispatcher),b.communicator.retrieveRules(function(t){if(n._config.apiSettings=t.settings,n._storage.wakeUp(),n._processApiBinding(),n._window.addEventListener("beforeunload",function(){return n._unload()}),n._window.addEventListener("unload",function(){return n._unload()}),n._dispatcher.on("store.message-received",function(){return n.saveStorageDelayed()}),n._dispatcher.on("store.message-sent",function(){return n.saveStorageDelayed()}),t.list.ratings){var i=[];(0,d["default"])(t.list.ratings).reverse().forEach(function(e){return i.push({key:e,value:t.list.ratings[e]})}),t.list.ratings=i}b.priorityWeight.setRules(t.priorityWeight),
b.translator.pushTranslations(t.translations),b.translator.pushList(t.list),b.datalayer.load(),n._chatManager.init(n._storage.getStorage("gui").getData(),t);var r=!0;n._config.apiSettings.enabled||(n._dispatcher.emit("settings.not-enabled"),r=!1),n._config.apiSettings.moderator_in_room||(n._dispatcher.emit("settings.absent-moderator-in-room"),n._chatManager.isChatInQueue()||(r=!1),n._isOpen=!1),n._storage.canStore()||(n._dispatcher.emit("opening-hours.is-closed"),r=!1),n._config.apiSettings.enabled_languages.find(function(e){return e===b.communicator.language})||(n._dispatcher.emit("settings.language-not-enabled"),r=!1),n._isOpen=n._isOpen&&r,r||n._chatManager.isChatInProgress()?n._config.apiSettings.enabled_reactive||(n._dispatcher.emit("settings.reactive-not-enabled"),n._chatManager.hide()):(n._chatManager.disable(),n._chatManager.hide()),n._chatManager.setIsEnableNewChat(n._isOpen);var s=100-Math.round(100*Math.random()),o=n._storage.getStorage("chatRequest").getValue("customerPercent")||s;if(n._storage.getStorage("chatRequest").callValue("customerPercent",o),n._config.apiSettings.customer_percent<o&&(n._dispatcher.emit("settings.customer-percent",o,n._config.apiSettings.customer_percent),n._chatManager.hide()),n._config.apiSettings.exclude_url){var a=_["default"].parseURIBase(window.location.href);n._config.apiSettings.exclude_url.some(function(e){var t=_["default"].parseURIBase(e);return!(""!==t.host&&a.host!==t.host||""!==t.path&&a.path!==t.path||""!==t.query&&(""===a.query||a.query.indexOf(t.query)===-1)||""!==t.fragment&&a.fragment!==t.fragment)})&&(n._dispatcher.emit("settings.exclude-url",window.location.href,n._config.apiSettings.exclude_url),n._chatManager.hide())}n._rulesLoaded=!0,n._registerPostMessageHandler(),n._processQueueActionAfterLoad(),e()},function(e){return t(e)})}},{key:"_processApiBinding",value:function(){var e=this;this._webLoadder&&(this._webLoadder.callMethod=function(){return e.apiCallMethod.apply(e,arguments)},this._webLoadder.queue.forEach(function(t){return e.apiCallMethod.apply(e,(0,l["default"])(t))}),this._webLoadder.queue=[])}},{key:"_registerPostMessageHandler",value:function(){var e=this;this._window.addEventListener("message",function(t){if(y["default"].matchOneHostPatern(t.origin,e._config.apiSettings.allowedHostPatterns)){var n=String(t.data);if("calleoChat:::"===n.substr(0,13)){var i=n.split(":::"),r={};switch(i[1]){case"startChat":case"startChatWithAck":if(i.length>2&&(r=y["default"].parseQuery(i[2])),e.startChat(r),"startChatWithAck"===i[1]){var s=e._isOpen&&!e._chatManager.isChatDisabled();t.source.postMessage({"calleoChat:::chatStarted":s},t.origin)}break;case"isChatOpen":t.source.postMessage({"calleoChat:::isChatOpen":e._isOpen},t.origin);break;case"isChatNotStarted":case"isChatDisabled":case"isChatInProgress":case"isChatInQueue":var o={};o["calleoChat:::"+i[1]]=e._chatManager[i[1]](),t.source.postMessage(o,t.origin)}}}},!1)}},{key:"apiCallMethod",value:function(e){if(e=String(e)){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("function"==typeof this[e])this[e].apply(this,n);else if(this._storage&&this._storage.hasStorage()){var r;(r=this._storage).callValue.apply(r,[e].concat(n))}}}},{key:"addChatListener",value:function(e,t){this._dispatcher.on(e,t)}},{key:"launchChat",value:function(){var e=this;this._launched!==!0&&(this._launched=!0,new a["default"](function(t,n){e.start(t,n)}).then(function(){e._dispatcher.emit("livechat.loading-finished")})["catch"](function(t){e._dispatcher.emit(t)}))}},{key:"startChat",value:function(e){e=e&&"object"===("undefined"==typeof e?"undefined":(0,s["default"])(e))?e:{},e.source=e.liveTriggerId?"chat_lt":"chat",this._chatManager.startQueue(e)}},{key:"isChatOpen",value:function(e){if(this._rulesLoaded){var t=(new Date).getDay(),n=null;t in this._config.apiSettings.opening_hours&&(n=this._config.apiSettings.opening_hours[t]),e(this._isOpen&&this._config.apiSettings.enabled_contact_us,n,this._config.apiSettings.opening_hours)}else this._queueActionAfterLoad.push(["isChatOpen",e])}},{key:"_processQueueActionAfterLoad",value:function(){var e=this;this._queueActionAfterLoad.forEach(function(t){return e.apiCallMethod.apply(e,(0,l["default"])(t))}),this._queueActionAfterLoad=[]}},{key:"resetChat",value:function(){this._storage.cleanUpStorage(),this._storage.stopStorage(),this._window.location.reload()}}]),e}();t["default"]=w},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),s=i(r),o=n(127),a=i(o),u=n(80),l=i(u),c=n(1),d=i(c),f=n(2),h=i(f),p=n(125),m=i(p),v=n(123),_=i(v),g=n(124),y=i(g),b=n(117),w=i(b),S=function(e){function t(e){(0,d["default"])(this,t);var n=(0,m["default"])(this,(t.__proto__||(0,l["default"])(t)).call(this));return n.config=e,n}return(0,y["default"])(t,e),(0,h["default"])(t,[{key:"callValue",value:function(e){for(var n,i=arguments.length,r=Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return r=this._transformValues(e,r),(n=(0,_["default"])(t.prototype.__proto__||(0,l["default"])(t.prototype),"callValue",this)).call.apply(n,[this,e].concat((0,a["default"])(r)))}},{key:"wakeUp",value:function(e){this.data=(0,s["default"])(this.data,e)}},{key:"_transformValues",value:function(e,t){return"Title"===e&&(t[0]=String(t[0]).replace(".","").toLowerCase()),t}}]),t}(w["default"]);t["default"]=S},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(80),s=i(r),o=n(1),a=i(o),u=n(2),l=i(u),c=n(125),d=i(c),f=n(123),h=i(f),p=n(124),m=i(p),v=n(117),_=i(v),g=n(5),y=i(g),b=function(e){function t(e){(0,a["default"])(this,t);var n=(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this));return n.config=e,n}return(0,m["default"])(t,e),(0,l["default"])(t,[{key:"sleep",value:function(){return this.data=y["default"].state,(0,h["default"])(t.prototype.__proto__||(0,s["default"])(t.prototype),"sleep",this).call(this)}}]),t}(_["default"]);t["default"]=b},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(44),s=i(r),o=n(65),a=i(o),u=n(126),l=i(u),c=n(1),d=i(c),f=n(2),h=i(f),p=function(){function e(t,n){(0,d["default"])(this,e),this.managers=null,this.config=t,this.openingHours=n,this.defaultManager=t.defaultStorage,this.storagePrefix=t.storagePrefix,this.settings={},this._stopStorage=!1}return(0,h["default"])(e,[{key:"setStorage",value:function(e){this.managers=e}},{key:"getStorage",value:function(e){return"undefined"!=typeof this.managers[e]?this.managers[e]:null}},{key:"hasStorage",value:function(){return null!==this.managers}},{key:"callValue",value:function(e){var t;e=String(e);var n=e;if(e.indexOf(".")!==-1){var i=e.split(".",2),r=(0,l["default"])(i,2);n=r[0],e=r[1]}"undefined"==typeof this.managers[n]&&(n=this.defaultManager);for(var s=arguments.length,o=Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];(t=this.managers[n]).callValue.apply(t,[e].concat(o))}},{key:"sleep",value:function(){if(!this._stopStorage){var e=this._getStorage(),t=null;if(this.storagePrefix&&e)for(var n in this.managers)Object.prototype.hasOwnProperty.call(this.managers,n)&&(t=this.managers[n].sleep(),t=e.setItem(this.storagePrefix+"_"+n,(0,a["default"])(t)))}}},{key:"wakeUp",value:function(){var e=this._getStorage(),t=null;for(var n in this.managers)if(Object.prototype.hasOwnProperty.call(this.managers,n)){if(t=e.getItem(this.storagePrefix+"_"+n))try{t=JSON.parse(t)}catch(i){}else t={};this.managers[n].wakeUp(t)}}},{key:"cleanUpStorage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this._getStorage();e&&(this.storagePrefix=e),e=this.storagePrefix,(0,s["default"])(t).forEach(function(n){String(n).startsWith(e)&&t.removeItem(n)})}},{key:"stopStorage",value:function(){this._stopStorage=!0}},{key:"_getStorage",value:function(){return window.sessionStorage}},{key:"canStore",value:function(){if(this.config){var e=this.config.apiSettings.opening_hours,t=this.config.apiSettings.timezone;return this.openingHours.isOpen(e,new Date,t)}return!0}}]),e}();t["default"]=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(65),s=i(r),o=n(12),a=i(o),u=n(1),l=i(u),c=n(2),d=i(c),f=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;(0,l["default"])(this,e),this._win=i,this._datalayer=t,this._dispatcher=n,this.datalayerState=null,this._registerAnchorChange(),this._registerHtml5PushState(),this._registerCartUpdate()}return(0,d["default"])(e,[{key:"getCurentDatalayerState",value:function(){var e=this._datalayer;e.load();var t={url:this._win.location.href,pageId:e.pageId,isLoggedIn:e.isLoggedIn,customer:{firstName:e.firstName,lastName:e.lastName,email:e.email,nessClubId:e.nessClubId,city:e.city,zip:e.zip},customerSegment:e.customerSegment,cart:(0,a["default"])({},e.cart)};return(0,s["default"])(t)}},{key:"startDatalayerObserve",value:function(){return this.datalayerState=this.getCurentDatalayerState(),this.datalayerState}},{key:"stopDatalayerObserve",value:function(){this.datalayerState=null}},{key:"_checkDatalayerChange",value:function(){var e=this.getCurentDatalayerState();e!==this.datalayerState&&(this.datalayerState=e,this._dispatcher.emit("datalayer.change",e))}},{key:"_registerAnchorChange",value:function(){var e=this;"onhashchange"in this._win&&this._win.addEventListener("hashchange",function(){e._win.setTimeout(function(){e._dispatcher.emit("history.hashchange",e._win.location.hash)},0)},!1),this._dispatcher.on("history.hashchange",function(){e._checkDatalayerChange()})}},{key:"_registerHtml5PushState",value:function(){var e=this,t=this._win.history;if(t&&"function"==typeof t.pushState){var n=t.pushState;t.pushState=function(){for(var i=arguments.length,r=Array(i),s=0;s<i;s++)r[s]=arguments[s];try{e._win.setTimeout(function(){var t;(t=e._dispatcher).emit.apply(t,["history.pushState"].concat(r))},0)}catch(o){}return n.apply(t,r)}}this._dispatcher.on("history.pushState",function(){e._checkDatalayerChange()})}},{key:"_registerCartUpdate",value:function(){var e=this,t=!1;try{window.napi&&(window.napi.data().on("cart.*",function(t){"cart.update"===t&&e._win.setTimeout(function(){e._dispatcher.emit("cart.updated")},0)}),t=!0)}catch(n){}if(!t)try{this._win.jQuery&&this._win.jQuery(document).on("cartUpdated",function(){e._win.setTimeout(function(){e._dispatcher.emit("cart.updated")},0)})}catch(n){}this._dispatcher.on("cart.updated",function(){e._checkDatalayerChange()})}}]),e}();t["default"]=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=i(o),u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;(0,s["default"])(this,e),this._win=n,this._translator=t,this._reset()}return(0,a["default"])(e,[{key:"_reset",value:function(){this.pageId="",this.title="",this.firstName="",this.lastName="",this.email="",this.nessClubId="",this.isLoggedIn="",this.city="",this.zip="",this.customerSegment={},this.billingAddress=null,this.deliveryAddress=null,this.cart={nbItem:0,nbUniqueItem:0,totalAmount:0,currency:"",items:[]},this.cartExtend={names:[],categories:[]}}},{key:"init",value:function(e,t,n){this.market=e,this.language=t,this.channel=n}},{key:"load",value:function(){try{this._reset(),this._retrieveStoreData(),this.map()}catch(e){}}},{key:"map",value:function(){this._mapGeneric(),this._mapCustomer(),this._mapCart()}},{key:"_getFromStorage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{var n=this._win.sessionStorage.getItem(e);if(n||(n=this._win.localStorage.getItem(e)),n){var i=JSON.parse(n);return t?i&&"undefined"!=typeof i[t]?i[t]:null:i}}catch(r){}return null}},{key:"_retrieveStoreData",value:function(){try{this._padl=this._win.padl&&this._win.padl.events?this._win.padl.events:this._win.padl}catch(e){}this._padl2=this._getFromStorage("padl-"+this.channel+"-"+this.market),this._cart=this._getFromStorage("cart-"+this.market+"-"+this.channel,"cartLines"),this._cart||(this._cart=this._getFromStorage("cart-"+this.market)),this._customerInfo=this._getFromStorage("customerInfo-"+this.market),this._products=this._getFromStorage("products-"+this.market+"-"+this.language+"-"+this.channel),this._products||(this._products=this._getFromStorage("products-"+this.market+"-"+this.language)),this._categories=this._getFromStorage("categories-"+this.market+"-"+this.language+"-"+this.channel),this._categories||(this._categories=this._getFromStorage("categories"));try{var t=this._getFromStorage("customerAddressesCache-"+this.market,"value");if(t)for(var n=0;n<t.length;n++)t[n].defaultBilling&&(this.billingAddress=t[n]),t[n].defaultDelivery&&(this.deliveryAddress=t[n])}catch(e){}}},{key:"_mapCustomer",value:function(){this._win.padl&&this._win.padl.user?this.isLoggedIn=this._win.padl.user.isLoggedIn:this.isLoggedIn=!1,this.isLoggedIn&&(this._win.padl&&this._win.padl.user&&this._win.padl.user.clubMember?this._mapFromPadl(this._win.padl):this._padl&&this._padl.user&&this._padl.user.clubMember?this._mapFromPadl(this._padl):this._padl2&&this._padl2.user&&this._padl2.user.clubMember&&this._mapFromPadl(this._padl2),this.billingAddress&&(!this.title&&this.billingAddress.civility&&(this.title=this._convertTitle(this.billingAddress.civility.label)),this.firstName||(this.firstName=this.billingAddress.firstName),this.lastName||(this.lastName=this.billingAddress.name),this.city=this.billingAddress.city||"",this.zip=this.billingAddress.zipCode||""),this._customerInfo&&(this.title||(this.title=this._convertTitle(this._customerInfo.civility)),this.firstName||(this.firstName=this._customerInfo.firstName),this.lastName||(this.lastName=this._customerInfo.lastName),this.email||(this.email=this._customerInfo.email)))}},{key:"_mapFromPadl",value:function(e){if(e.user&&e.user.clubMember){var t=e.user.clubMember;if(this.title=this._convertTitle(t.clubMemberTitle),this.firstName=t.clubMemberFirstName||"",this.lastName=t.clubMemberLastName||"",this.email=t.clubMemberEmail||"",this.nessClubId=t.clubMemberID||"",this.customerSegment={},t.clubMemberTierID&&t.clubMemberLevel)for(var n=String(t.clubMemberTierID).toLowerCase().split(","),i=String(t.clubMemberLevel).toLowerCase().split(","),r=0;r<n.length;r++)this.customerSegment[String(n[r]).trim()]=String(i[r]).trim()}}},{key:"_mapGeneric",value:function(){try{this._padl&&this._padl.navigation&&this._padl.navigation.pageView&&this._padl.navigation.pageView[this._padl.navigation.pageView.length-1]&&(this.pageId=this._padl.navigation.pageView[this._padl.navigation.pageView.length-1].page.pageInfo.breadcrumbUID)}catch(e){}try{this._padl&&this._padl.navigation&&this._padl.navigation.pageView&&this._padl.navigation.pageView[this._padl.navigation.pageView.length-1]&&(this.pageId=this._padl.navigation.pageView[this._padl.navigation.pageView.length-1].page.pageInfo.breadcrumbUID)}catch(e){}}},{key:"_mapCart",value:function(){var e=0,t=0,n=0,i=[];if(this.cart.currency=this._win.padl&&this._win.padl.app&&this._win.padl.app.currency?this._win.padl.app.currency:"",this._cart)for(var r=0;r<this._cart.length;r++){var s=this._cart[r];t++,e+=s.quantity,n+=s.unitPrice*s.quantity,i.push(this._extractCartItem(s))}this.cart.items=i,this.cart.nbItem=e,this.cart.nbUniqueItem=t,this.cart.totalAmount=n,this.cartExtend.categories=this._arrayUnique(this.cartExtend.categories),this.cartExtend.names=this._arrayUnique(this.cartExtend.names)}},{key:"_convertTitle",value:function(e){try{return this._translator.getListValue("titleMapping",String(e).trim().toLowerCase().replace(".",""))}catch(t){}return null}},{key:"_extractCartItem",value:function(e){var t={productId:e.productId,quantity:e.quantity,unitPrice:e.unitPrice,icon:null,url:null,names:[],categories:[]},n=this._products&&this._products[e.productId];if(n){if(t.names.push(String(n.internationalId).trim()),t.names.push(String(n.internationalName).trim()),t.names.push(String(n.name).trim()),n.images&&n.images.icon){var i=this._win.location.protocol+"//"+this._win.location.host;this._win.location.host.indexOf("docker")===-1&&this._win.location.host.indexOf(".contact.")===-1||(i="https://www.nespresso.com"),t.icon=i+n.images.icon}if(n.pdpURLs&&n.pdpURLs.desktop&&(t.url=n.pdpURLs.desktop),t.categories.push(String(n.rootCategory).trim()),t.categories.push(String(n.category).trim()),t.categories=this._arrayUnique(t.categories),this.cartExtend.names.push(String(n.internationalId).toLowerCase().trim()),this.cartExtend.names.push(String(n.internationalName).toLowerCase().trim()),this.cartExtend.names.push(String(n.name).toLowerCase().trim()),this.cartExtend.categories.push(String(n.rootCategory).toLowerCase().trim()),this.cartExtend.categories.push(String(n.category).toLowerCase().trim()),this._categories&&n.supercategories)for(var r=0;r<n.supercategories.length;r++){var s=this._categories[n.supercategories[r]];s&&this.cartExtend.categories.push(String(s.name).toLowerCase().trim())}}return t}},{key:"_arrayUnique",value:function(e){for(var t={},n=[],i=0;i<e.length;i++)t[e[i]]=!0;for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(r);return n}},{key:"prettyRenderHtml",value:function(){var e=this,t="<pre>",n=void 0;t+="Datalayer Info\n",t+="==============\n",t+=" - Page ID : "+this.pageId+"\n",t+="=> Client\n",["title","firstName","lastName","email","nessClubId","city","zip"].forEach(function(n){t+=" - "+(n.charAt(0).toLowerCase()+n.slice(1))+" : "+e[n]+"\n"}),t+=" - Is Logged In : "+(this.isLoggedIn?"true":"false")+"\n";for(var i in this.customerSegment)Object.prototype.hasOwnProperty.call(this.customerSegment,i)&&i&&this.customerSegment[i]&&(t+=" - Segmentation "+i+" : "+this.customerSegment[i]+"\n");t+="=> Cart\n",t+=" - Nb Products : "+this.cart.nbUniqueItem+"\n",t+=" - Total Amount : "+this.cart.currency+" "+this.cart.totalAmount+"\n",t+=" -> Items : \n";for(var r=0;r<this.cart.items.length;r++)n=this.cart.items[r],t+="    -> Product Names  : "+n.names.join(", ")+"\n",t+="       - categories   : "+n.categories.join(", ")+"\n",n.url&&(t+='       - url   : <a href="'+n.url+'">'+n.url+"</a>\n"),n.icon&&(t+='       - icon   : <a href="'+n.icon+'"><img width="50" src="'+n.icon+'"/></a>\n');return t+="</pre>"}}]),e}();t["default"]=u},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),o=r(s),a=n(2),u=r(a),l=n(311),c=r(l),d=n(5),f=r(d),h=n(27),p=i(h),m=n(42),v=r(m),_="calleo-livechat",g=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;(0,o["default"])(this,e),this._win=i,this._config=t,this._translator=n,this._currentNotification=null,this._notificationCreatedAt=null,this._configured=!1,this._songs={},this._chatState=null,this._registration=null,c["default"].now()}return(0,u["default"])(e,[{key:"requestPermission",value:function(){var e=this;if(!this._configured){if(this._configured=!0,"disable"!==this._config.apiSettings.notification_api_mode&&"Notification"in this._win&&this._win.Notification.requestPermission){try{"navigator"in this._win&&"serviceWorker"in navigator&&this._win.navigator.serviceWorker.register("/virtualres/livechat/handle.php?c=sw").then(function(t){e._registration=t,e._win.navigator.serviceWorker.addEventListener("message",function(t){t.data==="nofication-click:"+_&&e._notificationClick()})})}catch(t){}"granted"!==this._win.Notification.permission&&this._win.Notification.requestPermission()}this._win.addEventListener("beforeunload",function(){e._currentNotification&&e.closeCurrentNotification(!0)});var n=function(){f["default"].state.display===p.DISPLAY_EXPAND&&(e.closeCurrentNotificationTimeout(2e3),e.stopBlinkTitle())};c["default"].on("focus",n);for(var i in this._config.apiSettings.sounds)Object.prototype.hasOwnProperty.call(this._config.apiSettings.sounds,i)&&"disable"!==this._config.apiSettings.sounds[i].mode&&(this._songs[i]=v["default"].preloadSound(this._config.apiSettings.sounds[i].sound))}}},{key:"messageReceived",value:function(e){var t=!c["default"].now();this._messageReceivedNotificationHandle(e);var n=this._config.apiSettings.sounds.new_message.mode;if("always"===n||"always_inactive"===n&&!this.isActiveInChat()||"ifNotVisible"===n&&t||"ifNotVisibleChat"===n&&(t||f["default"].state.display===p.DISPLAY_COLLAPSE))try{this._songs.new_message.play()}catch(i){}this._config.apiSettings.blink_title_new_message&&this.startBlinkTitle()}},{key:"_messageReceivedNotificationHandle",value:function(e){var t=this;this.closeCurrentNotification();var n=this._config.apiSettings.notification_api_mode,i=!c["default"].now();if("Notification"in this._win&&"granted"===this._win.Notification.permission&&("always_inactive"===n&&!this.isActiveInChat()||"ifNotVisible"===n&&i||"ifNotVisibleChat"===n&&(f["default"].state.display===p.DISPLAY_COLLAPSE||i))){this._closeNofificationTimeout&&(this._win.clearTimeout(this._closeNofificationTimeout),this._closeNofificationTimeout=null);var r=e.picture?e.picture:this._config.defaultOperatorAvatarPath,s={tag:_,icon:""+this._config.frontBaseUrl+r};try{var o=new this._win.Notification(e.message,s);this._currentNotification=o,this._notificationCreatedAt=(new Date).getTime(),o.addEventListener("click",function(){o.close(),t._notificationClick()}),o.show&&o.show(),this._win.setTimeout(function(){o.close()},18e4)}catch(a){if(this._registration)try{var u=this._win.location;s.data={sourceURL:this._win.location.href,startsWithURL:u.protocol+"//"+u.hostname+u.pathname.substring(0,6)},this._registration.showNotification(e.message,s).then(function(){t._notificationCreatedAt=(new Date).getTime()}),this._currentNotification=null,this.closeCurrentNotificationTimeout(18e4)}catch(a){}}}}},{key:"_notificationClick",value:function(){this._win.focus(),this.closeCurrentNotification(),f["default"].dispatch("expandChat"),this.stopBlinkTitle(),this._win.setTimeout(function(){var e=document.querySelector("#nespresso-livechat .nlc-message .nlc-input");e&&e.focus()},100)}},{key:"messageRead",value:function(){f["default"].state.display!==p.DISPLAY_EXPAND?(this.closeCurrentNotificationTimeout(2e3),this.stopBlinkTitle()):"always"!==this._config.apiSettings.notification_api_mode&&"always_inactive"!==this._config.apiSettings.sounds.new_message.mode||this.closeCurrentNotificationTimeout(2e4)}},{key:"setChatState",value:function(e){this._chatState=e,this.isActiveInChat()&&(this.closeCurrentNotification(),this.stopBlinkTitle())}},{key:"isActiveInChat",value:function(){return"active"===this._chatState||"composing"===this._chatState}},{key:"closeChat",value:function(){this.closeCurrentNotification(),this.stopBlinkTitle()}},{key:"closeCurrentNotificationTimeout",value:function(e){var t=this;(this._currentNotification||this._registration)&&(this._closeNofificationTimeout&&(this._win.clearTimeout(this._closeNofificationTimeout),this._closeNofificationTimeout=null),this._closeNofificationTimeout=this._win.setTimeout(function(){t.closeCurrentNotification()},e))}},{key:"closeCurrentNotification",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(this._currentNotification){var t=(new Date).getTime()-this._notificationCreatedAt;if(e||t>2e3)this._currentNotification.close();else{var n=this._currentNotification;this._win.setTimeout(function(){n.close()},2e3-t)}this._currentNotification=null}else this._registration&&"function"==typeof this._registration.getNotifications&&this._registration.getNotifications({tag:_}).then(function(e){e.forEach(function(e){e.close()})});this._closeNofificationTimeout&&(this._win.clearTimeout(this._closeNofificationTimeout),this._closeNofificationTimeout=null)}catch(i){}}},{key:"startBlinkTitle",value:function(){var e=this;this.stopBlinkTitle(),this._originalTitle=document.title,this._blinkTitleInterval=this._win.setInterval(function(){document.title===e._originalTitle?document.title=e._translator.get("livechat.page_title.new_message"):document.title=e._originalTitle},700)}},{key:"stopBlinkTitle",value:function(){this._blinkTitleInterval&&(this._win.clearInterval(this._blinkTitleInterval),this._blinkTitleInterval=null),this._originalTitle&&(document.title=this._originalTitle,this._originalTitle=null)}}]),e}();t["default"]=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=i(o),u=function(){function e(){(0,s["default"])(this,e)}return(0,a["default"])(e,[{key:"isOpen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.getMinutes();i<10&&(i="0"+i);var r=t.getTimezoneOffset()/60,s=n+r;t.setHours(t.getHours()+s);var o=t.getDay();0===o&&(o=7);var a=parseInt(""+t.getHours()+i,10);if(o in e){var u=e[o],l=void 0;Array.isArray(u)||(u=[u]);for(var c=0;c<u.length;c++){l=u[c];var d=parseInt(l.from.replace(":",""),10),f=parseInt(l.to.replace(":",""),10);if(a>=d&&a<=f)return!0}}return!1}}]),e}();t["default"]=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=i(o),u=n(5),l=i(u),c=function(){function e(t){(0,s["default"])(this,e),this._datalayer=t,this._rules={},this._store=l["default"]}return(0,a["default"])(e,[{key:"setRules",value:function(e){e.waiting_time&&(e.waiting_time=parseInt(e.waiting_time,10)),this._rules=e}},{key:"setStore",value:function(e){this._store=e}},{key:"computeStaticPriority",value:function(){var e=this,t=0,n=this._store.state.request;return this._datalayer.load(),Array.isArray(this._rules.customer_type)&&(t+=this._computeSimpleMatch(this._rules.customer_type,n.customerType)),Array.isArray(this._rules.source)&&(t+=this._computeSimpleMatch(this._rules.source,n.source)),Array.isArray(this._rules.cart_size)&&this._rules.cart_size.forEach(function(n){var i=parseInt(n.weight,10),r=e._datalayer.cart;if(i)switch(n.key){case"pro_item":t+=r.nbItem*i;break;case"pro_item_unique":t+=r.nbUniqueItem*i;break;case"pro_amount":t+=r.totalAmount*i}}),Array.isArray(this._rules.item_sku)&&(t+=this._computeNamesMatch(this._rules.item_sku,this._datalayer.cartExtend.names)),Array.isArray(this._rules.item_category)&&(t+=this._computeNamesMatch(this._rules.item_category,this._datalayer.cartExtend.categories)),Math.round(t)}},{key:"getCurrentPriotiry",value:function(){var e=this._store.state.request;return this.computePriority(e.rqTime,e.priority)}},{key:"computePriority",value:function(e,t){var n=this._store.state.request;if(this._rules.waiting_time){var i=Math.ceil((new Date).getTime()/1e3)-n.timeDiffServer-e;if(i)return t+i*this._rules.waiting_time}return t}},{key:"_computeSimpleMatch",value:function(e,t){var n=0;return e.some(function(e){if(e.key===t){var i=parseInt(e.weight,10);if(i)return n=i,!0}return!1}),n}},{key:"_computeNamesMatch",value:function(e,t){var n=0;return e.forEach(function(e){t.some(function(t){return e.key===t})&&(n+=parseInt(e.weight,10))}),n}}]),e}();t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=i(o),u=n(42),l=i(u),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,n=arguments[1],i=arguments[2],r=arguments[3];(0,s["default"])(this,e),this._id="livechat-test-mode",this._key="livechat_test_mode",this._storageManager=n,this._isEnabled=this._retrieveTestModeState(t),this._dispatcher=i,this._datalayer=r,this._win=t,this.isEnabled&&(this._buildInfoBlock(t),this._initListeners())}return(0,a["default"])(e,[{key:"_initListeners",value:function(){var e=this,t=this._dispatcher;t.on("livechat.loading",function(){e._api("Loading livechat...")}),t.on("livechat.loading-finished",function(){e._log("Loading finished with success")}),t.on("config.no-url",function(){e._error("Config file isn't correct, check your local.json and local.json.dist")}),t.on("livechat.already-in-use",function(){e._warn("Livechat is already started")}),t.on("livechat.loading.error",function(t){e._error("API Error: "+e._formatXhrError(t))}),t.on("livechat.send-action",function(t){e._api("Sending '"+t+"' to server")}),t.on("livechat.send-action.error",function(t){e._error("API Error: "+e._formatXhrError(t))}),t.on("settings.not-enabled",function(){e._warn("The current market's Livechat isn't enabled")}),t.on("settings.absent-moderator-in-room",function(){e._warn("No operator in the room chat room, disable the chat")}),t.on("settings.reactive-not-enabled",function(){e._warn("The current market's Livechat Reactive isn't enabled")}),t.on("settings.language-not-enabled",function(){e._warn("The current market's Livechat language isn't enabled")}),t.on("settings.not-enabled-livechat-started",function(){e._warn("The current market's Livechat Reactive isn't enabled, but a livechat is already started")}),t.on("settings.customer-percent",function(t,n){e._warn("Customer excldued for embedded chat: Target customers treshold "+n+"% - Calculated value for customer "+t+"%")}),t.on("settings.exclude-url",function(t,n){e._warn("The customer is on exclude page, url: "+t),e._warn(" urls set:"),n.forEach(function(t){return e._warn(""+t)})}),t.on("opening-hours.is-closed",function(){e._warn("The current market's Livechat is closed.")}),t.on("reset.storage",function(){e._warn("The storage has been cleared!")}),t.on("xmpp.fail-connection",function(){e._error("XMPP BOSH connection fail")}),t.on("xmpp.disconnected",function(){e._log("XMPP BOSH is now disconnected")}),t.on("xmpp.connected",function(t,n){e._log("XMPP BOSH connected with new connection (jid:"+n+")")}),t.on("xmpp.attached",function(t,n){e._log("XMPP BOSH connection attached to (jid:"+n+")"),e._log("XMPP BOSH connected")}),t.on("xmpp.error",function(){e._error("XMPP BOSH Error")})}},{key:"_retrieveTestModeState",value:function(e){var t=e.sessionStorage;if(!t)return!1;var n=String(e.location.search);return n.indexOf(this._key+"=")!==-1&&(n.indexOf(this._key+"=no")!==-1?(t.setItem(this._key,"0"),t.setItem(this._key+"_mini","0")):n.indexOf(this._key+"=yes")!==-1&&t.setItem(this._key,"1")),"1"===t.getItem(this._key)}},{key:"_buildInfoBlock",value:function(e){var t=this,n=void 0;"function"==typeof e.calleoTrigger&&(n=' style="bottom: 165px;"');var i='<div id="'+this._id+'" class="'+this._id+'"'+n+'>\n                            <div class="'+this._id+'-minimal" title="Expand" id="'+this._id+'-minimal">LiveChat Test Mode &gt;</div>\n                            <div class="'+this._id+'-head">\n                                <div class="'+this._id+'-title">\n                                    LIVECHAT IN TEST MODE <spans id="'+this._id+'-queue-size"></spans>\n                                </div>\n                                <div class="'+this._id+'-actions">\n                                    <button id="'+this._id+'-reduce" class="'+this._id+'-action-btn" title="Reduce"> &lt; </button> &nbsp;\n                                    <button id="'+this._id+'-start-chat" class="'+this._id+'-action-btn">Start Chat</button> &nbsp;\n                                    <button id="'+this._id+'-reset" class="'+this._id+'-action-btn">Reset LiveChat</button> &nbsp;\n                                    <button id="'+this._id+'-datalayer" class="'+this._id+'-action-btn">Show Datalayer</button> &nbsp;\n                                    <div id="'+this._id+'-deactivate" class="'+this._id+"-action "+this._id+'-action-close" title="Leave test mode"> X </div>\n                                </div>\n                            </div>\n                            <div class="'+this._id+'-body">\n                                <div id="'+this._id+'-log" class="log">\n                                </div>\n                            </div>\n                        </div>',r=l["default"].create(i);
e.document.body.appendChild(r),e.document.getElementById(this._id+"-deactivate").addEventListener("click",function(){e.sessionStorage.setItem(t._key,"0"),e.location.replace(e.location.pathname)},!1),e.document.getElementById(this._id+"-reset").addEventListener("click",function(){e.calleoChat("resetChat"),t._dispatcher.emit("reset.storage")},!1),e.document.getElementById(this._id+"-start-chat").addEventListener("click",function(){e.calleoChat("startChat")},!1),e.document.getElementById(this._id+"-datalayer").addEventListener("click",function(){t._log(t._datalayer.prettyRenderHtml())},!1),e.document.getElementById(this._id+"-reduce").addEventListener("click",function(){t._minimized(!0)},!1),e.document.getElementById(this._id+"-minimal").addEventListener("click",function(){t._minimized(!1)},!1),this._minimized(parseInt(e.sessionStorage.getItem(this._key+"_mini"),10))}},{key:"_minimized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._win.document.getElementById(""+this._id),n=this._win.sessionStorage;e?l["default"].addClass(t,"minized"):l["default"].removeClass(t,"minized"),n&&n.setItem(this._key+"_mini",e?"1":"0")}},{key:"_log",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=document.getElementById(this._id+"-log"),i=document.createElement("div");i.className="item "+t,i.innerHTML=e,n.appendChild(i),n.scrollTop=n.scrollHeight}},{key:"_success",value:function(e){this._log(e,"success")}},{key:"_error",value:function(e){this._log(e,"error")}},{key:"_warn",value:function(e){this._log(e,"warn")}},{key:"_api",value:function(e){this._log(e,"api")}},{key:"_formatXhrError",value:function(e){var t=e.status+" "+e.statusText;try{var n=JSON.parse(e.response);t+=": "+n.error_description}catch(i){}return t}},{key:"isEnabled",get:function(){return this._isEnabled}}]),e}();t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),s=i(r),o=n(1),a=i(o),u=n(2),l=i(u),c=function(){function e(){(0,a["default"])(this,e),this._translations={},this._lists={}}return(0,l["default"])(e,[{key:"pushTranslations",value:function(e){this._translations=(0,s["default"])({},this._translations,e)}},{key:"pushList",value:function(e){this._lists=(0,s["default"])({},this._lists,e)}},{key:"get",value:function(e){return this._translations[e]?this._translations[e]:e}},{key:"getList",value:function(e){return this._lists[e]?this._lists[e]:{}}},{key:"getListValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.getList(e);return i&&i[t]?i[t]:n}},{key:"italic",value:function(e){return String.prototype.replace.call(e,/Nespresso|<i>Nespresso<\/i>|<b>Nespresso<\/b>|<em>Nespresso<\/em>/,"<b>Nespresso</b>")}},{key:"removeP",value:function(e){return String.prototype.replace.call(String.prototype.replace.call(String.prototype.replace.call(e,"<p></p>","<br />"),"<p>",""),"</p>","")}},{key:"install",value:function(e){var t=this;e.prototype._=function(e){return t.get(e)},e.prototype._i=function(e){return t.italic(t.get(e))},e.prototype._rmP=function(e){return t.removeP(e)}}}]),e}();t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(167),s=i(r);t.install=function(e){e.directive("autosize",{bind:function(t){e.nextTick(function(){(0,s["default"])(t)})},update:function(t){e.nextTick(function(){s["default"].update(t)})},unbind:function(e){s["default"].destroy(e)}})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=i(o),u=n(5),l=i(u),c=n(59),d=c.Strophe,f=function(){function e(t){(0,s["default"])(this,e),t.on("xmpp.presence",this.handleInvitation.bind(this))}return(0,a["default"])(e,[{key:"handleInvitation",value:function(e,t,n,i){var r=d.getResourceFromJid(i.getAttribute("from")),s=d.getNodeFromJid(i.getAttribute("to"));if(r===s){var o=i.querySelector('x status[code="307"]'),a=i.querySelector('x status[code="301"]');if(o||a){var u=i.querySelector("x item reason");if(u&&"INVT:"===u.textContent.substr(0,5)){var c=d.getBareJidFromJid(u.textContent.substr(5));this.sendAccept(e,c);var f=i.querySelector("x item actor");f&&f.getAttribute("nick")?l["default"].dispatch("updateXmppSession",{operatorXid:c,operatorNick:f.getAttribute("nick")}):l["default"].dispatch("updateXmppSession",{operatorXid:c})}}}}},{key:"sendAccept",value:function(e,t){try{e.sendMessage({_attrs:{to:t,type:"chat"},invtd:{_attrs:{xmlns:"invitation:chat:ok"},_:"ok"}}),e.sendPresence({_attrs:{type:"subscribe",to:t}})}catch(n){}}}]),e}();t["default"]=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=i(o),u=n(5),l=i(u),c=function(){function e(t){(0,s["default"])(this,e),t.on("xmpp.message",this.handleMessage.bind(this))}return(0,a["default"])(e,[{key:"handleMessage",value:function(e,t,n,i,r,s){var o=i.querySelector("attachment"),a=i.getAttribute("id");o&&s&&l["default"].dispatch("receiveMessage",{id:a,message:s,attachment:{name:s,location:o?o.textContent:s},operator:{name:l["default"].state.xmppSession.operatorNick,picture:l["default"].state.xmppSession.operatorAvatar},read:!1})}}]),e}();t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=i(o),u=n(5),l=i(u),c=n(23),d=function(){function e(t){(0,s["default"])(this,e),t.on("xmpp.message",this.handleMessage.bind(this))}return(0,a["default"])(e,[{key:"handleMessage",value:function(e,t,n,i){if(l["default"].state.xmppSession.operatorXid&&l["default"].state.xmppSession.operatorXid!==t){var r=i.querySelector("chatTransfer");if(r){var s=i.querySelector("nick");if(!s)return;var o=s.textContent,a=null;e.sendPresence({_attrs:{type:"subscribe",to:t}});var u=i.querySelector("avatar");u&&(a=u.textContent),l["default"].dispatch("chatTransfered",{name:o,picture:a}),l["default"].dispatch("updateXmppSession",{operatorXid:t,operatorNick:o,operatorAvatar:a}),c.calleoChat.sendDatalayer(),window.setTimeout(function(){l["default"].dispatch("sendChatState","active")},2e3)}}}}]),e}();t["default"]=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=i(o),u=n(5),l=i(u),c=function(){function e(t){(0,s["default"])(this,e),t.on("xmpp.message",this.handleState.bind(this))}return(0,a["default"])(e,[{key:"handleState",value:function(e,t,n,i){i.querySelector("active")||i.querySelector("paused")||i.querySelector("inactive")?l["default"].dispatch("stopTyping"):i.querySelector("composing")&&l["default"].dispatch("startTyping",{name:l["default"].state.xmppSession.operatorNick,avatar:l["default"].state.xmppSession.operatorAvatar}),i.querySelector("x finish")&&l["default"].dispatch("closeChat",{source:"operator"})}}]),e}();t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=i(o),u=n(5),l=i(u),c=function(){function e(t){(0,s["default"])(this,e),t.on("xmpp.message",this.handleMessage.bind(this))}return(0,a["default"])(e,[{key:"handleMessage",value:function(e,t,n,i,r,s){if(("chat"===r||"normal"===r)&&s){var o=l["default"].state.xmppSession.operatorAvatar,a=i.querySelector("avatar"),u=i.getAttribute("id");a&&(o=a.textContent,l["default"].dispatch("updateXmppSession",{operatorAvatar:o})),l["default"].dispatch("receiveMessage",{id:u,message:s,operator:{name:l["default"].state.xmppSession.operatorNick,picture:o},read:!1})}}}]),e}();t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),s=i(r),o=n(1),a=i(o),u=n(2),l=i(u),c=n(5),d=i(c),f=n(59),h=f.Strophe,p="conference",m="unavailable",v="away",_="moderator",g="visitor",y=function(){function e(t){(0,a["default"])(this,e),this.operatorsInQueue=d["default"].state.xmppSession.operatorsInQueue||{},t.on("xmpp.presence",this.handlePresence.bind(this))}return(0,l["default"])(e,[{key:"handlePresence",value:function(e,t,n,i,r){if(t.indexOf(p)!==-1){var o=i.querySelector("x item");if(o){var a=o.getAttribute("role");if(a!==g){var u=i.querySelector("show"),l=h.getResourceFromJid(i.getAttribute("from")),c=Object.prototype.hasOwnProperty.call(this.operatorsInQueue,l),f=null;u&&(f=u.textContent),r===m||f===v?c&&(delete this.operatorsInQueue[l],d["default"].dispatch("updateXmppSession",{operatorsInQueue:(0,s["default"])({},this.operatorsInQueue)})):(a===_||0!==l.indexOf("livechat(")&&0!==l.indexOf("vchat("))&&(c||(this.operatorsInQueue[l]=1,d["default"].dispatch("updateXmppSession",{operatorsInQueue:(0,s["default"])({},this.operatorsInQueue)})))}}}}}]),e}();t["default"]=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=i(o),u=n(5),l=i(u),c=function(){function e(t){(0,s["default"])(this,e),t.on("xmpp.presence",this.handlePresence.bind(this))}return(0,a["default"])(e,[{key:"handlePresence",value:function(e,t,n,i,r){t===l["default"].state.xmppSession.operatorXid&&("unavailable"===r&&(l["default"].dispatch("disconnected"),e.sendMessage({_attrs:{to:t,type:"chat"},reloadRequestId:l["default"].state.request.id})),r&&"available"!==r&&"subscribe"!==r&&"subscribed"!==r||l["default"].state.disconnected&&(e.sendPresence({_attrs:{type:"subscribed",to:t}}),e.sendPresence({_attrs:{to:t,type:"available"},reloadRequestId:l["default"].state.request.id}),l["default"].dispatch("reconnected"))),"subscribe"===r?(e.sendPresence({_attrs:{type:"subscribed",to:t}}),e.sendPresence({_attrs:{type:"subscribe",to:t}})):"unsubscribe"===r&&t===l["default"].state.xmppSession.operatorXid}}]),e}();t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),s=i(r),o=n(44),a=i(o),u=n(120),l=i(u),c=n(1),d=i(c),f=n(2),h=i(f),p=n(5),m=i(p),v=n(23),_=n(59),g=_.Strophe,y="unavailable",b="conference",w="visitor",S=1e3,T=function(){function e(t){(0,d["default"])(this,e),this.customersInQueue=m["default"].state.xmppSession.customersInQueue?this._cloneQueue(m["default"].state.xmppSession.customersInQueue):{},t.on("xmpp.presence",this.handlePresencesMessage.bind(this)),this.nbBeforeMe=null,this._dispatcher=t,this._timeout=null}return(0,h["default"])(e,[{key:"handlePresencesMessage",value:function(e,t,n,i,r){var s=this;if(t.indexOf(b)!==-1){var o=g.getResourceFromJid(i.getAttribute("from")),a=g.getNodeFromJid(i.getAttribute("to"));if(o===a)return this.entryTime||(this.entryTime=(new Date).getTime()),void window.setTimeout(function(){null===s.nbBeforeMe&&s.updateQueueSize()},S);r===y?this.removeCustomerInQueue(o):this.pushCustomerInQueue(i,o),this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),this._timeout=window.setTimeout(function(){s.updateQueueSize()},null===this.nbBeforeMe?S:200)}}},{key:"pushCustomerInQueue",value:function(e,t){var n=e.querySelector("x item");if(n&&n.getAttribute("role")===w){var i={},r=!0;Object.prototype.hasOwnProperty.call(this.customersInQueue,t)&&(i=this.customersInQueue[t],r=!1);var s=e.querySelector("priority");s?i.priority=parseInt(s.textContent,10):r&&(i.priority=0);var o=e.querySelector("rqTime");o?i.rqTime=parseInt(o.textContent,10):r&&(i.rqTime=Math.ceil((new Date).getTime()/1e3)-m["default"].state.request.timeDiffServer),this.customersInQueue[t]=i}}},{key:"removeCustomerInQueue",value:function(e){return!!Object.prototype.hasOwnProperty.call(this.customersInQueue,e)&&(delete this.customersInQueue[e],!0)}},{key:"updateQueueSize",value:function(){var e=v.priorityWeight.getCurrentPriotiry(),t=0,n=(0,l["default"])(this.customersInQueue);n.forEach(function(n){var i=v.priorityWeight.computePriority(n.rqTime,n.priority);i>e&&t++}),this.nbBeforeMe=t,m["default"].dispatch("updateXmppSession",{customersInQueue:this._cloneQueue(this.customersInQueue)}),this._dispatcher.emit("livechat.queue-size",t,n.length+1,e),m["default"].dispatch("queueWaitingSize",t)}},{key:"_cloneQueue",value:function(e){var t={},n=(0,a["default"])(e);return n.forEach(function(n){var i=e[n];t[n]=(0,s["default"])({},i)}),t}}]),e}();t["default"]=T},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=i(r),o=n(2),a=i(o),u=n(5),l=i(u),c=function(){function e(t){(0,s["default"])(this,e),t.on("xmpp.receipts",this.handleReceipt.bind(this))}return(0,a["default"])(e,[{key:"handleReceipt",value:function(e){l["default"].dispatch("receiveReceipt",e)}}]),e}();t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(122),s=i(r),o=n(45),a=i(o),u=n(1),l=i(u),c=n(2),d=i(c),f=n(198),h=i(f),p=n(197),m=i(p),v=n(59),_=v.Strophe;n(313),(0,h["default"])(_),(0,m["default"])(_,v);var g=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,l["default"])(this,e),this._boshUrl=t,this._livechatHost=n,this._dispatcher=i,this._enableReceipts=s,this._connection=null,this._lastInfo=null,r&&(this._lastInfo={error:[],response:[],request:[],message:[]},this._lastInfoLimit={error:20,response:6,request:6,message:20})}return(0,d["default"])(e,[{key:"getLastInfo",value:function(e){return this._lastInfo[e].join("\n")}},{key:"clearLastInfo",value:function(e){this._lastInfo[e]=[]}},{key:"addLastInfo",value:function(e,t){this._lastInfo&&("object"===("undefined"==typeof t?"undefined":(0,a["default"])(t))&&null!==t&&(t="JSError: "+Error.prototype.toString.call(t)),this._lastInfo[e].push(t),this._lastInfo[e].length>this._lastInfoLimit[e]&&this._lastInfo[e].shift())}},{key:"_getConnection",value:function(){var e=this;if(!this._connection){_.warn=function(t){_.log(_.LogLevel.WARN,t),e.addLastInfo("error","Warn: "+t)},_.error=function(t){_.log(_.LogLevel.ERROR,t),e.addLastInfo("error","Error: "+t)},_.fatal=function(t){_.log(_.LogLevel.FATAL,t),e.addLastInfo("error","Fatal: "+t)};var t=new _.Connection(this._boshUrl,{keepalive:!0,mechanisms:[_.SASLAnonymous]});t.rawInput=function(t){e.addLastInfo("response",t)},t.rawOutput=function(t){e.addLastInfo("request",t)},this._connection=t}return this._connection}},{key:"startNewConnection",value:function(){var e=this._getConnection(),t="livechat("+(new Date).getTime()+"-"+Math.floor(1e3*Math.random())+")";e.connect(this._livechatHost+"/"+t,null,this._onConnect.bind(this),20,1,2),this._initPlugins()}},{key:"restoreConnection",value:function(){this._getConnection().restore(null,this._onConnect.bind(this),20,1,2)}},{key:"closeConnection",value:function(){this._connection&&(this._connection.disconnect(),this._connection=null)}},{key:"_initPlugins",value:function(){this._connection&&this._connection.receipts.init(this._connection)}},{key:"_onConnect",value:function(e){switch(e){case _.Status.CONNECTING:break;case _.Status.CONNFAIL:this._connection&&this._dispatcher.emit("xmpp.fail-connection",this);break;case _.Status.ERROR:this._dispatcher.emit("xmpp.error",this);break;case _.Status.DISCONNECTING:break;case _.Status.DISCONNECTED:this._dispatcher.emit("xmpp.disconnected");break;case _.Status.CONNECTED:this._registerHandler(),this._dispatcher.emit("xmpp.connected",this,this._connection.jid);break;case _.Status.ATTACHED:this._registerHandler(),this._dispatcher.emit("xmpp.attached",this,this._connection.jid)}}},{key:"_registerHandler",value:function(){this._connection.addHandler(this._onMessage.bind(this),null,"message"),this._connection.addHandler(this._onPresence.bind(this),null,"presence"),this._connection.addHandler(this._onIQ.bind(this),null,"iq"),this._connection.receipts.addReceiptHandler(this._onReceipt.bind(this))}},{key:"_onMessage",value:function(e){var t=_.getBareJidFromJid(e.getAttribute("to")),n=_.getBareJidFromJid(e.getAttribute("from")),i=e.getAttribute("type"),r=e.getElementsByTagName("body"),o=r.length?(0,s["default"])(_.getText(r.item(0))):null;return this._dispatcher.emit("xmpp.message",this,n,t,e,i,o),!0}},{key:"_onPresence",value:function(e){for(var t=_.getBareJidFromJid(e.getAttribute("to")),n=_.getBareJidFromJid(e.getAttribute("from")),i=e.getAttribute("type"),r=e.getElementsByTagName("item"),s=void 0,o=0;o<r.length&&!(s=r[o].getAttribute("role"));o++);return this._dispatcher.emit("xmpp.presence",this,n,t,e,i,s),!0}},{key:"_onIQ",value:function(e){var t=_.getBareJidFromJid(e.getAttribute("to")),n=_.getBareJidFromJid(e.getAttribute("from"));return this._dispatcher.emit("xmpp.iq",this,n,t,e),!0}},{key:"_onReceipt",value:function(e){return this._dispatcher.emit("xmpp.receipts",e),!0}},{key:"sendPresence",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._connection){var t=this.generateNodeFromObject("presence",e);this._connection.sendPresence(t.tree())}}},{key:"sendMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._connection){var n=this.generateNodeFromObject("message",e);return t&&this._enableReceipts?this._connection.receipts.sendMessage(n):this._connection.send(n.tree())}}},{key:"sendIQ",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._connection){var t=this.generateNodeFromObject("iq",e);this._connection.sendIQ(t.tree())}}},{key:"generateNodeFromObject",value:function(e,t){"string"==typeof e&&(e=new _.Builder(e));for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&("_attrs"===n?e.attrs(t[n]):"_"===n?e.t(t[n]):"string"==typeof t[n]||"number"==typeof t[n]?e.c(n,{},t[n]):(e.c(n),this.generateNodeFromObject(e,t[n]),e.up()));return e}},{key:"getExplodeJidData",value:function(e){return{jid:e,node:_.getNodeFromJid(e),bareJid:_.getBareJidFromJid(e),resource:_.getResourceFromJid(e)}}},{key:"hasConnection",get:function(){return Boolean(this._connection)}}]),e}();t["default"]=g},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(122),o=r(s),a=n(45),u=r(a),l=n(1),c=r(l),d=n(2),f=r(d),h=n(195),p=r(h),m=n(23),v=n(5),_=r(v),g=n(27),y=i(g),b=n(178),w=r(b),S=n(186),T=r(S),E=n(192),C=r(E),A=n(189),x=r(A),k=n(190),O=r(k),M=n(194),I=r(M),P=n(193),R=r(P),L=n(187),N=r(L),D=n(191),F=r(D),q=n(188),U=r(q),H=function(){function e(){(0,c["default"])(this,e),this._client=null,this._dispatcher=null,this._config=null,this._currentChatState=null,this._datalayerObserver=null,this._sendErrorTimeout=null}return(0,f["default"])(e,[{key:"initializeDependencies",value:function(e,t){this._config=e,this._dispatcher=t,this._datalayerObserver=new w["default"](m.datalayer,t),this._registerBehaviors()}},{key:"startChat",value:function(){this.client.startNewConnection()}},{key:"restoreChat",value:function(){try{this.client.restoreConnection()}catch(e){this._client&&this._client.addLastInfo("error",e),this.sendError("restoreChat"),_["default"].dispatch("cancelRequest",{source:"restore"})}}},{key:"finishChat",value:function(){this._client&&this._client.closeConnection(),_["default"].dispatch("updateXmppSession",{node:null,bareJid:null,resource:null,chatState:null,operatorXid:null,operatorNick:null,operatorAvatar:null,operatorsInQueue:null})}},{key:"updateProfile",value:function(){this._nickName=null,this.sendVCard(),_["default"].state.xmppSession.operatorXid&&this.client.sendPresence({_attrs:{to:_["default"].state.xmppSession.operatorXid},updateProfile:1,requestId:_["default"].state.request.id})}},{key:"sendVCard",value:function(){var e=this.nickname;this.client.sendIQ({_attrs:{type:"set"},vCard:{_attrs:{xmlns:"vcard-temp"},FN:e,NICKNAME:e,URL:""+_["default"].state.request.id}})}},{key:"sendChatState",value:function(e){if(this._currentChatState!==e&&_["default"].state.xmppSession.operatorXid){var t={_attrs:{type:"chat",to:_["default"].state.xmppSession.operatorXid},requestId:_["default"].state.request.id};t[e]={_attrs:{xmlns:"http://jabber.org/protocol/chatstates"}},this.client.sendMessage(t),this._currentChatState=e}}},{key:"sendMessage",value:function(e){if(_["default"].state.xmppSession.operatorXid)return this._currentChatState=null,this.client.sendMessage({_attrs:{type:"chat",to:_["default"].state.xmppSession.operatorXid},body:e,requestId:_["default"].state.request.id,active:{_attrs:{xmlns:"http://jabber.org/protocol/chatstates"}}},!0)}},{key:"sendAttachment",value:function(e,t){_["default"].state.xmppSession.operatorXid&&this.client.sendMessage({_attrs:{type:"attachment",to:_["default"].state.xmppSession.operatorXid},body:e,requestId:_["default"].state.request.id,attachment:t,active:{_attrs:{xmlns:"http://jabber.org/protocol/chatstates"}}},!1)}},{key:"_registerBehaviors",value:function(){var e=this;this._dispatcher.on("xmpp.connected",function(t,n){_["default"].dispatch("apiErrorFinish");var i=_["default"].state.request;m.communicator.registerJid(n,i.id);var r=t.getExplodeJidData(n);_["default"].dispatch("updateXmppSession",r),t.sendPresence();var s=m.priorityWeight.computeStaticPriority();_["default"].dispatch("updateRequestData",{priority:m.priorityWeight.computeStaticPriority()});var o={_attrs:{to:i.marketId+"_"+i.replyLang+"@conference."+e._config.livechatHost+"/"+r.node},x:{_attrs:{xmlns:"http://jabber.org/protocol/muc"},history:{_attrs:{maxstanzas:0,seconds:0}}},country:""+i.country,category:""+i.categoryId,requestId:""+i.id,priority:""+s,rqTime:""+i.rqTime};_["default"].state.messages.length>0&&_["default"].state.settings.only_on_response&&"welcome"===_["default"].state.messages[0].rel&&(o.welcomeMsg=_["default"].state.messages[0].message),t.sendPresence(o),e.updateProfile(),e._datalayerObserver.startDatalayerObserve()}),this._dispatcher.on("xmpp.attached",function(){_["default"].state.workflow===y.WORKFLOW_CHAT&&_["default"].state.xmppSession.operatorXid&&e.sendDatalayer()}),this._dispatcher.on("xmpp.fail-connection",function(){e.sendError("xmpp.fail-connection"),_["default"].dispatch("apiError","XMPP fail connection"),window.setTimeout(function(){_["default"].dispatch("restoreChat")},2e4)}),this._dispatcher.on("xmpp.error",function(){e.sendError("xmpp.error")}),this._dispatcher.on("xmpp.disconnected",function(){_["default"].state.workflow!==y.WORKFLOW_QUEUE&&_["default"].state.workflow!==y.WORKFLOW_CHAT||(e.sendError("xmpp.disconnected"),_["default"].dispatch("apiError","XMPP Disconnected")),e._datalayerObserver.stopDatalayerObserve()}),this._dispatcher.on("datalayer.change",function(t){e.sendDatalayer(t)}),new T["default"](this._dispatcher),new C["default"](this._dispatcher),new x["default"](this._dispatcher),new U["default"](this._dispatcher),new O["default"](this._dispatcher),new I["default"](this._dispatcher),new R["default"](this._dispatcher),new N["default"](this._dispatcher),new F["default"](this._dispatcher)}},{key:"sendDatalayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_["default"].state.workflow===y.WORKFLOW_CHAT&&_["default"].state.xmppSession.operatorXid&&(e||(e=this._datalayerObserver.startDatalayerObserve()),this.client.sendPresence({_attrs:{to:_["default"].state.xmppSession.operatorXid},datalayer:e,rqpriority:_["default"].state.request.priority,rqdelay:Math.round((_["default"].state.request.rqTakeAt-_["default"].state.request.rqStartAt)/1e3)}))}},{key:"sendError",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._config&&this._config.apiSettings.sendError&&(n||null===this._client?this._sendError(e,n||{}):(this._client.addLastInfo("message",e),this._sendErrorTimeout&&(window.clearTimeout(this._sendErrorTimeout),this._sendErrorTimeout=null),this._sendErrorTimeout=window.setTimeout(function(){t._sendErrorTimeout=null,t._sendError(e)},5e3)))}},{key:"_sendError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"object"===("undefined"==typeof e?"undefined":(0,u["default"])(e))&&null!==e&&(e="JSError: "+Error.prototype.toString.call(e)),this._client&&(t.lastMessage=this._client.getLastInfo("message"),t.lastResponse=this._client.getLastInfo("response"),t.lastRequest=this._client.getLastInfo("request"),t.lastError=this._client.getLastInfo("error")),m.communicator.sendErrorToServer(e,t,n),this._client&&this._client.clearLastInfo("message")}},{key:"client",get:function(){var e=this;return!this._client&&this._config&&this._dispatcher&&(this._client=new p["default"](this._config.url.bosh,this._config.livechatHost,this._dispatcher,this._config.apiSettings.sendError,this._config.apiSettings.enabled_receipts),this._config.apiSettings.sendError&&window.addEventListener("beforeunload",function(){e._sendErrorTimeout&&(window.clearTimeout(e._sendErrorTimeout),e._sendErrorTimeout=null,e._sendError("beforeunload",{},!0))})),this._client}},{key:"nickname",get:function(){if(!this._nickName){var e=void 0,t=_["default"].state.profile;t&&t.firstName&&(e=(0,o["default"])(t.firstName+" "+t.lastName)),e||(e=m.translator.get("livechat.anonymous_nickname")),this._nickName=e}return this._nickName}},{key:"isConnected",get:function(){return this._client&&this._client._connection.hasConnection}}]),e}();t["default"]=H},function(e,t){"use strict";function n(e,t){e.addConnectionPlugin("receipts",{_conn:null,_msgQueue:{},_retries:{},_resendCount:5,_resendTime:9e3,init:function(t){this._conn=t,e.addNamespace("RECEIPTS","urn:xmpp:receipts")},sendMessage:function(t){var n=this._conn.getUniqueId();t.tree().setAttribute("id",n);var i=e.xmlElement("request",{xmlns:e.NS.RECEIPTS});return t.tree().appendChild(i),this._msgQueue[n]=t,this._retries[n]=0,this._conn.send(t),this.resendMessage(n),n},resendMessage:function(e){var t=this;setTimeout(function(){if(t._msgQueue[e]){if(!t._conn.connected)return void t.resendMessage(e);if(t._retries[e]++,t._retries[e]>t._resendCount)return;t._msgQueue[e].tree().setAttribute("from",t._conn.jid),t._conn.send(t._msgQueue[e]),t.resendMessage(e)}},this._resendTime)},_processReceipt:function(n){var i=n.getAttribute("id"),r=n.getAttribute("from"),s=n.getElementsByTagName("request"),o=n.getElementsByTagName("received");if(s.length>0){var a=t.$msg({to:r,from:this._conn.jid,id:this._conn.getUniqueId()}),u=e.xmlElement("received",{xmlns:e.NS.RECEIPTS,id:i});a.tree().appendChild(u),this._conn.send(a)}if(o.length>0){var l=o[0].getAttribute("id");l&&(delete this._msgQueue[l],delete this._retries[l])}},resendQueue:function(){if(!this._conn.connected){var e=this;return void setTimeout(function(){e.resendQueue()},5e3)}for(var t in this._msgQueue)Object.prototype.hasOwnProperty.call(this._msgQueue,t)&&this._conn.send(this._msgQueue[t])},addReceiptHandler:function(t,n,i,r){var s=this,o=function(e){return s._processReceipt(e),t(e)};this._conn.addHandler(o,e.NS.RECEIPTS,"message",n,null,i,r)},statusChanged:function(t){if(t===e.Status.CONNECTED||t===e.Status.ATTACHED){var n=this;setTimeout(function(){n.resendQueue()},5e3)}},getUnreceivedMsgs:function(){var e=[];for(var t in this._msgQueue)Object.prototype.hasOwnProperty.call(this._msgQueue,t)&&e.push(this._msgQueue[t]);return e},clearMessages:function(){this._msgQueue={}}})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t){"use strict";function n(){var e=this,t=new XDomainRequest;this.xhr=t,this.open=function(){try{e.readyState=1,t.open.apply(t,arguments)}catch(n){throw n}},this.send=function(){e.readyState=2,t.send.apply(t,arguments)},this.abort=function(){e.readyState=4,t.abort.apply(t,arguments)},this.onreadystatechange=function(){},this.setRequestHeader=function(){},this.readyState=0,t.onerror=function(){e.readyState=4,e.status=500,e.onreadystatechange()},t.onload=function(){var n=new DOMParser;e.readyState=4,e.responseText=t.responseText,e.timeout=t.timeout,e.contentType=t.contentType,e.constructor=t.constructor;try{e.responseXML=n.parseFromString(t.responseText,"application/xml"),e.status=200}catch(i){e.status=406}e.onreadystatechange()},t.ontimeout=function(){e.readyState=4,e.status=408,e.onreadystatechange()},t.onprogress=function(){e.readyState=3},this.getAllResponseHeaders=function(){return t.getAllResponseHeaders?t.getAllResponseHeaders():""}}function i(e){e.addConnectionPlugin("xdomain",{init:function(){e.Request.prototype._newXHR=function(){var e=null;return window.XMLHttpRequest?(e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml; charset=utf-8"),"withCredentials"in e||!window.XDomainRequest||(e=new n)):window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e.onreadystatechange=this.func.bind(null,this),e}}})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(126),o=r(s),a=n(44),u=r(a),l=n(12),c=r(l),d=n(43),f=r(d),h=n(73),p=r(h),m=n(74),v=n(185),_=r(v),g=n(5),y=r(g),b=n(41),w=i(b),S=n(27),T=i(S),E=n(42),C=r(E),A=n(79),x=r(A),k=n(319),O=r(k),M=n(318),I=r(M),P=n(320),R=r(P),L=n(327),N=r(L);p["default"].use(_["default"]),t["default"]={name:"Chat",components:{FormRating:O["default"],FormProfile:I["default"],Messages:R["default"],Dropzone:N["default"]},store:y["default"],data:function(){return{currentIcon:null,currentTitle:null,switchIcon:null,canUpdateProfile:null,canUploadFiles:null,processingUploadFiles:!1,displayAnimation:!1,animationSupported:C["default"].hasCssAnimationSupport()&&x["default"].getInternetExplorerVersion(100)>11,useSpacerOnScrollZone:x["default"].getInternetExplorerVersion(100)<=11,dropzoneOptions:{url:f["default"].url.api+"/api/livechat/attach-file",addRemoveLinks:!0,withCredentials:!0,dictCancelUpload:"",dictUploadCanceled:"",acceptedFiles:f["default"].acceptedFiles,maxFilesize:f["default"].maxFilesize,maxFiles:1,dictDefaultMessage:"",dictFallbackMessage:"",dictFallbackText:"",headers:{"Cache-Control":null},fallback:function(){var e=C["default"].create("<div/>").firstChild;C["default"].addClass(this.element,"dz-browser-not-supported"),C["default"].addClass(e,"dz-message"),C["default"].html(this.element,e)},params:function(){return{srjid:y["default"].state.xmppSession.jid,requestId:y["default"].state.request.id,language:window._calleoChat?window._calleoChat.language:null}}}}},computed:(0,c["default"])({},(0,m.mapGetters)(["config","settings","workflow","message","display","vueMessage","vueWait","vueProfile","vueRating","vueSendTranscript","vueUpload","vueRegister","profile","list","isEditingProfile","transcriptSent","messagesUnread","hide","close","disconnected","waitingQueueSize","apiError"]),{displayClass:function(){var e="";return e+=this.displayAnimation&&this.animationSupported?"is-animation":"is-no-animation",e+=" "+(this.display===T.DISPLAY_COLLAPSE?"nlc-collapse":"nlc-expand")}}),methods:{getImagePath:function(e){return f["default"].frontBaseUrl+"/apps/calleo-livechat/img/"+e},updateProfile:function(){this.formIsValid()&&y["default"].dispatch("updateProfile")},revertProfileTmp:function(){y["default"].commit(w.REVERT_PROFILE_TMP)},markMessageHasRead:function(){y["default"].commit(w.MARK_HAS_READ)},onResizeTextArea:function(){var e=this.$refs.mainScrollable;if(e){var t="0px",n=this.$refs.textArea.offsetHeight-37;if(n>0){var i=e.scrollHeight-e.scrollTop-20<=e.offsetHeight;
t=n+"px",i&&(e.scrollTop=e.scrollHeight+5)}this.useSpacerOnScrollZone?this.$refs.mainScrollable.querySelector("#nlc-spacer-on-scroll-zone").style.height=t:e.style.paddingBottom=t}},updateMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";y["default"].commit(w.UPDATE_MESSAGE,e),""===y["default"].state.message.trim()?y["default"].dispatch("sendChatState","active"):y["default"].dispatch("sendChatState","composing")},updateMessageDelay:function(e){var t=this,n=e?e.target.value:"";this.delayUpdateMessage&&(window.clearTimeout(this.delayUpdateMessage),this.delayUpdateMessage=null),y["default"].state.message!==n&&(""===y["default"].state.message||Math.abs(y["default"].state.message.length-n.length)>10?this.updateMessage(n):this.delayUpdateMessage=window.setTimeout(function(){t.updateMessage(n)},500))},addReturn:function(e){e.stopPropagation(),e.preventDefault(),e.target.value+="\n"},sendMessage:function(e){if(13===e.keyCode&&e.shiftKey)return this.addReturn(e);var t=this.$refs.textArea.value||y["default"].state.message;if(""!==t.trim()){this.message="",this.delayUpdateMessage&&(window.clearTimeout(this.delayUpdateMessage),this.delayUpdateMessage=null),y["default"].dispatch("start"),y["default"].dispatch("sendMessage",t),y["default"].commit(w.UPDATE_MESSAGE,"");var n=this.$refs.textArea;n&&n.focus&&p["default"].nextTick(function(){n.focus()}),this.workflow===T.WORKFLOW_NOT_STARTED&&(y["default"].commit(w.UPDATE_WORKFLOW,T.WORKFLOW_QUEUE),this.switchVue("wait"))}},messageScroll:function(){var e=this,t=this.$refs.mainScrollable;if(this.vueMessage!==!1&&t&&this.display!==T.DISPLAY_COLLAPSE){var n=y["default"].state.messages.findIndex(function(e){return e.read===!1});n<0&&(n=y["default"].state.messages.length-1),p["default"].nextTick(function(){var i=t.querySelector("li:nth-child("+n+")");t.scrollTop=i?i.offsetTop:t.scrollHeight,e.markMessageHasRead()})}},scrollTop:function(){var e=this.$refs.mainScrollable;e&&p["default"].nextTick(function(){e.scrollTop=0})},showCloseBt:function(){if(this.display===T.DISPLAY_COLLAPSE)return!1;switch(this.workflow){case T.WORKFLOW_TRANSCRIPT:case T.WORKFLOW_TRANSCRIPT_SENT:case T.WORKFLOW_CHAT:case T.WORKFLOW_RATING:return!0;default:return!1}},closeChat:function(){this.workflow===T.WORKFLOW_CHAT?this.rateChat():this.resetChat()},getCloseBtTitle:function(){return this.workflow===T.WORKFLOW_CHAT?"livechat.finish_chat":"livechat.close_chat_window"},cancelRequest:function(){this.collapse(),y["default"].dispatch("cancelRequest",{source:"cancel"})},rateChat:function(){y["default"].dispatch("closeChat",{source:"close"})},switchVue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=this.vueWait===!0||this.vueMessage===!0||this.vueSendTranscript===!0?"profile":"message");var t=!1,n=!1,i=!1,r=!1,s=!1,o=!1,a=!1;switch(e){case"wait":t=!0;break;case"message":n=!0;break;case"profile":i=!0;break;case"rating":r=!0;break;case"sendTranscript":s=!0;break;case"upload":n=!0,o=!0;break;default:n=!0}this.workflow===T.WORKFLOW_RATING&&n&&(n=!1,r=!0),this.workflow===T.WORKFLOW_TRANSCRIPT&&n&&(n=!1,s=!0),y["default"].commit(w.UPDATE_VIEW,{vueWait:t,vueMessage:n,vueProfile:i,vueRating:r,vueSendTranscript:s,vueUpload:o,vueRegister:a}),this.updateTitleBar(),this.setBodyClass()},updateTitleBar:function(){var e=f["default"].frontBaseUrl+"/apps/calleo-livechat/img/";this.workflow===T.WORKFLOW_DISABLED?(this.currentIcon=e+"icon-chat.svg",this.currentTitle=this._("livechat.website_title"),this.switchIcon=null):this.vueMessage?(this.currentIcon=e+"icon-chat.svg",this.currentTitle=this._("livechat.website_title"),this.switchIcon=e+"icon-user-small.svg"):this.vueSendTranscript?(this.currentIcon=e+"icon-chat.svg",this.currentTitle=this._("livechat.website_title"),this.switchIcon=e+"icon-user-small.svg"):this.vueProfile?(this.currentIcon=e+"icon-user.svg",this.currentTitle=this._("js_livechat.profile.title"),this.switchIcon=e+"icon-chat-small.svg"):this.vueRating?(this.currentIcon=e+"icon-star.svg",this.currentTitle=this._("livechat.rating.title"),this.switchIcon=null):this.vueWait?(this.currentIcon=e+"icon-chat.svg",this.currentTitle=this._("livechat.website_title"),this.switchIcon=null):this.vueRegister&&(this.currentIcon=e+"icon-chat.svg",this.currentTitle=this._("livechat.website_title"),this.switchIcon=null),this.processAllowActions()},processAllowActions:function(){this.canUpdateProfile=!(this.vueRating||this.vueWait||this.vueRegister||this.workflow===T.WORKFLOW_DISABLED||this.workflow===T.WORKFLOW_TRANSCRIPT_SENT||this.display===T.DISPLAY_COLLAPSE),this.canUploadFiles=this.canUpdateProfile&&this.workflow===T.WORKFLOW_CHAT&&f["default"].apiSettings.enabled_upload},expand:function(){var e=this;this.display!==T.DISPLAY_EXPAND&&(y["default"].dispatch("expandChat"),this.setBodyClass(),p["default"].nextTick(function(){var t=e.$refs.textArea;t&&t.focus&&t.focus()}))},collapse:function(){this.display!==T.DISPLAY_COLLAPSE&&(y["default"].commit(w.UPDATE_DISPLAY,T.DISPLAY_COLLAPSE),this.setBodyClass())},setBodyClass:function(){this.display===T.DISPLAY_EXPAND?(C["default"].addClass(document.body,"livechat-expanded"),C["default"].removeClass(document.body,"livechat-collapsed")):(C["default"].addClass(document.body,"livechat-collapsed"),C["default"].removeClass(document.body,"livechat-expanded"))},changeDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.displayAnimation=!0,e&&this.switchVue("message"),e||this.display===T.DISPLAY_COLLAPSE?this.expand():this.collapse()},changeDisplayCollapse:function(){this.displayAnimation=!0,this.display===T.DISPLAY_COLLAPSE&&this.expand()},resetChat:function(){y["default"].dispatch("cancelRequest",{source:"reset"})},formIsValid:function(){var e=Array.prototype.slice.call(this.$el.querySelectorAll("input, select, textarea, radio, checkbox")),t=e.find(function(e){return!e.validity||e.validity.valid===!1});return!t||!t.reportValidity||t.reportValidity()},isFeedbackValid:function(){return y["default"].state.rating.delay&&y["default"].state.rating.quality&&y["default"].state.rating.satisfaction},isInSendTranscript:function(){return this.workflow===T.WORKFLOW_TRANSCRIPT},sendFeedback:function(){this.formIsValid()&&this.isFeedbackValid()&&(y["default"].commit(w.UPDATE_WORKFLOW,T.WORKFLOW_TRANSCRIPT),this.switchVue("sendTranscript"),y["default"].dispatch("sendRating"))},sendTranscript:function(){y["default"].dispatch("sendTranscript"),this.updateTitleBar()},clientStopTyping:function(){""===y["default"].state.message.trim()?y["default"].dispatch("sendChatState","inactive"):y["default"].dispatch("sendChatState","paused")},getWaitingMessage:function(){if(null===this.waitingQueueSize)return this._("livechat.waiting_welcome");var e=this._("livechat.waiting_welcome_information"),t=(0,u["default"])(y["default"].state.xmppSession.operatorsInQueue||{}).length,n=(this.waitingQueueSize+1)*Number(this.settings.avg_waiting_time||0);return this._("livechat.waiting_welcome")+" "+e.replace("{$$customer$$}",this.waitingQueueSize).replace("{$$seconds$$}",n).replace("{$$operator$$}",t)},displayMain:function(){return this.workflow!==T.WORKFLOW_DISABLED},focus:function(){this.markMessageHasRead(),""===y["default"].state.message.trim()?y["default"].dispatch("sendChatState","active"):y["default"].dispatch("sendChatState","composing")},getEditProfileResetClass:function(){return this.isEditingProfile&&this.workflow!==T.WORKFLOW_TRANSCRIPT_SENT?"":"is-disabled"},getEditProfileSaveClass:function(){var e=y["default"].state.profileTmp;return!this.isEditingProfile&&this.workflow!==T.WORKFLOW_NOT_STARTED&&this.workflow!==T.WORKFLOW_TRANSCRIPT||this.workflow===T.WORKFLOW_TRANSCRIPT_SENT||!e.legalTerms||!e.title&&f["default"].marketHasTitle||!String.prototype.trim.call(e.firstName)||!String.prototype.trim.call(e.lastName)?"is-disabled":""},setProcessingUploadFiles:function(e){e?C["default"].addClass(this.$refs.dropzone.$el,"is-disabled"):C["default"].removeClass(this.$refs.dropzone.$el,"is-disabled"),this.processingUploadFiles=e},dropzoneMounted:function(){this.$refs.dropzone.setOption("dictDefaultMessage",this._("livechat.upload")),this.$refs.dropzone.setOption("dictFallbackMessage",this._("livechat.upload_browser_support")),this.$refs.dropzone.setOption("dictFileTooBig",this._("livechat.upload_file_too_big")),this.$refs.dropzone.setOption("dictInvalidFileType",this._("livechat.upload_invalid_file_type")),this.$refs.dropzone.setOption("dictResponseError",this._("livechat.upload_response_error")),this.$refs.dropzone.setOption("dictRemoveFile",this._("livechat.upload_remove_file")),this.$refs.dropzone.setOption("dictMaxFilesExceeded",this._("livechat.upload_max_files_exceeded"));var e=this.$refs.dropzone.$el.getElementsByTagName("div"),t=(0,o["default"])(e,1),n=t[0];C["default"].hasClass(this.$refs.dropzone.$el,"dz-browser-not-supported")?C["default"].text(n,this._("livechat.upload_browser_support")):C["default"].text(n,this._("livechat.upload"))},dropzoneMaxFilesExceeded:function(e){this.$refs.dropzone.removeAllFiles(),this.$refs.dropzone.dropzone.addFile(e)},dropzoneSending:function(){this.setProcessingUploadFiles(!0)},dropzoneSuccess:function(e,t){"success"===e.status&&t.success&&t.attachments&&t.attachments.forEach(function(e){y["default"].dispatch("sendAttachment",{name:e.name,location:e.location})})},dropzoneComplete:function(e){"success"===e.status&&this.switchVue("message"),this.setProcessingUploadFiles(!1)}},watch:{display:function(){this.updateTitleBar(),this.messageScroll()},vueProfile:function(){this.updateTitleBar()},vueUpload:function(){this.messageScroll()},vueWait:function(){this.updateTitleBar()},vueMessage:function(){this.messageScroll(),this.updateTitleBar()},vueRating:function(){this.scrollTop()}},beforeMount:function(){y["default"].state.profileTmp||y["default"].commit(w.REVERT_PROFILE_TMP)},mounted:function(){var e=this;this.messageScroll(),this.updateTitleBar();var t=null;this.onWindowResizeClb=function(){t&&(window.clearTimeout(t),t=null),t=window.setTimeout(function(){e.messageScroll()},300)},window.addEventListener("resize",this.onWindowResizeClb),this.setBodyClass()},destroyed:function(){this.onWindowResizeClb&&(window.removeEventListener("resize",this.onWindowResizeClb),this.onWindowResizeClb=null)}}},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(12),o=r(s),a=n(73),u=r(a),l=n(5),c=r(l),d=n(74),f=n(41),h=i(f);t["default"]={name:"FormProfile",store:c["default"],computed:(0,o["default"])({},(0,d.mapGetters)(["config","list","profileTmp","profileError","request"]),{title:{get:function(){return this.profileTmp.title},set:function(e){c["default"].commit(h.UPDATE_PROFILE_TMP,{title:e})}},firstName:{get:function(){return this.profileTmp.firstName},set:function(e){c["default"].commit(h.UPDATE_PROFILE_TMP,{firstName:e})}},lastName:{get:function(){return this.profileTmp.lastName},set:function(e){c["default"].commit(h.UPDATE_PROFILE_TMP,{lastName:e})}},email:{get:function(){return this.profileTmp.email},set:function(e){c["default"].commit(h.UPDATE_PROFILE_TMP,{email:e})}},legalTerms:{get:function(){return this.profileTmp.legalTerms},set:function(e){c["default"].commit(h.UPDATE_PROFILE_TMP,{legalTerms:e})}}}),methods:{formatErrorMessage:function(e){var t=document.getElementById(e.field);if(t&&t.getAttribute("placeholder")){var n=t.getAttribute("placeholder")+": ";return n+": "+e.error}return""+e.error},focus:function(e){var t=document.getElementById(e);t&&u["default"].nextTick(function(){t.focus()})}},watch:{profileError:function(e){e.forEach(function(e){var t=document.getElementById(e.field);t&&t.setAttribute("aria-invalid","true")})}}}},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(5),o=r(s),a=n(41),u=i(a),l=n(321),c=r(l);t["default"]={name:"FormRating",components:{StarRating:c["default"]},props:["config","list"],computed:{delay:{get:function(){return o["default"].state.rating.delay},set:function(e){o["default"].commit(u.UPDATE_RATING,{delay:e})}},quality:{get:function(){return o["default"].state.rating.quality},set:function(e){o["default"].commit(u.UPDATE_RATING,{quality:e})}},satisfaction:{get:function(){return o["default"].state.rating.satisfaction},set:function(e){o["default"].commit(u.UPDATE_RATING,{satisfaction:e})}},comment:{get:function(){return o["default"].state.rating.comment},set:function(e){o["default"].commit(u.UPDATE_RATING,{comment:e})}}},methods:{updateDelay:function(e){this.delay=e.value},updateQuality:function(e){this.quality=e.value}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),s=i(r),o=n(43),a=i(o),u=n(5),l=i(u),c=n(79),d=i(c),f=n(74);t["default"]={name:"Messages",computed:(0,s["default"])({},(0,f.mapGetters)(["isTyping","messages","message"])),props:["config","list"],methods:{getAvatar:function(e){var t=e&&e.picture?e.picture:a["default"].defaultOperatorAvatarPath;return""+a["default"].frontBaseUrl+t},isReceiptEnable:function(){return a["default"].apiSettings.enabled_receipts},formatTime:function(e){return d["default"].formatTime(new Date(e),a["default"].apiSettings.time_format)},formatMessage:function(e){var t=12===parseInt(a["default"].apiSettings.time_format,10)?13:9;return e+" "+Array(t).join("&nbsp;")},downloadAttachment:function(e){e&&l["default"].dispatch("downloadAttachment",e)},getImagePath:function(e){return a["default"].frontBaseUrl+"/apps/calleo-livechat/img/"+e}},watch:{isTyping:function(){this.$emit("newMessage")},messages:function(){this.$emit("newMessage")}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"StarRating",props:["name","defval","list"],data:function(){return{value:this.defval}},methods:{classRating:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"nlc-"+(t?"label-":"")+(this.list.length-e+1)}},watch:{value:{handler:function(e){this.$emit("update",{name:name,value:e})},deep:!0}}}},function(e,t,n){e.exports={"default":n(215),__esModule:!0}},function(e,t,n){e.exports={"default":n(217),__esModule:!0}},function(e,t,n){e.exports={"default":n(219),__esModule:!0}},function(e,t,n){e.exports={"default":n(220),__esModule:!0}},function(e,t,n){e.exports={"default":n(221),__esModule:!0}},function(e,t,n){e.exports={"default":n(223),__esModule:!0}},function(e,t,n){e.exports={"default":n(224),__esModule:!0}},function(e,t,n){e.exports={"default":n(227),__esModule:!0}},function(e,t,n){e.exports={"default":n(231),__esModule:!0}},function(e,t,n){e.exports={"default":n(232),__esModule:!0}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(119),s=i(r);t["default"]=function(e,t,n){return t in e?(0,s["default"])(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){n(33),n(260),e.exports=n(3).Array.from},function(e,t,n){n(53),n(33),e.exports=n(258)},function(e,t,n){n(53),n(33),e.exports=n(259)},function(e,t,n){var i=n(3),r=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},function(e,t,n){n(99),n(33),n(53),n(262),n(275),n(274),n(273),e.exports=n(3).Map},function(e,t,n){n(263),e.exports=n(3).Object.assign},function(e,t,n){n(264);var i=n(3).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){n(265);var i=n(3).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){n(276),e.exports=n(3).Object.entries},function(e,t,n){n(266);var i=n(3).Object;e.exports=function(e,t){return i.getOwnPropertyDescriptor(e,t)}},function(e,t,n){n(267),e.exports=n(3).Object.getPrototypeOf},function(e,t,n){n(268),e.exports=n(3).Object.keys},function(e,t,n){n(269),e.exports=n(3).Object.setPrototypeOf},function(e,t,n){n(277),e.exports=n(3).Object.values},function(e,t,n){n(99),n(33),n(53),n(270),n(278),n(279),e.exports=n(3).Promise},function(e,t,n){n(271),e.exports=n(3).String.trim},function(e,t,n){n(272),n(99),n(280),n(281),e.exports=n(3).Symbol},function(e,t,n){n(33),n(53),e.exports=n(97).f("iterator")},function(e,t){e.exports=function(){}},function(e,t,n){var i=n(48);e.exports=function(e,t){var n=[];return i(e,!1,n.push,n,t),n}},function(e,t,n){var i=n(26),r=n(69),s=n(256);e.exports=function(e){return function(t,n,o){var a,u=i(t),l=r(u.length),c=s(o,l);if(e&&n!=n){for(;l>c;)if(a=u[c++],a!=a)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var i=n(21),r=n(84),s=n(32),o=n(69),a=n(238);e.exports=function(e,t){var n=1==e,u=2==e,l=3==e,c=4==e,d=6==e,f=5==e||d,h=t||a;return function(t,a,p){for(var m,v,_=s(t),g=r(_),y=i(a,p,3),b=o(g.length),w=0,S=n?h(t,b):u?h(t,0):void 0;b>w;w++)if((f||w in g)&&(m=g[w],v=y(m,w,_),e))if(n)S[w]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:S.push(m)}else if(c)return!1;return d?-1:l||c?c:S}}},function(e,t,n){var i=n(15),r=n(131),s=n(10)("species");e.exports=function(e){var t;return r(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&(t=t[s],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,n){var i=n(237);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,n){"use strict";var i=n(16).f,r=n(68),s=n(91),o=n(21),a=n(81),u=n(48),l=n(85),c=n(134),d=n(142),f=n(18),h=n(86).fastKey,p=n(145),m=f?"_s":"size",v=function(e,t){var n,i=h(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var c=e(function(e,i){a(e,c,t,"_i"),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=i&&u(i,n,e[l],e)});return s(c.prototype,{clear:function(){for(var e=p(this,t),n=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];e._f=e._l=void 0,e[m]=0},"delete":function(e){var n=p(this,t),i=v(n,e);if(i){var r=i.n,s=i.p;delete n._i[i.i],i.r=!0,s&&(s.n=r),r&&(r.p=s),n._f==i&&(n._f=r),n._l==i&&(n._l=s),n[m]--}return!!i},forEach:function(e){p(this,t);for(var n,i=o(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(p(this,t),e)}}),f&&i(c.prototype,"size",{get:function(){return p(this,t)[m]}}),c},def:function(e,t,n){var i,r,s=v(e,t);return s?s.v=n:(e._l=s={i:r=h(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=s),i&&(i.n=s),e[m]++,"F"!==r&&(e._i[r]=s)),e},getEntry:v,setStrong:function(e,t,n){l(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?c(0,n.k):"values"==t?c(0,n.v):c(0,[n.k,n.v]):(e._t=void 0,c(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){var i=n(66),r=n(234);e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},function(e,t,n){"use strict";var i=n(9),r=n(6),s=n(86),o=n(24),a=n(25),u=n(91),l=n(48),c=n(81),d=n(15),f=n(52),h=n(16).f,p=n(236)(0),m=n(18);e.exports=function(e,t,n,v,_,g){var y=i[e],b=y,w=_?"set":"add",S=b&&b.prototype,T={};return m&&"function"==typeof b&&(g||S.forEach&&!o(function(){(new b).entries().next()}))?(b=t(function(t,n){c(t,b,e,"_c"),t._c=new y,void 0!=n&&l(n,_,t[w],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in S&&(!g||"clear"!=e)&&a(b.prototype,e,function(n,i){if(c(this,b,e),!t&&g&&!d(n))return"get"==e&&void 0;var r=this._c[e](0===n?0:n,i);return t?this:r})}),g||h(b.prototype,"size",{get:function(){return this._c.size}})):(b=v.getConstructor(t,e,_,w),u(b.prototype,n),s.NEED=!0),f(b,e),T[e]=b,r(r.G+r.W+r.F,T),g||v.setStrong(b,e,_),b}},function(e,t,n){"use strict";var i=n(16),r=n(51);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){var i=n(31),r=n(89),s=n(50);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var o,a=n(e),u=s.f,l=0;a.length>l;)u.call(e,o=a[l++])&&t.push(o);return t}},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){"use strict";var i=n(68),r=n(51),s=n(52),o={};n(25)(o,n(10)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(o,{next:r(1,n)}),s(e,t+" Iterator")}},function(e,t,n){var i=n(9),r=n(144).set,s=i.MutationObserver||i.WebKitMutationObserver,o=i.process,a=i.Promise,u="process"==n(47)(o);e.exports=function(){var e,t,n,l=function(){var i,r;for(u&&(i=o.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(s){throw e?n():t=void 0,s}}t=void 0,i&&i.enter()};if(u)n=function(){o.nextTick(l)};else if(!s||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var c=a.resolve(void 0);n=function(){c.then(l)}}else n=function(){r.call(i,l)};else{var d=!0,f=document.createTextNode("");new s(l).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}},function(e,t,n){"use strict";var i=n(31),r=n(89),s=n(50),o=n(32),a=n(84),u=Object.assign;e.exports=!u||n(24)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=i})?function(e,t){for(var n=o(e),u=arguments.length,l=1,c=r.f,d=s.f;u>l;)for(var f,h=a(arguments[l++]),p=c?i(h).concat(c(h)):i(h),m=p.length,v=0;m>v;)d.call(h,f=p[v++])&&(n[f]=h[f]);return n}:u},function(e,t,n){var i=n(16),r=n(17),s=n(31);e.exports=n(18)?Object.defineProperties:function(e,t){r(e);for(var n,o=s(t),a=o.length,u=0;a>u;)i.f(e,n=o[u++],t[n]);return e}},function(e,t,n){var i=n(26),r=n(135).f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return r(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==s.call(e)?a(e):r(i(e))}},function(e,t,n){"use strict";var i=n(6),r=n(46),s=n(21),o=n(48);e.exports=function(e){i(i.S,e,{from:function(e){var t,n,i,a,u=arguments[1];return r(this),t=void 0!==u,t&&r(u),void 0==e?new this:(n=[],t?(i=0,a=s(u,arguments[2],2),o(e,!1,function(e){n.push(a(e,i++))})):o(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";var i=n(6);e.exports=function(e){i(i.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){var i=n(15),r=n(17),s=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=n(21)(Function.call,n(88).f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,n){return s(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:s}},function(e,t,n){var i=n(94),r=n(67);e.exports=function(e){return function(t,n){var s,o,a=String(r(t)),u=i(n),l=a.length;return u<0||u>=l?e?"":void 0:(s=a.charCodeAt(u),s<55296||s>56319||u+1===l||(o=a.charCodeAt(u+1))<56320||o>57343?e?a.charAt(u):s:e?a.slice(u,u+2):(s-55296<<10)+(o-56320)+65536)}}},function(e,t,n){var i=n(6),r=n(67),s=n(24),o=n(255),a="["+o+"]",u="",l=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),d=function(e,t,n){var r={},a=s(function(){return!!o[e]()||u[e]()!=u}),l=r[e]=a?t(f):o[e];n&&(r[n]=l),i(i.P+i.F*a,"String",r)},f=d.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};e.exports=d},function(e,t){e.exports="\t\n\x0B\f\r \u2028\u2029\ufeff"},function(e,t,n){var i=n(94),r=Math.max,s=Math.min;e.exports=function(e,t){return e=i(e),e<0?r(e+t,0):s(e,t)}},function(e,t,n){var i=n(9),r=i.navigator;e.exports=r&&r.userAgent||""},function(e,t,n){var i=n(17),r=n(98);e.exports=n(3).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},function(e,t,n){var i=n(66),r=n(10)("iterator"),s=n(30);e.exports=n(3).isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||s.hasOwnProperty(i(t))}},function(e,t,n){"use strict";var i=n(21),r=n(6),s=n(32),o=n(132),a=n(130),u=n(69),l=n(242),c=n(98);r(r.S+r.F*!n(133)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,d,f=s(e),h="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,_=0,g=c(f);if(v&&(m=i(m,p>2?arguments[2]:void 0,2)),void 0==g||h==Array&&a(g))for(t=u(f.length),n=new h(t);t>_;_++)l(n,_,v?m(f[_],_):f[_]);else for(d=g.call(f),n=new h;!(r=d.next()).done;_++)l(n,_,v?o(d,m,[r.value,_],!0):r.value);return n.length=_,n}})},function(e,t,n){"use strict";var i=n(233),r=n(134),s=n(30),o=n(26);e.exports=n(85)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},function(e,t,n){"use strict";var i=n(239),r=n(145),s="Map";e.exports=n(241)(s,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=i.getEntry(r(this,s),e);return t&&t.v},set:function(e,t){return i.def(r(this,s),0===e?0:e,t)}},i,!0)},function(e,t,n){var i=n(6);i(i.S+i.F,"Object",{assign:n(247)})},function(e,t,n){var i=n(6);i(i.S,"Object",{create:n(68)})},function(e,t,n){var i=n(6);i(i.S+i.F*!n(18),"Object",{defineProperty:n(16).f})},function(e,t,n){var i=n(26),r=n(88).f;n(90)("getOwnPropertyDescriptor",function(){return function(e,t){return r(i(e),t)}})},function(e,t,n){var i=n(32),r=n(136);n(90)("getPrototypeOf",function(){return function(e){return r(i(e))}})},function(e,t,n){var i=n(32),r=n(31);n(90)("keys",function(){return function(e){return r(i(e))}})},function(e,t,n){var i=n(6);i(i.S,"Object",{setPrototypeOf:n(252).set})},function(e,t,n){"use strict";var i,r,s,o,a=n(49),u=n(9),l=n(21),c=n(66),d=n(6),f=n(15),h=n(46),p=n(81),m=n(48),v=n(143),_=n(144).set,g=n(246)(),y=n(87),b=n(139),w=n(257),S=n(140),T="Promise",E=u.TypeError,C=u.process,A=C&&C.versions,x=A&&A.v8||"",k=u[T],O="process"==c(C),M=function(){},I=r=y.f,P=!!function(){try{var e=k.resolve(1),t=(e.constructor={})[n(10)("species")]=function(e){e(M,M)};return(O||"function"==typeof PromiseRejectionEvent)&&e.then(M)instanceof t&&0!==x.indexOf("6.6")&&w.indexOf("Chrome/66")===-1}catch(i){}}(),R=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var i=e._v,r=1==e._s,s=0,o=function(t){var n,s,o,a=r?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{a?(r||(2==e._h&&F(e),e._h=1),a===!0?n=i:(c&&c.enter(),n=a(i),c&&(c.exit(),o=!0)),n===t.promise?l(E("Promise-chain cycle")):(s=R(n))?s.call(n,u,l):u(n)):l(i)}catch(d){c&&!o&&c.exit(),l(d)}};n.length>s;)o(n[s++]);e._c=[],e._n=!1,t&&!e._h&&N(e)})}},N=function(e){_.call(u,function(){var t,n,i,r=e._v,s=D(e);if(s&&(t=b(function(){O?C.emit("unhandledRejection",r,e):(n=u.onunhandledrejection)?n({promise:e,reason:r}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=O||D(e)?2:1),e._a=void 0,s&&t.e)throw t.v})},D=function(e){return 1!==e._h&&0===(e._a||e._c).length},F=function(e){_.call(u,function(){var t;O?C.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},q=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw E("Promise can't be resolved itself");(t=R(e))?g(function(){var i={_w:n,_d:!1};try{t.call(e,l(U,i,1),l(q,i,1))}catch(r){q.call(i,r)}}):(n._v=e,n._s=1,L(n,!1))}catch(i){q.call({_w:n,_d:!1},i)}}};P||(k=function(e){p(this,k,T,"_h"),h(e),i.call(this);try{e(l(U,this,1),l(q,this,1))}catch(t){q.call(this,t)}},i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(91)(k.prototype,{then:function(e,t){var n=I(v(this,k));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=O?C.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&L(this,!1),n.promise},"catch":function(e){return this.then(void 0,e)}}),s=function(){var e=new i;this.promise=e,this.resolve=l(U,e,1),this.reject=l(q,e,1)},y.f=I=function(e){return e===k||e===o?new s(e):r(e)}),d(d.G+d.W+d.F*!P,{Promise:k}),n(52)(k,T),n(142)(T),o=n(3)[T],d(d.S+d.F*!P,T,{reject:function(e){var t=I(this),n=t.reject;return n(e),t.promise}}),d(d.S+d.F*(a||!P),T,{resolve:function(e){return S(a&&this===o?k:this,e)}}),d(d.S+d.F*!(P&&n(133)(function(e){k.all(e)["catch"](M)})),T,{all:function(e){var t=this,n=I(t),i=n.resolve,r=n.reject,s=b(function(){var n=[],s=0,o=1;m(e,!1,function(e){var a=s++,u=!1;n.push(void 0),o++,t.resolve(e).then(function(e){u||(u=!0,n[a]=e,--o||i(n))},r)}),--o||i(n)});return s.e&&r(s.v),n.promise},race:function(e){var t=this,n=I(t),i=n.reject,r=b(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(e,t,n){"use strict";n(254)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var i=n(9),r=n(28),s=n(18),o=n(6),a=n(141),u=n(86).KEY,l=n(24),c=n(93),d=n(52),f=n(70),h=n(10),p=n(97),m=n(96),v=n(243),_=n(131),g=n(17),y=n(15),b=n(26),w=n(95),S=n(51),T=n(68),E=n(249),C=n(88),A=n(16),x=n(31),k=C.f,O=A.f,M=E.f,I=i.Symbol,P=i.JSON,R=P&&P.stringify,L="prototype",N=h("_hidden"),D=h("toPrimitive"),F={}.propertyIsEnumerable,q=c("symbol-registry"),U=c("symbols"),H=c("op-symbols"),j=Object[L],z="function"==typeof I,W=i.QObject,$=!W||!W[L]||!W[L].findChild,B=s&&l(function(){return 7!=T(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=k(j,t);i&&delete j[t],O(e,t,n),i&&e!==j&&O(j,t,i)}:O,Q=function(e){var t=U[e]=T(I[L]);return t._k=e,t},X=z&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},G=function(e,t,n){return e===j&&G(H,t,n),g(e),t=w(t,!0),g(n),r(U,t)?(n.enumerable?(r(e,N)&&e[N][t]&&(e[N][t]=!1),n=T(n,{enumerable:S(0,!1)})):(r(e,N)||O(e,N,S(1,{})),e[N][t]=!0),B(e,t,n)):O(e,t,n)},K=function(e,t){g(e);for(var n,i=v(t=b(t)),r=0,s=i.length;s>r;)G(e,n=i[r++],t[n]);return e},V=function(e,t){return void 0===t?T(e):K(T(e),t)},J=function(e){var t=F.call(this,e=w(e,!0));return!(this===j&&r(U,e)&&!r(H,e))&&(!(t||!r(this,e)||!r(U,e)||r(this,N)&&this[N][e])||t)},Y=function(e,t){if(e=b(e),t=w(t,!0),e!==j||!r(U,t)||r(H,t)){var n=k(e,t);return!n||!r(U,t)||r(e,N)&&e[N][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=M(b(e)),i=[],s=0;n.length>s;)r(U,t=n[s++])||t==N||t==u||i.push(t);return i},ee=function(e){for(var t,n=e===j,i=M(n?H:b(e)),s=[],o=0;i.length>o;)!r(U,t=i[o++])||n&&!r(j,t)||s.push(U[t]);return s};z||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===j&&t.call(H,n),r(this,N)&&r(this[N],e)&&(this[N][e]=!1),B(this,e,S(1,n))};return s&&$&&B(j,e,{configurable:!0,set:t}),Q(e)},a(I[L],"toString",function(){return this._k}),C.f=Y,A.f=G,n(135).f=E.f=Z,n(50).f=J,n(89).f=ee,s&&!n(49)&&a(j,"propertyIsEnumerable",J,!0),p.f=function(e){return Q(h(e))}),o(o.G+o.W+o.F*!z,{Symbol:I});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)h(te[ne++]);for(var ie=x(h.store),re=0;ie.length>re;)m(ie[re++]);
o(o.S+o.F*!z,"Symbol",{"for":function(e){return r(q,e+="")?q[e]:q[e]=I(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in q)if(q[t]===e)return t},useSetter:function(){$=!0},useSimple:function(){$=!1}}),o(o.S+o.F*!z,"Object",{create:V,defineProperty:G,defineProperties:K,getOwnPropertyDescriptor:Y,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),P&&o(o.S+o.F*(!z||l(function(){var e=I();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(y(t)||void 0!==e)&&!X(e))return _(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!X(t))return t}),i[1]=t,R.apply(P,i)}}),I[L][D]||n(25)(I[L],D,I[L].valueOf),d(I,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(e,t,n){n(250)("Map")},function(e,t,n){n(251)("Map")},function(e,t,n){var i=n(6);i(i.P+i.R,"Map",{toJSON:n(240)("Map")})},function(e,t,n){var i=n(6),r=n(138)(!0);i(i.S,"Object",{entries:function(e){return r(e)}})},function(e,t,n){var i=n(6),r=n(138)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},function(e,t,n){"use strict";var i=n(6),r=n(3),s=n(9),o=n(143),a=n(140);i(i.P+i.R,"Promise",{"finally":function(e){var t=o(this,r.Promise||s.Promise),n="function"==typeof e;return this.then(n?function(n){return a(t,e()).then(function(){return n})}:e,n?function(n){return a(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var i=n(6),r=n(87),s=n(139);i(i.S,"Promise",{"try":function(e){var t=r.f(this),n=s(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){n(96)("asyncIterator")},function(e,t,n){n(96)("observable")},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,a,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],o(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(s(n))for(a=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,u=0;u<r;u++)l[u].apply(this,a);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(r=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(a=o;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){(function(n){var i,r,s;!function(n,o){r=[],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(this,function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function i(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){a(i.response,t,n)},i.onerror=function(){console.error("could not download file")},i.send()}function r(e){var t=new XMLHttpRequest;return t.open("HEAD",e,!1),t.send(),200<=t.status&&299>=t.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,n){var a=o.URL||o.webkitURL,u=document.createElement("a");t=t||e.name||"download",u.download=t,u.rel="noopener","string"==typeof e?(u.href=e,u.origin===location.origin?s(u):r(u.href)?i(e,t,n):s(u,u.target="_blank")):(u.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(u.href)},4e4),setTimeout(function(){s(u)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,o){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,o),n);else if(r(e))i(e,n,o);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){s(a)})}}:function(e,t,n,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return i(e,t,n);var s="application/octet-stream"===e.type,a=/constructor/i.test(o.HTMLElement)||o.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&a)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},l.readAsDataURL(e)}else{var c=o.URL||o.webkitURL,d=c.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});o.saveAs=a.saveAs=a,"undefined"!=typeof e&&(e.exports=a)})}).call(t,n(78))},function(e,t,n){var i;(function(){!function(r,s){return i=function(){return s()}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}(this,function(){var e,t,n,i,r,s,o,a,u,l,c,d,f,h;return u={},n=document,c=!1,d="active",o=6e4,s=!1,t=function(){var e,t,n,i,r,s,o;return e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},r=function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},s={},n="__ceGUID",t=function(e,t,i){return e[n]=void 0,e[n]||(e[n]="ifvisible.object.event.identifier"),s[e[n]]||(s[e[n]]={}),s[e[n]][t]||(s[e[n]][t]=[]),s[e[n]][t].push(i)},i=function(e,t,i){var r,o,a,u,l;if(e[n]&&s[e[n]]&&s[e[n]][t]){for(u=s[e[n]][t],l=[],o=0,a=u.length;o<a;o++)r=u[o],l.push(r(i||{}));return l}},o=function(e,t,i){var r,o,a,u,l;if(i){if(e[n]&&s[e[n]]&&s[e[n]][t])for(l=s[e[n]][t],o=a=0,u=l.length;a<u;o=++a)if(r=l[o],r===i)return s[e[n]][t].splice(o,1),r}else if(e[n]&&s[e[n]]&&s[e[n]][t])return delete s[e[n]][t]},{add:t,remove:o,fire:i}}(),e=function(){var e;return e=!1,function(t,n,i){return e||(e=t.addEventListener?function(e,t,n){return e.addEventListener(t,n,!1)}:t.attachEvent?function(e,t,n){return e.attachEvent("on"+t,n,!1)}:function(e,t,n){return e["on"+t]=n}),e(t,n,i)}}(),i=function(e,t){var i;return n.createEventObject?e.fireEvent("on"+t,i):(i=n.createEvent("HTMLEvents"),i.initEvent(t,!0,!0),!e.dispatchEvent(i))},a=function(){var e,t,i,r,s;for(r=void 0,s=3,i=n.createElement("div"),e=i.getElementsByTagName("i"),t=function(){return i.innerHTML="<!--[if gt IE "+ ++s+"]><i></i><![endif]-->",e[0]};t(););return s>4?s:r}(),r=!1,h=void 0,"undefined"!=typeof n.hidden?(r="hidden",h="visibilitychange"):"undefined"!=typeof n.mozHidden?(r="mozHidden",h="mozvisibilitychange"):"undefined"!=typeof n.msHidden?(r="msHidden",h="msvisibilitychange"):"undefined"!=typeof n.webkitHidden&&(r="webkitHidden",h="webkitvisibilitychange"),f=function(){var t,i;return t=!1,i=function(){return clearTimeout(t),"active"!==d&&u.wakeup(),s=+new Date,t=setTimeout(function(){if("active"===d)return u.idle()},o)},i(),e(n,"mousemove",i),e(n,"keyup",i),e(n,"touchstart",i),e(window,"scroll",i),u.focus(i),u.wakeup(i)},l=function(){var t;return!!c||(r===!1?(t="blur",a<9&&(t="focusout"),e(window,t,function(){return u.blur()}),e(window,"focus",function(){return u.focus()})):e(n,h,function(){return n[r]?u.blur():u.focus()},!1),c=!0,f())},u={setIdleDuration:function(e){return o=1e3*e},getIdleDuration:function(){return o},getIdleInfo:function(){var e,t;return e=+new Date,t={},"idle"===d?(t.isIdle=!0,t.idleFor=e-s,t.timeLeft=0,t.timeLeftPer=100):(t.isIdle=!1,t.idleFor=e-s,t.timeLeft=s+o-e,t.timeLeftPer=(100-100*t.timeLeft/o).toFixed(2)),t},focus:function(e){return"function"==typeof e?this.on("focus",e):(d="active",t.fire(this,"focus"),t.fire(this,"wakeup"),t.fire(this,"statusChanged",{status:d})),this},blur:function(e){return"function"==typeof e?this.on("blur",e):(d="hidden",t.fire(this,"blur"),t.fire(this,"idle"),t.fire(this,"statusChanged",{status:d})),this},idle:function(e){return"function"==typeof e?this.on("idle",e):(d="idle",t.fire(this,"idle"),t.fire(this,"statusChanged",{status:d})),this},wakeup:function(e){return"function"==typeof e?this.on("wakeup",e):(d="active",t.fire(this,"wakeup"),t.fire(this,"statusChanged",{status:d})),this},on:function(e,n){return l(),t.add(this,e,n),this},off:function(e,n){return l(),t.remove(this,e,n),this},onEvery:function(e,t){var n,i;return l(),n=!1,t&&(i=setInterval(function(){if("active"===d&&n===!1)return t()},1e3*e)),{stop:function(){return clearInterval(i)},pause:function(){return n=!0},resume:function(){return n=!1},code:i,callback:t}},now:function(e){return l(),d===(e||"active")}}})}).call(this)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;/*!
  * Reqwest! A general purpose XHR connection manager
  * license MIT (c) Dustin Diaz 2015
  * https://github.com/ded/reqwest
  */
!function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():(__WEBPACK_AMD_DEFINE_FACTORY__=n,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}("reqwest",this,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){return e._aborted?n(e.request):e._timedOut?n(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request)))}}function setHeaders(e,t){var n,i=t.headers||{};i.Accept=i.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var r="undefined"!=typeof FormData&&t.data instanceof FormData;t.crossOrigin||i[requestedWith]||(i[requestedWith]=defaultHeaders.requestedWith),i[contentType]||r||(i[contentType]=t.contentType||defaultHeaders.contentType);for(n in i)i.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,i[n])}function setCredentials(e,t){"undefined"!=typeof t.withCredentials&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,i){var r=uniqid++,s=e.jsonpCallback||"callback",o=e.jsonpCallbackName||reqwest.getcallbackPrefix(r),a=new RegExp("((^|\\?|&)"+s+")=([^&]+)"),u=i.match(a),l=doc.createElement("script"),c=0,d=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return u?"?"===u[3]?i=i.replace(a,"$1="+o):o=u[3]:i=urlappend(i,s+"="+o),context[o]=generalCallback,l.type="text/javascript",l.src=i,l.async=!0,"undefined"==typeof l.onreadystatechange||d||(l.htmlFor=l.id="_reqwest_"+r),l.onload=l.onreadystatechange=function(){return!(l[readyState]&&"complete"!==l[readyState]&&"loaded"!==l[readyState]||c)&&(l.onload=l.onreadystatechange=null,l.onclick&&l.onclick(),t(lastValue),lastValue=void 0,head.removeChild(l),void(c=1))},head.appendChild(l),{abort:function(){l.onload=l.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(l),c=1}}}function getRequest(e,t){var n,i=this.o,r=(i.method||"GET").toUpperCase(),s="string"==typeof i?i:i.url,o=i.processData!==!1&&i.data&&"string"!=typeof i.data?reqwest.toQueryString(i.data):i.data||null,a=!1;return"jsonp"!=i.type&&"GET"!=r||!o||(s=urlappend(s,o),o=null),"jsonp"==i.type?handleJsonp(i,e,t,s):(n=i.xhr&&i.xhr(i)||xhr(i),n.open(r,s,i.async!==!1),setHeaders(n,i),setCredentials(n,i),context[xDomainRequest]&&n instanceof context[xDomainRequest]?(n.onload=e,n.onerror=t,n.onprogress=function(){},a=!0):n.onreadystatechange=handleReadyState(this,e,t),i.before&&i.before(n),a?setTimeout(function(){n.send(o)},200):n.send(o),n)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){if(null!==e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n,i,r,s,o=e.name,a=e.tagName.toLowerCase(),u=function(e){e&&!e.disabled&&t(o,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&o)switch(a){case"input":/reset|button|image|file/i.test(e.type)||(n=/checkbox/i.test(e.type),i=/radio/i.test(e.type),r=e.value,(!(n||i)||e.checked)&&t(o,normalize(n&&""===r?"on":r)));break;case"textarea":t(o,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())u(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(s=0;e.length&&s<e.length;s++)e.options[s].selected&&u(e.options[s])}}function eachFormElement(){var e,t,n=this,i=function(e,t){var i,r,s;for(i=0;i<t.length;i++)for(s=e[byTag](t[i]),r=0;r<s.length;r++)serial(s[r],n)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,n),i(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}function buildParams(e,t,n,i){var r,s,o,a=/\[\]$/;if(isArray(t))for(s=0;t&&s<t.length;s++)o=t[s],n||a.test(e)?i(e,o):buildParams(e+"["+("object"==typeof o?s:"")+"]",o,n,i);else if(t&&"[object Object]"===t.toString())for(r in t)buildParams(e+"["+r+"]",t[r],n,i);else i(e,t)}var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=__webpack_require__(329)}catch(ex){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},"catch":function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,i,r=t||!1,s=[],o=encodeURIComponent,a=function(e,t){t="function"==typeof t?t():null==t?"":t,s[s.length]=o(e)+"="+o(t)};if(isArray(e))for(i=0;e&&i<e.length;i++)a(e[i].name,e[i].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],r,a);return s.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})},function(e,t,n){var i,r;!function(s,o){i=[n(59)],r=function(e){return o(e.Strophe,e.$build)}.apply(t,i),!(void 0!==r&&(e.exports=r))}(this,function(e,t){return e.Request=function(t,n,i,r){this.id=++e._requestId,this.xmlData=t,this.data=e.serialize(t),this.origFunc=n,this.func=n,this.rid=i,this.date=NaN,this.sends=r||0,this.abort=!1,this.dead=null,this.age=function(){if(!this.date)return 0;var e=new Date;return(e-this.date)/1e3},this.timeDead=function(){if(!this.dead)return 0;var e=new Date;return(e-this.dead)/1e3},this.xhr=this._newXHR()},e.Request.prototype={getResponse:function(){var t=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(t=this.xhr.responseXML.documentElement,"parsererror"===t.tagName)throw e.error("invalid response received"),e.error("responseText: "+this.xhr.responseText),e.error("responseXML: "+e.serialize(this.xhr.responseXML)),"parsererror"}else if(this.xhr.responseText){if(e.debug("Got responseText but no responseXML; attempting to parse it with DOMParser..."),t=(new DOMParser).parseFromString(this.xhr.responseText,"application/xml").documentElement,!t)throw new Error("Parsing produced null node");if(t.querySelector("parsererror"))throw e.error("invalid response received: "+t.querySelector("parsererror").textContent),e.error("responseText: "+this.xhr.responseText),"badformat"}return t},_newXHR:function(){var e=null;return window.XMLHttpRequest?(e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml; charset=utf-8")):window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e.onreadystatechange=this.func.bind(null,this),e}},e.Bosh=function(e){this._conn=e,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this.inactivity=null,this.lastResponseHeaders=null,this._requests=[]},e.Bosh.prototype={strip:null,_buildBody:function(){var n=t("body",{rid:this.rid++,xmlns:e.NS.HTTPBIND});return null!==this.sid&&n.attrs({sid:this.sid}),this._conn.options.keepalive&&this._conn._sessionCachingSupported()&&this._cacheSession(),n},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_connect:function(t,n,i){this.wait=t||this.wait,this.hold=n||this.hold,this.errors=0;var r=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":e.NS.BOSH});i&&r.attrs({route:i});var s=this._conn._connect_cb;this._requests.push(new e.Request(r.tree(),this._onRequestStateChange.bind(this,s.bind(this._conn)),r.tree().getAttribute("rid"))),this._throttledRequestHandler()},_attach:function(t,n,i,r,s,o,a){this._conn.jid=t,this.sid=n,this.rid=i,this._conn.connect_callback=r,this._conn.domain=e.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=s||this.wait,this.hold=o||this.hold,this.window=a||this.window,this._conn._changeConnectStatus(e.Status.ATTACHED,null)},_restore:function(t,n,i,r,s){var o=JSON.parse(window.sessionStorage.getItem("strophe-bosh-session"));if(!("undefined"!=typeof o&&null!==o&&o.rid&&o.sid&&o.jid&&("undefined"==typeof t||null===t||e.getBareJidFromJid(o.jid)===e.getBareJidFromJid(t)||null===e.getNodeFromJid(t)&&e.getDomainFromJid(o.jid)===t)))throw{name:"StropheSessionError",message:"_restore: no restoreable session."};this._conn.restored=!0,this._attach(o.jid,o.sid,o.rid,n,i,r,s)},_cacheSession:function(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&window.sessionStorage.setItem("strophe-bosh-session",JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):window.sessionStorage.removeItem("strophe-bosh-session")},_connect_cb:function(t){var n,i,r=t.getAttribute("type");if(null!==r&&"terminate"===r)return n=t.getAttribute("condition"),e.error("BOSH-Connection failed: "+n),i=t.getElementsByTagName("conflict"),null!==n?("remote-stream-error"===n&&i.length>0&&(n="conflict"),this._conn._changeConnectStatus(e.Status.CONNFAIL,n)):this._conn._changeConnectStatus(e.Status.CONNFAIL,"unknown"),this._conn._doDisconnect(n),e.Status.CONNFAIL;this.sid||(this.sid=t.getAttribute("sid"));var s=t.getAttribute("requests");s&&(this.window=parseInt(s,10));var o=t.getAttribute("hold");o&&(this.hold=parseInt(o,10));var a=t.getAttribute("wait");a&&(this.wait=parseInt(a,10));var u=t.getAttribute("inactivity");u&&(this.inactivity=parseInt(u,10))},_disconnect:function(e){this._sendTerminate(e)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_emptyQueue:function(){return 0===this._requests.length},_callProtocolErrorHandlers:function(e){var t,n=this._getRequestStatus(e);t=this._conn.protocolErrorHandlers.HTTP[n],t&&t.call(this,n)},_hitError:function(t){this.errors++,e.warn("request errored, status: "+t+", number of errors: "+this.errors),this.errors>4&&this._conn._onDisconnectTimeout()},_no_auth_received:function(t){e.warn("Server did not yet offer a supported authentication mechanism. Sending a blank poll request."),t=t?t.bind(this._conn):this._conn._connect_cb.bind(this._conn);var n=this._buildBody();this._requests.push(new e.Request(n.tree(),this._onRequestStateChange.bind(this,t),n.tree().getAttribute("rid"))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){this._abortAllRequests()},_abortAllRequests:function(){for(var e;this._requests.length>0;)e=this._requests.pop(),e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){}},_onIdle:function(){var t=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===t.length&&!this._conn.disconnecting&&(e.info("no requests during idle cycle, sending blank request"),t.push(null)),!this._conn.paused){if(this._requests.length<2&&t.length>0){for(var n=this._buildBody(),i=0;i<t.length;i++)null!==t[i]&&("restart"===t[i]?n.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":e.NS.BOSH}):n.cnode(t[i]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new e.Request(n.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),n.tree().getAttribute("rid"))),this._throttledRequestHandler()}if(this._requests.length>0){var r=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(e.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),r>Math.floor(e.TIMEOUT*this.wait)&&(e.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(e.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}}},_getRequestStatus:function(t,n){var i;if(4===t.xhr.readyState)try{i=t.xhr.status}catch(r){e.error("Caught an error while retrieving a request's status, reqStatus: "+i)}return"undefined"==typeof i&&(i="number"==typeof n?n:0),i},_onRequestStateChange:function(t,n){if(e.debug("request id "+n.id+"."+n.sends+" state changed to "+n.xhr.readyState),n.abort)return void(n.abort=!1);if(4===n.xhr.readyState){var i=this._getRequestStatus(n);if(this.lastResponseHeaders=n.xhr.getAllResponseHeaders(),this.disconnecting&&i>=400)return this._hitError(i),void this._callProtocolErrorHandlers(n);var r=i>0&&i<500,s=n.sends>this._conn.maxRetries;if((r||s)&&(this._removeRequest(n),e.debug("request id "+n.id+" should now be removed")),200===i){var o=this._requests[0]===n,a=this._requests[1]===n;(a||o&&this._requests.length>0&&this._requests[0].age()>Math.floor(e.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),this._conn.nextValidRid(Number(n.rid)+1),e.debug("request id "+n.id+"."+n.sends+" got 200"),t(n),this.errors=0}else 0===i||i>=400&&i<600||i>=12e3?(e.error("request id "+n.id+"."+n.sends+" error "+i+" happened"),this._hitError(i),this._callProtocolErrorHandlers(n),i>=400&&i<500&&(this._conn._changeConnectStatus(e.Status.DISCONNECTING,null),this._conn._doDisconnect())):e.error("request id "+n.id+"."+n.sends+" error "+i+" happened");r||s?s&&!this._conn.connected&&this._conn._changeConnectStatus(e.Status.CONNFAIL,"giving-up"):this._throttledRequestHandler()}},_processRequest:function(t){var n=this,i=this._requests[t],r=this._getRequestStatus(i,-1);if(i.sends>this._conn.maxRetries)return void this._conn._onDisconnectTimeout();var s=i.age(),o=!isNaN(s)&&s>Math.floor(e.TIMEOUT*this.wait),a=null!==i.dead&&i.timeDead()>Math.floor(e.SECONDARY_TIMEOUT*this.wait),u=4===i.xhr.readyState&&(r<1||r>=500);if((o||a||u)&&(a&&e.error("Request "+this._requests[t].id+" timed out (secondary), restarting"),i.abort=!0,i.xhr.abort(),i.xhr.onreadystatechange=function(){},this._requests[t]=new e.Request(i.xmlData,i.origFunc,i.rid,i.sends),i=this._requests[t]),0===i.xhr.readyState){e.debug("request id "+i.id+"."+i.sends+" posting");try{var l=this._conn.options.contentType||"text/xml; charset=utf-8";i.xhr.open("POST",this._conn.service,!this._conn.options.sync),"undefined"!=typeof i.xhr.setRequestHeader&&i.xhr.setRequestHeader("Content-Type",l),this._conn.options.withCredentials&&(i.xhr.withCredentials=!0)}catch(c){return e.error("XHR open failed: "+c.toString()),this._conn.connected||this._conn._changeConnectStatus(e.Status.CONNFAIL,"bad-service"),void this._conn.disconnect()}var d=function(){if(i.date=new Date,n._conn.options.customHeaders){var e=n._conn.options.customHeaders;for(var t in e)e.hasOwnProperty(t)&&i.xhr.setRequestHeader(t,e[t])}i.xhr.send(i.data)};if(i.sends>1){var f=1e3*Math.min(Math.floor(e.TIMEOUT*this.wait),Math.pow(i.sends,3));setTimeout(function(){d()},f)}else d();i.sends++,this._conn.xmlOutput!==e.Connection.prototype.xmlOutput&&(i.xmlData.nodeName===this.strip&&i.xmlData.childNodes.length?this._conn.xmlOutput(i.xmlData.childNodes[0]):this._conn.xmlOutput(i.xmlData)),this._conn.rawOutput!==e.Connection.prototype.rawOutput&&this._conn.rawOutput(i.data)}else e.debug("_processRequest: "+(0===t?"first":"second")+" request has readyState of "+i.xhr.readyState)},_removeRequest:function(t){e.debug("removing request");var n;for(n=this._requests.length-1;n>=0;n--)t===this._requests[n]&&this._requests.splice(n,1);t.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(e){var t=this._requests[e];null===t.dead&&(t.dead=new Date),this._processRequest(e)},_reqToData:function(e){try{return e.getResponse()}catch(t){if("parsererror"!==t)throw t;this._conn.disconnect("strophe-parsererror")}},_sendTerminate:function(t){e.info("_sendTerminate was called");var n=this._buildBody().attrs({type:"terminate"});t&&n.cnode(t.tree());var i=new e.Request(n.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),n.tree().getAttribute("rid"));this._requests.push(i),this._throttledRequestHandler()},_send:function(){clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this._conn),100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){this._requests?e.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):e.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}},e})},function(e,t,n){var i,r;!function(n,s){i=[],r=function(){return s()}.apply(t,i),!(void 0!==r&&(e.exports=r))}(this,function(){var e=function(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n},t=function(e,t){return e<<t|e>>>32-t},n=function(e){for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t},i=function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t},r=function(e){for(var t="0123456789abcdef",n="",i=0;i<4*e.length;i++)n+=t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15);return n},s=function(n,i,r,s,o,a){return e(t(e(e(i,n),e(s,a)),o),r)},o=function(e,t,n,i,r,o,a){return s(t&n|~t&i,e,t,r,o,a)},a=function(e,t,n,i,r,o,a){return s(t&i|n&~i,e,t,r,o,a)},u=function(e,t,n,i,r,o,a){return s(t^n^i,e,t,r,o,a)},l=function(e,t,n,i,r,o,a){return s(n^(t|~i),e,t,r,o,a)},c=function(t,n){t[n>>5]|=128<<n%32,t[(n+64>>>9<<4)+14]=n;for(var i,r,s,c,d=1732584193,f=-271733879,h=-1732584194,p=271733878,m=0;m<t.length;m+=16)i=d,r=f,s=h,c=p,d=o(d,f,h,p,t[m+0],7,-680876936),p=o(p,d,f,h,t[m+1],12,-389564586),h=o(h,p,d,f,t[m+2],17,606105819),f=o(f,h,p,d,t[m+3],22,-1044525330),d=o(d,f,h,p,t[m+4],7,-176418897),p=o(p,d,f,h,t[m+5],12,1200080426),h=o(h,p,d,f,t[m+6],17,-1473231341),f=o(f,h,p,d,t[m+7],22,-45705983),d=o(d,f,h,p,t[m+8],7,1770035416),p=o(p,d,f,h,t[m+9],12,-1958414417),h=o(h,p,d,f,t[m+10],17,-42063),f=o(f,h,p,d,t[m+11],22,-1990404162),d=o(d,f,h,p,t[m+12],7,1804603682),p=o(p,d,f,h,t[m+13],12,-40341101),h=o(h,p,d,f,t[m+14],17,-1502002290),f=o(f,h,p,d,t[m+15],22,1236535329),d=a(d,f,h,p,t[m+1],5,-165796510),p=a(p,d,f,h,t[m+6],9,-1069501632),h=a(h,p,d,f,t[m+11],14,643717713),f=a(f,h,p,d,t[m+0],20,-373897302),d=a(d,f,h,p,t[m+5],5,-701558691),p=a(p,d,f,h,t[m+10],9,38016083),h=a(h,p,d,f,t[m+15],14,-660478335),f=a(f,h,p,d,t[m+4],20,-405537848),d=a(d,f,h,p,t[m+9],5,568446438),p=a(p,d,f,h,t[m+14],9,-1019803690),h=a(h,p,d,f,t[m+3],14,-187363961),f=a(f,h,p,d,t[m+8],20,1163531501),d=a(d,f,h,p,t[m+13],5,-1444681467),p=a(p,d,f,h,t[m+2],9,-51403784),h=a(h,p,d,f,t[m+7],14,1735328473),f=a(f,h,p,d,t[m+12],20,-1926607734),d=u(d,f,h,p,t[m+5],4,-378558),p=u(p,d,f,h,t[m+8],11,-2022574463),h=u(h,p,d,f,t[m+11],16,1839030562),f=u(f,h,p,d,t[m+14],23,-35309556),d=u(d,f,h,p,t[m+1],4,-1530992060),p=u(p,d,f,h,t[m+4],11,1272893353),h=u(h,p,d,f,t[m+7],16,-155497632),f=u(f,h,p,d,t[m+10],23,-1094730640),d=u(d,f,h,p,t[m+13],4,681279174),p=u(p,d,f,h,t[m+0],11,-358537222),h=u(h,p,d,f,t[m+3],16,-722521979),f=u(f,h,p,d,t[m+6],23,76029189),d=u(d,f,h,p,t[m+9],4,-640364487),p=u(p,d,f,h,t[m+12],11,-421815835),h=u(h,p,d,f,t[m+15],16,530742520),f=u(f,h,p,d,t[m+2],23,-995338651),d=l(d,f,h,p,t[m+0],6,-198630844),p=l(p,d,f,h,t[m+7],10,1126891415),h=l(h,p,d,f,t[m+14],15,-1416354905),f=l(f,h,p,d,t[m+5],21,-57434055),d=l(d,f,h,p,t[m+12],6,1700485571),p=l(p,d,f,h,t[m+3],10,-1894986606),h=l(h,p,d,f,t[m+10],15,-1051523),f=l(f,h,p,d,t[m+1],21,-2054922799),d=l(d,f,h,p,t[m+8],6,1873313359),p=l(p,d,f,h,t[m+15],10,-30611744),h=l(h,p,d,f,t[m+6],15,-1560198380),f=l(f,h,p,d,t[m+13],21,1309151649),d=l(d,f,h,p,t[m+4],6,-145523070),p=l(p,d,f,h,t[m+11],10,-1120210379),h=l(h,p,d,f,t[m+2],15,718787259),f=l(f,h,p,d,t[m+9],21,-343485551),d=e(d,i),f=e(f,r),h=e(h,s),p=e(p,c);return[d,f,h,p]},d={hexdigest:function(e){return r(c(n(e),8*e.length))},hash:function(e){return i(c(n(e),8*e.length))}};return d})},function(e,t,n){var i;!function(r,s){i=function(){return s()}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}(this,function(){function e(e,i){e[i>>5]|=128<<24-i%32,e[(i+64>>9<<4)+15]=i;var o,a,u,l,c,d,f,h,p=new Array(80),m=1732584193,v=-271733879,_=-1732584194,g=271733878,y=-1009589776;for(o=0;o<e.length;o+=16){for(l=m,c=v,d=_,f=g,h=y,a=0;a<80;a++)a<16?p[a]=e[o+a]:p[a]=s(p[a-3]^p[a-8]^p[a-14]^p[a-16],1),u=r(r(s(m,5),t(a,v,_,g)),r(r(y,p[a]),n(a))),y=g,g=_,_=s(v,30),v=m,m=u;m=r(m,l),v=r(v,c),_=r(_,d),g=r(g,f),y=r(y,h)}return[m,v,_,g,y]}function t(e,t,n,i){return e<20?t&n|~t&i:e<40?t^n^i:e<60?t&n|t&i|n&i:t^n^i}function n(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function i(t,n){var i=o(t);i.length>16&&(i=e(i,8*t.length));for(var r=new Array(16),s=new Array(16),a=0;a<16;a++)r[a]=909522486^i[a],s[a]=1549556828^i[a];var u=e(r.concat(o(n)),512+8*n.length);return e(s.concat(u),672)}function r(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function s(e,t){return e<<t|e>>>32-t}function o(e){for(var t=[],n=255,i=0;i<8*e.length;i+=8)t[i>>5]|=(e.charCodeAt(i/8)&n)<<24-i%32;return t}function a(e){for(var t="",n=255,i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>24-i%32&n);return t}function u(e){for(var t,n,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",s=0;s<4*e.length;s+=3)for(t=(e[s>>2]>>8*(3-s%4)&255)<<16|(e[s+1>>2]>>8*(3-(s+1)%4)&255)<<8|e[s+2>>2]>>8*(3-(s+2)%4)&255,n=0;n<4;n++)r+=8*s+6*n>32*e.length?"=":i.charAt(t>>6*(3-n)&63);return r}return{b64_hmac_sha1:function(e,t){return u(i(e,t))},b64_sha1:function(t){return u(e(o(t),8*t.length))},binb2str:a,core_hmac_sha1:i,str_hmac_sha1:function(e,t){return a(i(e,t))},str_sha1:function(t){return a(e(o(t),8*t.length))}}})},function(e,t,n){var i,r;!function(n,s){i=[],r=function(){return s()}.apply(t,i),!(void 0!==r&&(e.exports=r))}(this,function(){var e={utf16to8:function(e){var t,n,i="",r=e.length;for(t=0;t<r;t++)n=e.charCodeAt(t),n>=0&&n<=127?i+=e.charAt(t):n>2047?(i+=String.fromCharCode(224|n>>12&15),i+=String.fromCharCode(128|n>>6&63),i+=String.fromCharCode(128|n>>0&63)):(i+=String.fromCharCode(192|n>>6&31),i+=String.fromCharCode(128|n>>0&63));return i},addCookies:function(e){var t,n,i,r,s,o,a;for(t in e||{})s="",o="",a="",n=e[t],i="object"==typeof n,r=escape(unescape(i?n.value:n)),i&&(s=n.expires?";expires="+n.expires:"",o=n.domain?";domain="+n.domain:"",a=n.path?";path="+n.path:""),document.cookie=t+"="+r+s+o+a}};return e})},function(e,t,n){var i=n(60)(n(199),n(322),null,null);e.exports=i.exports},function(e,t,n){var i=n(60)(n(200),n(325),null,null);e.exports=i.exports},function(e,t,n){var i=n(60)(n(201),n(326),null,null);e.exports=i.exports},function(e,t,n){var i=n(60)(n(202),n(323),null,null);e.exports=i.exports},function(e,t,n){var i=n(60)(n(203),n(324),null,null);e.exports=i.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.hide?e._e():n("section",{"class":e.displayClass,attrs:{id:"nespresso-livechat"}},[n("header",{staticClass:"nlc-header",on:{click:function(t){e.changeDisplayCollapse()}}},[n("transition",{attrs:{name:"slide"}},[n("div",{staticClass:"nlc-wrapper"},[n("div",{staticClass:"nlc-icon"},[n("transition",{attrs:{name:"bounce"}},[e.messagesUnread?n("div",{staticClass:"nlc-unread","class":{"nlc-unread-profile":e.vueProfile},on:{click:function(t){t.stopPropagation(),e.changeDisplay(!0)}}},[e._v(e._s(e.messagesUnread))]):e._e()]),e._v(" "),n("img",{attrs:{src:e.currentIcon,alt:"Icon",width:"24px",height:"24px"}})],1),e._v(" "),n("div",{staticClass:"nlc-title"},[n("h6",{domProps:{innerHTML:e._s(e.currentTitle)}})]),e._v(" "),n("div",{staticClass:"nlc-action"},[e.canUpdateProfile?n("a",{staticClass:"nlc-action-account",attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),e.switchVue(e.vueProfile?null:"profile")}}},[n("img",{attrs:{src:e.vueProfile?e.switchIcon:e.getImagePath("icon-user-small.svg"),alt:"Icon",width:"20px",height:"25px"}})]):e._e(),e._v(" "),n("a",{staticClass:"nlc-action-collapse",attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),e.changeDisplay()}}},[n("img",{attrs:{src:e.getImagePath("icon-collapse.svg"),alt:"Icon",width:"24px",height:"24px"}})]),e._v(" "),e.showCloseBt()?n("a",{staticClass:"nlc-action-close",attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),e.closeChat()}}},[n("img",{attrs:{src:e.getImagePath("icon-close.svg"),title:e._(e.getCloseBtTitle()),alt:"Icon",width:"24px",height:"24px"}})]):e._e()])])])],1),e._v(" "),n("div",{staticClass:"nlc-wrapper"},[e.displayMain()?n("div",{staticClass:"nlc-main"},[n("transition",{attrs:{name:"slide"}},[e.vueWait?n("div",{attrs:{id:"wait","aria-live":"assertive"}},[n("div",{staticClass:"nlc-wait-info"},[n("div",{staticClass:"nlc-wait-loader"},[n("ul",{staticClass:"nlc-typing"},[n("li"),e._v(" "),n("li"),e._v(" "),n("li")])]),e._v(" "),n("p",{staticClass:"nlc-wait-message",attrs:{"aria-live":"polite"},domProps:{innerHTML:e._s(e.getWaitingMessage())}})])]):e._e()]),e._v(" "),e.disconnected&&(e.vueMessage||e.vueUpload)?n("div",{staticClass:"nlc-livechat-disconnected"},[n("div",{staticClass:"nlc-wait-info",attrs:{"aria-live":"polite"}},[n("p",{staticClass:"nlc-wait-message",domProps:{innerHTML:e._s(e._("livechat.disconnected_try_in_progress"))}})])]):e._e(),e._v(" "),e.apiError?n("div",{staticClass:"nlc-livechat-error",attrs:{"aria-live":"polite"}},[n("p",{domProps:{innerHTML:e._s(e._("livechat.error_api"))}})]):e._e(),e._v(" "),e.vueMessage||e.vueSendTranscript||e.vueUpload||e.vueRegister||e.vueRating||e.vueProfile?n("div",{ref:"mainScrollable",staticClass:"nlc-main-scrollable","class":{"nlc-main-scrollable-attachment":!(e.apiError||e.disconnected)&&e.vueUpload},attrs:{id:"nlc-main-scrollable"}},[n("transition",{attrs:{name:"slide"}},[e.vueMessage||e.vueSendTranscript||e.vueRegister||e.vueUpload?n("Messages",{on:{newMessage:function(t){e.messageScroll()}}}):e._e()],1),e._v(" "),n("transition",{attrs:{name:"slide"}},[e.vueProfile||e.vueRegister?n("FormProfile",{attrs:{config:e.config,list:e.list}}):e._e()],1),e._v(" "),n("transition",{attrs:{name:"slide"}},[e.vueRating?n("FormRating",{attrs:{config:e.config,list:e.list}}):e._e()],1)],1):e._e()],1):n("div",{staticClass:"nlc-main",attrs:{"aria-live":"polite"}},[n("div",{staticClass:"nlc-wait-info"},[n("p",{staticClass:"nlc-wait-message",domProps:{innerHTML:e._s(e._("livechat.not_open"))}})])])]),e._v(" "),e.displayMain()?n("footer",{staticClass:"nlc-footer","class":{"nlc-can-upload":e.canUploadFiles}},[n("transition",{attrs:{name:"slide"}},[e.vueWait?n("div",{staticClass:"nlc-action"},[n("button",{staticClass:"nlc-bt nlc-bt-main",on:{click:function(t){t.preventDefault(),e.cancelRequest(t)}}},[n("span",[e._v(e._s(e._("livechat.stop_request")))])])]):e._e()]),e._v(" "),n("transition",{attrs:{name:"slide"}},[e.vueMessage||e.vueUpload?n("div",[n("transition",{attrs:{name:"slide"}},[e.apiError||e.disconnected||!e.vueUpload?e._e():n("div",{staticClass:"nlc-action nlc-action-attachment"},[n("Dropzone",{ref:"dropzone",attrs:{id:"dropzone",options:e.dropzoneOptions},on:{"vdropzone-mounted":e.dropzoneMounted,
"vdropzone-max-files-exceeded":e.dropzoneMaxFilesExceeded,"vdropzone-sending":e.dropzoneSending,"vdropzone-success":e.dropzoneSuccess,"vdropzone-complete":e.dropzoneComplete}})],1)]),e._v(" "),n("div",{staticClass:"nlc-message"},[n("textarea",{directives:[{name:"autosize",rawName:"v-autosize"}],ref:"textArea",staticClass:"nlc-input","class":{"is-disabled":e.disconnected||e.apiError},staticStyle:{"min-height":"2em"},attrs:{placeholder:e._("livechat.message_indice")},domProps:{value:e.message},on:{"autosize:resized":e.onResizeTextArea,input:e.updateMessageDelay,focus:e.focus,blur:e.clientStopTyping,keydown:function(t){e._k(t.keyCode,"enter",13)||(t.stopPropagation(),t.preventDefault(),e.sendMessage(t))}}}),e._v(" "),n("button",{staticClass:"nlc-bt nlc-bt-main nlc-bt-send","class":{"is-disabled":e.disconnected||e.apiError},on:{click:function(t){t.preventDefault(),e.sendMessage(t)}}},[n("span",[e._v(e._s(e._("livechat.send")))])]),e._v(" "),e.canUploadFiles?n("button",{staticClass:"nlc-bt nlc-bt-attachment","class":{"is-disabled":e.disconnected||e.apiError||e.processingUploadFiles},on:{click:function(t){t.preventDefault(),e.switchVue(e.vueUpload?"message":"upload")}}}):e._e()])],1):e._e()]),e._v(" "),n("transition",{attrs:{name:"slide"}},[e.vueSendTranscript?n("div",{staticClass:"nlc-actions",attrs:{"aria-live":"polite"}},[e.transcriptSent||e.profile.email?e._e():n("button",{staticClass:"nlc-bt nlc-bt-main",attrs:{id:"submit_button"},on:{click:function(t){e.switchVue("profile")}}},[n("span",{staticClass:"nlc-multi-line"},[e._v(e._s(e._("livechat.complete_profile")))])]),e._v(" "),!e.transcriptSent&&e.profile.email?n("span",[e._v(e._s(e._("livechat.send_transcript_to"))+":")]):e._e(),e._v(" "),!e.transcriptSent&&e.profile.email?n("button",{staticClass:"nlc-bt nlc-bt-main",attrs:{id:"submit_button"},on:{click:e.sendTranscript}},[n("span",{staticClass:"nlc-small sessioncamhidetext"},[e._v(e._s(e.profile.email))])]):e._e(),e._v(" "),e.transcriptSent?n("div",{staticClass:"nlc-transcript nlc-msg-success",attrs:{id:"transcript_sent"}},[n("div",{staticClass:"nlc-wrapper"},[n("div",{staticClass:"nlc-icon"},[n("span",[n("img",{attrs:{src:e.getImagePath("icon-success.svg"),alt:"Icon"}})])]),e._v(" "),n("div",{staticClass:"nlc-msg"},[n("span",[e._v(e._s(e._("livechat.transcript_sent_to").trim())+": ")]),n("span",{staticClass:"sessioncamhidetext"},[e._v(e._s(e.profile.email))])])])]):e._e()]):e._e()]),e._v(" "),n("transition",{attrs:{name:"slide"}},[e.vueRating?n("div",{staticClass:"nlc-action"},[n("button",{staticClass:"nlc-bt nlc-bt-main","class":{"is-disabled":!e.isFeedbackValid()},on:{click:function(t){t.preventDefault(),e.sendFeedback()}}},[n("span",[e._v(e._s(e._("livechat.send_feedback")))])])]):e._e()]),e._v(" "),n("transition",{attrs:{name:"slide"}},[e.vueProfile&&!e.isInSendTranscript()?n("div",{staticClass:"nlc-actions"},[n("button",{staticClass:"nlc-bt nlc-bt-cancel","class":e.getEditProfileResetClass(),attrs:{title:e._("livechat.reset")},on:{click:e.revertProfileTmp}},[n("span",[e._v(e._s(e._("livechat.reset")))])]),e._v(" "),n("button",{staticClass:"nlc-bt nlc-bt-main","class":e.getEditProfileSaveClass(),attrs:{title:e._("livechat.save")},on:{click:e.updateProfile}},[n("span",[e._v(e._s(e._("livechat.save")))])])]):e._e()]),e._v(" "),n("transition",{attrs:{name:"slide"}},[e.vueProfile&&e.isInSendTranscript()?n("div",{staticClass:"nlc-action"},[n("button",{staticClass:"nlc-bt nlc-bt-main","class":e.getEditProfileSaveClass(),attrs:{title:e._("livechat.request_chat")},on:{click:e.updateProfile}},[n("span",[e._v(e._s(e._("livechat.send_transcript")))])])]):e._e()]),e._v(" "),n("transition",{attrs:{name:"slide"}},[e.vueRegister?n("div",{staticClass:"nlc-action"},[n("button",{staticClass:"nlc-bt nlc-bt-main","class":e.getEditProfileSaveClass(),attrs:{title:e._("livechat.request_chat")},on:{click:e.updateProfile}},[n("span",[e._v(e._s(e._("livechat.request_chat")))])])]):e._e()])],1):e._e()])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",{staticClass:"nlc-livechat"},[e._l(e.messages,function(t){return n("li",{"class":{"new":!t.read},attrs:{rel:t.rel}},[t.operator?n("div",{staticClass:"nlc-author"},[n("figure",[n("img",{attrs:{src:e.getAvatar(t.operator),alt:t.operator.name}})]),e._v(" "),n("span",{staticClass:"nlc-author-name"},[e._v(e._s(t.operator.name))])]):e._e(),e._v(" "),n("div",{staticClass:"nlc-message","class":{attachment:!!t.attachment},attrs:{"aria-role":"log","aria-live":"assertive","aria-atomic":"false","aria-relevant":"additions"},on:{click:function(n){t.attachment?e.downloadAttachment(t.attachment):null}}},[n("span",{staticClass:"sessioncamhidetext",domProps:{innerHTML:e._s(e.formatMessage(t.message))}})]),e._v(" "),n("div",{staticStyle:{"text-align":"right"}},[n("time",{attrs:{datetime:""}},[e._v(e._s(e.formatTime(t.time)))]),e._v(" "),e.isReceiptEnable()&&t.receipt?n("img",{attrs:{src:e.getImagePath("icon-checkmark-grey.svg"),alt:"Icon",width:"15px",height:"15px"}}):e.isReceiptEnable()&&"undefined"!=typeof t.receipt&&null!=t.receipt?n("img",{attrs:{src:e.getImagePath("stop-watch.svg"),alt:"Icon",width:"15px",height:"15px"}}):e._e()])])}),e._v(" "),e.isTyping?n("li",{staticClass:"nlc-is-typing",attrs:{rel:"nespresso"}},[n("div",{staticClass:"nlc-message",attrs:{"aria-role":"log","aria-live":"assertive","aria-atomic":"false","aria-relevant":"additions"}},[n("div",{staticClass:"nlc-author"},[n("figure",[n("img",{attrs:{src:e.getAvatar(e.isTyping),alt:e.isTyping.name}})]),e._v(" "),n("span",{staticClass:"nlc-author-name"},[e._v(e._s(e.isTyping.name))])]),e._v(" "),n("ul",{staticClass:"nlc-typing",attrs:{title:e._("livechat.is_typing")}},[n("li"),e._v(" "),n("li"),e._v(" "),n("li")])])]):e._e()],2),e._v(" "),n("div",{staticClass:"nlc-spacer-on-scroll-zone",attrs:{id:"nlc-spacer-on-scroll-zone"}})])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nlc-rating"},[e._l(e.list,function(t,i){return n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"nlc-rating-star","class":e.classRating(t.key),attrs:{type:"radio",name:e.name,title:t.value,required:""},domProps:{value:t.key,checked:e._q(e.value,t.key)},on:{click:function(n){e.value=t.key}}})}),e._v(" "),e._l(e.list,function(t,i){return n("label",{staticClass:"nlc-rating-label","class":e.classRating(t.key,!0),attrs:{"for":"nlc-"+t.key}},[e._v(e._s(t.value))])}),e._v(" "),e._m(0)],2)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"nlc-rating-bar"},[n("span",{staticClass:"nlc-rating-bar-highlight"})])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{clear:"both"}}),e._v(" "),n("div",{staticClass:"nlc-form-subscribe row",attrs:{id:"nlc-form-subscribe",role:"form"}},[e.profileError?n("ul",{staticClass:"nlc-error-list"},e._l(e.profileError,function(t){return n("li",{domProps:{innerHTML:e._s(e.formatErrorMessage(t))},on:{click:function(n){e.focus(t.field)}}})})):e._e(),e._v(" "),e.config.marketHasTitle?n("div",{staticClass:"nlc-field"},[n("label",{staticClass:"nlc-label",attrs:{"for":"title"}},[e._v(e._s(e._("livechat.title"))+""),n("span",{staticClass:"mandatory"},[e._v("*")])]),e._v(" "),n("div",{staticClass:"nlc-input"},[n("span",{staticClass:"custom-dropdown custom-dropdown--white"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],staticClass:"nlc-input",attrs:{id:"title",placeholder:e._("livechat.title"),"aria-required":"true",required:""},on:{change:function(t){e.title=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t})[0]}}},e._l(e.list.titles,function(t,i){return n("option",{domProps:{value:i}},[e._v(e._s(t))])}))])])]):e._e(),e._v(" "),n("div",{staticClass:"nlc-field"},[n("label",{staticClass:"nlc-label",attrs:{"for":"first_name"}},[e._v(e._s(e._("livechat.fname"))+""),n("span",{staticClass:"mandatory"},[e._v("*")])]),e._v(" "),n("div",{staticClass:"nlc-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.firstName,expression:"firstName"}],attrs:{type:"text",id:"first_name",name:"first_name",title:e._("livechat.fname"),placeholder:e._("livechat.fname"),"aria-required":"true",required:""},domProps:{value:e._s(e.firstName)},on:{input:function(t){t.target.composing||(e.firstName=t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"nlc-field"},[n("label",{staticClass:"nlc-label",attrs:{"for":"last_name"}},[e._v(e._s(e._("livechat.lname"))+""),n("span",{staticClass:"mandatory"},[e._v("*")])]),e._v(" "),n("div",{staticClass:"nlc-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.lastName,expression:"lastName"}],attrs:{type:"text",id:"last_name",name:"last_name",title:e._("livechat.lname"),placeholder:e._("livechat.lname"),"aria-required":"true",required:""},domProps:{value:e._s(e.lastName)},on:{input:function(t){t.target.composing||(e.lastName=t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"nlc-field"},[n("label",{staticClass:"nlc-label",attrs:{"for":"email"}},[e._v(e._s(e._("livechat.email"))+""),n("span",{staticClass:"mandatory"},[e._v("*")])]),e._v(" "),n("div",{staticClass:"nlc-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",id:"email",name:"email",title:e._("livechat.email"),placeholder:e._("livechat.email"),"aria-required":"true",required:""},domProps:{value:e._s(e.email)},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})])]),e._v(" "),e.config.enableLegalTerms?n("div",{staticClass:"nlc-privacy-force"},[n("div",{staticClass:"textarea"},[n("label",{staticClass:"nlc-label head-terms nlc-bottom-spacer",attrs:{"for":"legal_terms_content"}},[e._v("\n                    "+e._s(e._("contactus.legal_terms.label"))+"\n                ")]),e._v(" "),n("div",{staticClass:"nlc-input nlc-bottom-spacer"},[n("textarea",{staticClass:"legal-terms-content",attrs:{rows:"6",readonly:"",id:"legal_terms_content"}},[e._v(e._s(e._("contactus.legal_terms.content")))])])]),e._v(" "),n("div",{staticClass:"accept-legal-terms-input nlc-bottom-spacer"},[n("label",{staticClass:"nlc-label",attrs:{id:"policy","for":"accept_legal_terms"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.legalTerms,expression:"legalTerms"}],attrs:{type:"checkbox",id:"accept_legal_terms","aria-required":"true",required:""},domProps:{checked:Array.isArray(e.legalTerms)?e._i(e.legalTerms,null)>-1:e.legalTerms},on:{click:function(t){var n=e.legalTerms,i=t.target,r=!!i.checked;if(Array.isArray(n)){var s=null,o=e._i(n,s);r?o<0&&(e.legalTerms=n.concat(s)):o>-1&&(e.legalTerms=n.slice(0,o).concat(n.slice(o+1)))}else e.legalTerms=r}}}),e._v("\n                    "+e._s(e._("contactus.legal_terms.agree.label"))+""),n("span",{staticClass:"mandatory"},[e._v("*")])])])]):n("div",[n("div",{staticClass:"nlc-field"},[n("div",{staticClass:"accept-legal-terms-input"},[n("label",{staticClass:"nlc-label",attrs:{id:"policy","for":"accept_legal_terms"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.legalTerms,expression:"legalTerms"}],attrs:{type:"checkbox",id:"accept_legal_terms","aria-required":"true",required:""},domProps:{checked:Array.isArray(e.legalTerms)?e._i(e.legalTerms,null)>-1:e.legalTerms},on:{click:function(t){var n=e.legalTerms,i=t.target,r=!!i.checked;if(Array.isArray(n)){var s=null,o=e._i(n,s);r?o<0&&(e.legalTerms=n.concat(s)):o>-1&&(e.legalTerms=n.slice(0,o).concat(n.slice(o+1)))}else e.legalTerms=r}}}),e._v(" "),n("span",{domProps:{innerHTML:e._s(e._rmP(e._i("contactus.privacy_text")))}}),e._v(""),n("span",{staticClass:"mandatory"},[e._v("*")])])])])])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nlc-form-feedback",attrs:{role:"form"}},[n("fieldset",[n("legend",{domProps:{innerHTML:e._s(e._("livechat.rating.delay.title"))}}),e._v(" "),n("p",{domProps:{innerHTML:e._s(e._i("livechat.rating_question_rate_speed"))}}),e._v(" "),n("StarRating",{attrs:{name:"delay",list:e.list.ratings,defval:this.delay},on:{update:e.updateDelay}})],1),e._v(" "),n("fieldset",[n("legend",{domProps:{innerHTML:e._s(e._("livechat.rating.quality.title"))}}),e._v(" "),n("p",{domProps:{innerHTML:e._s(e._i("livechat.rating_question_rate_quality"))}}),e._v(" "),n("StarRating",{attrs:{name:"quality",list:e.list.ratings,defval:this.quality},on:{update:e.updateQuality}})],1),e._v(" "),n("fieldset",[n("legend",{domProps:{innerHTML:e._s(e._("livechat.rating.satisfaction.title"))}}),e._v(" "),n("p",{domProps:{innerHTML:e._s(e._i("livechat.rating_question_satisfied"))}}),e._v(" "),n("div",[n("div",{staticClass:"nlc-field nlc-radio nlc-inline"},[n("div",{staticClass:"nlc-input"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.satisfaction,expression:"satisfaction"}],attrs:{type:"radio",name:"satisfaction",value:"1",required:""},domProps:{checked:e._q(e.satisfaction,"1")},on:{click:function(t){e.satisfaction="1"}}}),e._v(" "),n("span",[e._v(e._s(e.list.yesNo[1]))])]),e._v(" "),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.satisfaction,expression:"satisfaction"}],attrs:{type:"radio",name:"satisfaction",value:"0",required:""},domProps:{checked:e._q(e.satisfaction,"0")},on:{click:function(t){e.satisfaction="0"}}}),e._v(" "),n("span",[e._v(e._s(e.list.yesNo[0]))])])])]),e._v(" "),n("div",{staticClass:"nlc-field nlc-inline"},[n("label",{staticClass:"nlc-label"},[e._v(e._s(e._("livechat.rating_additional_remarks")))]),e._v(" "),n("div",{staticClass:"nlc-input"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],attrs:{name:"comment",id:"comment",placeholder:e._("livechat.rating.comment.placeholder"),"data-escapelabel":"",rows:"24",cols:"80"},domProps:{value:e._s(e.comment)},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}})])])])])])},staticRenderFns:[]}},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){"use strict";var e,t={getSignedURL:function(e,t){var n={filePath:e.name,contentType:e.type};return new Promise(function(i,r){var s=new FormData,o=new XMLHttpRequest,a="function"==typeof t.signingURL?t.signingURL(e):t.signingURL;o.open("POST",a),o.onload=function(){200==o.status?i(JSON.parse(o.response)):r(o.statusText)},o.onerror=function(e){console.error("Network Error : Could not send request to AWS (Maybe CORS errors)"),r(e)},!0===t.withCredentials&&(o.withCredentials=!0),Object.entries(t.headers||{}).forEach(function(e){var t=e[0],n=e[1];o.setRequestHeader(t,n)}),n=Object.assign(n,t.params||{}),Object.entries(n).forEach(function(e){var t=e[0],n=e[1];s.append(t,n)}),o.send(s)})},sendFile:function(e,t,n){var i=n?this.setResponseHandler:this.sendS3Handler;return this.getSignedURL(e,t).then(function(t){return i(t,e)})["catch"](function(e){return e})},setResponseHandler:function(e,t){t.s3Signature=e.signature,t.s3Url=e.postEndpoint},sendS3Handler:function(e,t){var n=new FormData,i=e.signature;return Object.keys(i).forEach(function(e){n.append(e,i[e])}),n.append("file",t),new Promise(function(t,i){var r=new XMLHttpRequest;r.open("POST",e.postEndpoint),r.onload=function(){if(201==r.status){var e=(new window.DOMParser).parseFromString(r.response,"text/xml").firstChild.children[0].innerHTML;t({success:!0,message:e})}else{var n=(new window.DOMParser).parseFromString(r.response,"text/xml").firstChild.children[0].innerHTML;i({success:!1,message:n+". Request is marked as resolved when returns as status 201"})}},r.onerror=function(e){var t=(new window.DOMParser).parseFromString(r.response,"text/xml").firstChild.children[1].innerHTML;i({success:!1,message:t})},r.send(n)})}},n=(function(e){function t(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e)}return i(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"emit",value:function(e){this._callbacks=this._callbacks||{};var t=this._callbacks[e];if(t){for(var n=arguments.length,i=Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var s=0,o=o=t;!(s>=o.length);)o[s++].apply(this,i)}return this}},{key:"off",value:function(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1);break}return this}}]),e}(),s=function(e){function s(e,i){n(this,s);var r,o=t(this,(s.__proto__||Object.getPrototypeOf(s)).call(this)),a=void 0;if(o.element=e,o.version=s.version,o.defaultOptions.previewTemplate=o.defaultOptions.previewTemplate.replace(/\n*/g,""),o.clickableElements=[],o.listeners=[],o.files=[],"string"==typeof o.element&&(o.element=document.querySelector(o.element)),!o.element||null==o.element.nodeType)throw new Error("Invalid dropzone element.");if(o.element.dropzone)throw new Error("Dropzone already attached.");s.instances.push(o),o.element.dropzone=o;var u,l=null!=(r=s.optionsForElement(o.element))?r:{};if(o.options=s.extend({},o.defaultOptions,l,null!=i?i:{}),o.options.forceFallback||!s.isBrowserSupported())return u=o.options.fallback.call(o),t(o,u);if(null==o.options.url&&(o.options.url=o.element.getAttribute("action")),!o.options.url)throw new Error("No URL provided.");if(o.options.acceptedFiles&&o.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(o.options.uploadMultiple&&o.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return o.options.acceptedMimeTypes&&(o.options.acceptedFiles=o.options.acceptedMimeTypes,delete o.options.acceptedMimeTypes),null!=o.options.renameFilename&&(o.options.renameFile=function(e){return o.options.renameFilename.call(o,e.name,e)}),o.options.method=o.options.method.toUpperCase(),(a=o.getExistingFallback())&&a.parentNode&&a.parentNode.removeChild(a),!1!==o.options.previewsContainer&&(o.options.previewsContainer?o.previewsContainer=s.getElement(o.options.previewsContainer,"previewsContainer"):o.previewsContainer=o.element),o.options.clickable&&(!0===o.options.clickable?o.clickableElements=[o.element]:o.clickableElements=s.getElements(o.options.clickable,"clickable")),o.init(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,r),i(s,null,[{key:"initClass",value:function(){this.prototype.Emitter=r,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(e,t,n){if(n)return{dzuuid:n.file.upload.uuid,dzchunkindex:n.index,dztotalfilesize:n.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:n.file.upload.totalChunkCount,dzchunkbyteoffset:n.index*this.options.chunkSize}},accept:function(e,t){return t()},chunksUploaded:function(e,t){t()},fallback:function(){var e=void 0;this.element.className=this.element.className+" dz-browser-not-supported";for(var t=0,n=n=this.element.getElementsByTagName("div");!(t>=n.length);){var i=n[t++];if(/(^| )dz-message($| )/.test(i.className)){(e=i).className="dz-message";break}}e||(e=s.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));var r=e.getElementsByTagName("span")[0];return r&&(null!=r.textContent?r.textContent=this.options.dictFallbackMessage:null!=r.innerText&&(r.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e,t,n,i){var r={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},s=e.width/e.height;null==t&&null==n?(t=r.srcWidth,n=r.srcHeight):null==t?t=n*s:null==n&&(n=t/s);var o=(t=Math.min(t,r.srcWidth))/(n=Math.min(n,r.srcHeight));if(r.srcWidth>t||r.srcHeight>n)if("crop"===i)o<s?(r.srcHeight=e.height,r.srcWidth=r.srcHeight*o):(r.srcWidth=e.width,r.srcHeight=r.srcWidth/o);else{if("contain"!==i)throw new Error("Unknown resizeMethod '"+i+"'");o<s?n=t/s:t=n*s}return r.srcX=(e.width-r.srcWidth)/2,r.srcY=(e.height-r.srcHeight)/2,r.trgWidth=t,r.trgHeight=n,r},transformFile:function(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){e.previewElement=s.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);for(var n=0,i=i=e.previewElement.querySelectorAll("[data-dz-name]");!(n>=i.length);){var r=i[n++];r.textContent=e.name}for(var o=0,a=a=e.previewElement.querySelectorAll("[data-dz-size]");!(o>=a.length);)(r=a[o++]).innerHTML=this.filesize(e.size);this.options.addRemoveLinks&&(e._removeLink=s.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink));for(var u=function(n){return n.preventDefault(),n.stopPropagation(),e.status===s.UPLOADING?s.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?s.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)},l=0,c=c=e.previewElement.querySelectorAll("[data-dz-remove]");!(l>=c.length);)c[l++].addEventListener("click",u)}},removedfile:function(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");for(var n=0,i=i=e.previewElement.querySelectorAll("[data-dz-thumbnail]");!(n>=i.length);){var r=i[n++];r.alt=e.name,r.src=t}return setTimeout(function(){return e.previewElement.classList.add("dz-image-preview")},1)}},error:function(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error);for(var n=0,i=i=e.previewElement.querySelectorAll("[data-dz-errormessage]");!(n>=i.length);)i[n++].textContent=t}},errormultiple:function(){},processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(e,t,n){if(e.previewElement)for(var i=0,r=r=e.previewElement.querySelectorAll("[data-dz-uploadprogress]");!(i>=r.length);){var s=r[i++];"PROGRESS"===s.nodeName?s.value=t:s.style.width=t+"%"}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(e){if(e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,s=s=n;!(r>=s.length);){var o=s[r++];for(var a in o){var u=o[a];e[a]=u}}return e}}]),i(s,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(e){return e.accepted}).map(function(e){return e})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(e){return!e.accepted}).map(function(e){return e})}},{key:"getFilesWithStatus",value:function(e){return this.files.filter(function(t){return t.status===e}).map(function(e){return e})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(s.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(s.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(s.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(e){return e.status===s.UPLOADING||e.status===s.QUEUED}).map(function(e){return e})}},{key:"init",value:function(){var e=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(s.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&!function o(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null===e.options.maxFiles||1<e.options.maxFiles)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!==e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!==e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",
e.hiddenFileInput.style.width="0",document.querySelector(e.options.hiddenInputContainer).appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t=e.hiddenFileInput.files;if(t.length)for(var n=0,i=i=t;!(n>=i.length);){var r=i[n++];e.addFile(r)}return e.emit("addedfiles",t),o()})}(),this.URL=null!==window.URL?window.URL:window.webkitURL;for(var t=0,n=n=this.events;!(t>=n.length);){var i=n[t++];this.on(i,this.options[i])}this.on("uploadprogress",function(){return e.updateTotalUploadProgress()}),this.on("removedfile",function(){return e.updateTotalUploadProgress()}),this.on("canceled",function(t){return e.emit("complete",t)}),this.on("complete",function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout(function(){return e.emit("queuecomplete")},0)});var r=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(t){return e.emit("dragstart",t)},dragenter:function(t){return r(t),e.emit("dragenter",t)},dragover:function(t){var n=void 0;try{n=t.dataTransfer.effectAllowed}catch(t){}return t.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",r(t),e.emit("dragover",t)},dragleave:function(t){return e.emit("dragleave",t)},drop:function(t){return r(t),e.drop(t)},dragend:function(t){return e.emit("dragend",t)}}}],this.clickableElements.forEach(function(t){return e.listeners.push({element:t,events:{click:function(n){return(t!==e.element||n.target===e.element||s.elementInside(n.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,s.instances.splice(s.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var e=void 0,t=0,n=0;if(this.getActiveFiles().length){for(var i=0,r=r=this.getActiveFiles();!(i>=r.length);){var s=r[i++];t+=s.upload.bytesSent,n+=s.upload.total}e=100*t/n}else e=100;return this.emit("totaluploadprogress",e,n,t)}},{key:"_getParamName",value:function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")}},{key:"_renameFile",value:function(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)}},{key:"getFallbackForm",value:function(){var e,t=void 0;if(e=this.getExistingFallback())return e;var n='<div class="dz-fallback">';this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"</p>"),n+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';var i=s.createElement(n);return"FORM"!==this.element.tagName?(t=s.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(i):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:i}},{key:"getExistingFallback",value:function(){for(var e=function(e){for(var t=0,n=n=e;!(t>=n.length);){var i=n[t++];if(/(^| )fallback($| )/.test(i.className))return i}},t=["div","form"],n=0;n<t.length;n++){var i,r=t[n];if(i=e(this.element.getElementsByTagName(r)))return i}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(e){return function(){var t=[];for(var n in e.events){var i=e.events[n];t.push(e.element.addEventListener(n,i,!1))}return t}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(e){return function(){var t=[];for(var n in e.events){var i=e.events[n];t.push(e.element.removeEventListener(n,i,!1))}return t}()})}},{key:"disable",value:function(){var e=this;return this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(t){return e.cancelUpload(t)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(e){var t=0,n="b";if(0<e){for(var i=["tb","gb","mb","kb","b"],r=0;r<i.length;r++){var s=i[r];if(Math.pow(this.options.filesizeBase,4-r)/10<=e){t=e/Math.pow(this.options.filesizeBase,4-r),n=s;break}}t=Math.round(10*t)/10}return"<strong>"+t+"</strong> "+this.options.dictFileSizeUnits[n]}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);for(var t=[],n=0;n<e.dataTransfer.files.length;n++)t[n]=e.dataTransfer.files[n];if(this.emit("addedfiles",t),t.length){var i=e.dataTransfer.items;i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(t)}}}},{key:"paste",value:function(e){if(null!=(t=null!=e?e.clipboardData:void 0,n=function(e){return e.items},null!=t?n(t):void 0)){var t,n;this.emit("paste",e);var i=e.clipboardData.items;return i.length?this._addFilesFromItems(i):void 0}}},{key:"handleFiles",value:function(e){for(var t=0,n=n=e;!(t>=n.length);){var i=n[t++];this.addFile(i)}}},{key:"_addFilesFromItems",value:function(e){var t=this;return function(){for(var n=[],i=0,r=r=e;!(i>=r.length);){var s,o=r[i++];null!=o.webkitGetAsEntry&&(s=o.webkitGetAsEntry())?s.isFile?n.push(t.addFile(o.getAsFile())):s.isDirectory?n.push(t._addFilesFromDirectory(s,s.name)):n.push(void 0):null==o.getAsFile||null!=o.kind&&"file"!==o.kind?n.push(void 0):n.push(t.addFile(o.getAsFile()))}return n}()}},{key:"_addFilesFromDirectory",value:function(e,t){var n=this,i=e.createReader(),r=function(e){return t=console,n="log",i=function(t){return t.log(e)},null!=t&&"function"==typeof t[n]?i(t,n):void 0;var t,n,i};return function s(){return i.readEntries(function(e){if(0<e.length){for(var i=0,r=r=e;!(i>=r.length);){var o=r[i++];o.isFile?o.file(function(e){if(!n.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath=t+"/"+e.name,n.addFile(e)}):o.isDirectory&&n._addFilesFromDirectory(o,t+"/"+o.name)}s()}return null},r)}()}},{key:"accept",value:function(e,t){return e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):s.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)}},{key:"addFile",value:function(e){var t=this;return e.upload={uuid:s.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e),chunked:this.options.chunking&&(this.options.forceChunking||e.size>this.options.chunkSize),totalChunkCount:Math.ceil(e.size/this.options.chunkSize)},this.files.push(e),e.status=s.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(n){return n?(e.accepted=!1,t._errorProcessing([e],n)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(e){for(var t=0,n=n=e;!(t>=n.length);){var i=n[t++];this.enqueueFile(i)}return null}},{key:"enqueueFile",value:function(e){var t=this;if(e.status!==s.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=s.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return t.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(e){var t=this;if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout(function(){return t._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var e=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var t=this._thumbnailQueue.shift();return this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(n){return e.emit("thumbnail",t,n),e._processingThumbnail=!1,e._processThumbnailQueue()})}}},{key:"removeFile",value:function(e){if(e.status===s.UPLOADING&&this.cancelUpload(e),this.files=o(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(e){null==e&&(e=!1);for(var t=0,n=n=this.files.slice();!(t>=n.length);){var i=n[t++];(i.status!==s.UPLOADING||e)&&this.removeFile(i)}return null}},{key:"resizeImage",value:function(e,t,n,i,r){var o=this;return this.createThumbnail(e,t,n,i,!1,function(t,n){if(null==n)return r(e);var i=o.options.resizeMimeType;null==i&&(i=e.type);var a=n.toDataURL(i,o.options.resizeQuality);return"image/jpeg"!==i&&"image/jpg"!==i||(a=l.restore(e.dataURL,a)),r(s.dataURItoBlob(a))})}},{key:"createThumbnail",value:function(e,t,n,i,r,s){var o=this,a=new FileReader;return a.onload=function(){return e.dataURL=a.result,"image/svg+xml"!==e.type?o.createThumbnailFromUrl(e,t,n,i,r,s):void(null!=s&&s(a.result))},a.readAsDataURL(e)}},{key:"createThumbnailFromUrl",value:function(e,t,n,i,r,s,o){var a=this,l=document.createElement("img");return o&&(l.crossOrigin=o),l.onload=function(){var o=function(e){return e(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&r&&(o=function(e){return EXIF.getData(l,function(){return e(EXIF.getTag(this,"Orientation"))})}),o(function(r){e.width=l.width,e.height=l.height;var o=a.options.resize.call(a,e,t,n,i),c=document.createElement("canvas"),d=c.getContext("2d");switch(c.width=o.trgWidth,c.height=o.trgHeight,4<r&&(c.width=o.trgHeight,c.height=o.trgWidth),r){case 2:d.translate(c.width,0),d.scale(-1,1);break;case 3:d.translate(c.width,c.height),d.rotate(Math.PI);break;case 4:d.translate(0,c.height),d.scale(1,-1);break;case 5:d.rotate(.5*Math.PI),d.scale(1,-1);break;case 6:d.rotate(.5*Math.PI),d.translate(0,-c.height);break;case 7:d.rotate(.5*Math.PI),d.translate(c.width,-c.height),d.scale(-1,1);break;case 8:d.rotate(-.5*Math.PI),d.translate(-c.width,0)}u(d,l,null!=o.srcX?o.srcX:0,null!=o.srcY?o.srcY:0,o.srcWidth,o.srcHeight,null!=o.trgX?o.trgX:0,null!=o.trgY?o.trgY:0,o.trgWidth,o.trgHeight);var f=c.toDataURL("image/png");if(null!=s)return s(f,c)})},null!=s&&(l.onerror=s),l.src=e.dataURL}},{key:"processQueue",value:function(){var e=this.options.parallelUploads,t=this.getUploadingFiles().length,n=t;if(!(e<=t)){var i=this.getQueuedFiles();if(0<i.length){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,e-t));for(;n<e;){if(!i.length)return;this.processFile(i.shift()),n++}}}}},{key:"processFile",value:function(e){return this.processFiles([e])}},{key:"processFiles",value:function(e){for(var t=0,n=n=e;!(t>=n.length);){var i=n[t++];i.processing=!0,i.status=s.UPLOADING,this.emit("processing",i)}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}},{key:"_getFilesWithXhr",value:function(e){return this.files.filter(function(t){return t.xhr===e}).map(function(e){return e})}},{key:"cancelUpload",value:function(e){if(e.status===s.UPLOADING){for(var t=this._getFilesWithXhr(e.xhr),n=0,i=i=t;!(n>=i.length);)i[n++].status=s.CANCELED;void 0!==e.xhr&&e.xhr.abort();for(var r=0,o=o=t;!(r>=o.length);){var a=o[r++];this.emit("canceled",a)}this.options.uploadMultiple&&this.emit("canceledmultiple",t)}else e.status!==s.ADDED&&e.status!==s.QUEUED||(e.status=s.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(e){if("function"==typeof e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(this,n)}return e}},{key:"uploadFile",value:function(e){return this.uploadFiles([e])}},{key:"uploadFiles",value:function(e){var t=this;this._transformFiles(e,function(n){if(e[0].upload.chunked){var i=e[0],r=n[0];i.upload.chunks=[];var o=function(){for(var n=0;void 0!==i.upload.chunks[n];)n++;if(!(n>=i.upload.totalChunkCount)){var o=n*t.options.chunkSize,a=Math.min(o+t.options.chunkSize,i.size),u={name:t._getParamName(0),data:r.webkitSlice?r.webkitSlice(o,a):r.slice(o,a),filename:i.upload.filename,chunkIndex:n};i.upload.chunks[n]={file:i,index:n,dataBlock:u,status:s.UPLOADING,progress:0,retries:0},t._uploadData(e,[u])}};if(i.upload.finishedChunkUpload=function(n){var r=!0;n.status=s.SUCCESS,n.dataBlock=null;for(var a=0;a<i.upload.totalChunkCount;a++){if(void 0===i.upload.chunks[a])return o();i.upload.chunks[a].status!==s.SUCCESS&&(r=!1)}r&&t.options.chunksUploaded(i,function(){t._finished(e,"",null)})},t.options.parallelChunkUploads)for(var a=0;a<i.upload.totalChunkCount;a++)o();else o()}else{for(var u=[],l=0;l<e.length;l++)u[l]={name:t._getParamName(l),data:n[l],filename:e[l].upload.filename};t._uploadData(e,u)}})}},{key:"_getChunk",value:function(e,t){for(var n=0;n<e.upload.totalChunkCount;n++)if(void 0!==e.upload.chunks[n]&&e.upload.chunks[n].xhr===t)return e.upload.chunks[n]}},{key:"_uploadData",value:function(e,t){for(var n=this,i=new XMLHttpRequest,r=0,o=o=e;!(r>=o.length);)o[r++].xhr=i;e[0].upload.chunked&&(e[0].upload.chunks[t[0].chunkIndex].xhr=i);var a=this.resolveOption(this.options.method,e),u=this.resolveOption(this.options.url,e);i.open(a,u,!0),i.timeout=this.resolveOption(this.options.timeout,e),i.withCredentials=!!this.options.withCredentials,i.onload=function(t){n._finishedUploading(e,i,t)},i.onerror=function(){n._handleUploadError(e,i)},(null!=i.upload?i.upload:i).onprogress=function(t){return n._updateFilesUploadProgress(e,i,t)};var l={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var c in this.options.headers&&s.extend(l,this.options.headers),l){var d=l[c];d&&i.setRequestHeader(c,d)}var f=new FormData;if(this.options.params){var h=this.options.params;for(var p in"function"==typeof h&&(h=h.call(this,e,i,e[0].upload.chunked?this._getChunk(e[0],i):null)),h){var m=h[p];f.append(p,m)}}for(var v=0,_=_=e;!(v>=_.length);){var g=_[v++];this.emit("sending",g,i,f)}this.options.uploadMultiple&&this.emit("sendingmultiple",e,i,f),this._addFormElementData(f);for(var y=0;y<t.length;y++){var b=t[y];f.append(b.name,b.data,b.filename)}this.submitRequest(i,f,e)}},{key:"_transformFiles",value:function(e,t){for(var n=this,i=[],r=0,s=function(s){n.options.transformFile.call(n,e[s],function(n){i[s]=n,++r===e.length&&t(i)})},o=0;o<e.length;o++)s(o)}},{key:"_addFormElementData",value:function(e){if("FORM"===this.element.tagName)for(var t=0,n=n=this.element.querySelectorAll("input, textarea, select, button");!(t>=n.length);){var i=n[t++],r=i.getAttribute("name"),s=i.getAttribute("type");if(s&&(s=s.toLowerCase()),null!=r)if("SELECT"===i.tagName&&i.hasAttribute("multiple"))for(var o=0,a=a=i.options;!(o>=a.length);){var u=a[o++];u.selected&&e.append(r,u.value)}else(!s||"checkbox"!==s&&"radio"!==s||i.checked)&&e.append(r,i.value)}}},{key:"_updateFilesUploadProgress",value:function(e,t,n){var i=void 0;if(void 0!==n){if(i=100*n.loaded/n.total,e[0].upload.chunked){var r=e[0],s=this._getChunk(r,t);s.progress=i,s.total=n.total,s.bytesSent=n.loaded,r.upload.progress=0,r.upload.total=0;for(var o=r.upload.bytesSent=0;o<r.upload.totalChunkCount;o++)void 0!==r.upload.chunks[o]&&void 0!==r.upload.chunks[o].progress&&(r.upload.progress+=r.upload.chunks[o].progress,r.upload.total+=r.upload.chunks[o].total,r.upload.bytesSent+=r.upload.chunks[o].bytesSent);r.upload.progress=r.upload.progress/r.upload.totalChunkCount}else for(var a=0,u=u=e;!(a>=u.length);){var l=u[a++];l.upload.progress=i,l.upload.total=n.total,l.upload.bytesSent=n.loaded}for(var c=0,d=d=e;!(c>=d.length);){var f=d[c++];this.emit("uploadprogress",f,f.upload.progress,f.upload.bytesSent)}}else{var h=!0;i=100;for(var p=0,m=m=e;!(p>=m.length);){var v=m[p++];100===v.upload.progress&&v.upload.bytesSent===v.upload.total||(h=!1),v.upload.progress=i,v.upload.bytesSent=v.upload.total}if(h)return;for(var _=0,g=g=e;!(_>=g.length);){var y=g[_++];this.emit("uploadprogress",y,i,y.upload.bytesSent)}}}},{key:"_finishedUploading",value:function(e,t,n){var i=void 0;if(e[0].status!==s.CANCELED&&4===t.readyState){if("arraybuffer"!==t.responseType&&"blob"!==t.responseType&&(i=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{i=JSON.parse(i)}catch(e){n=e,i="Invalid JSON response from server."}this._updateFilesUploadProgress(e),200<=t.status&&t.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],t)):this._finished(e,i,n):this._handleUploadError(e,t,i)}}},{key:"_handleUploadError",value:function(e,t,n){if(e[0].status!==s.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var i=this._getChunk(e[0],t);if(i.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[i.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}for(var r=0,o=o=e;!(r>=o.length);)o[r++],this._errorProcessing(e,n||this.options.dictResponseError.replace("{{statusCode}}",t.status),t)}}},{key:"submitRequest",value:function(e,t,n){e.send(t)}},{key:"_finished",value:function(e,t,n){for(var i=0,r=r=e;!(i>=r.length);){var o=r[i++];o.status=s.SUCCESS,this.emit("success",o,t,n),this.emit("complete",o)}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(e,t,n){for(var i=0,r=r=e;!(i>=r.length);){var o=r[i++];o.status=s.ERROR,this.emit("error",o,t,n),this.emit("complete",o)}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}}]),s}();s.initClass(),s.version="5.4.0",s.options={},s.optionsForElement=function(e){return e.getAttribute("id")?s.options[a(e.getAttribute("id"))]:void 0},s.instances=[],s.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},s.autoDiscover=!0,s.discover=function(){var e=void 0;if(document.querySelectorAll)e=document.querySelectorAll(".dropzone");else{e=[];var t=function(t){return function(){for(var n=[],i=0,r=r=t;!(i>=r.length);){var s=r[i++];/(^| )dropzone($| )/.test(s.className)?n.push(e.push(s)):n.push(void 0)}return n}()};t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return function(){for(var t=[],n=0,i=i=e;!(n>=i.length);){var r=i[n++];!1!==s.optionsForElement(r)?t.push(new s(r)):t.push(void 0)}return t}()},s.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],s.isBrowserSupported=function(){var e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(var t=0,n=n=s.blacklistedBrowsers;!(t>=n.length);)n[t++].test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},s.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),s=0,o=t.length,a=0<=o;a?s<=o:o<=s;a?s++:s--)r[s]=t.charCodeAt(s);return new Blob([i],{type:n})};var o=function(e,t){return e.filter(function(e){return e!==t}).map(function(e){return e})},a=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})};s.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},s.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},s.getElement=function(e,t){var n=void 0;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},s.getElements=function(e,t){var n=void 0,i=void 0;if(e instanceof Array){i=[];try{for(var r=0,s=s=e;!(r>=s.length);)n=s[r++],i.push(this.getElement(n,t))}catch(e){i=null}}else if("string"==typeof e){i=[];for(var o=0,a=a=document.querySelectorAll(e);!(o>=a.length);)n=a[o++],i.push(n)}else null!=e.nodeType&&(i=[e]);if(null==i||!i.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return i},s.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},s.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");for(var n=e.type,i=n.replace(/\/.*$/,""),r=0,s=s=t;!(r>=s.length);){var o=s[r++];if("."===(o=o.trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(o.toLowerCase(),e.name.length-o.length))return!0}else if(/\/\*$/.test(o)){if(i===o.replace(/\/.*$/,""))return!0}else if(n===o)return!0}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new s(this,e)})}),null!==e?e.exports=s:window.Dropzone=s,s.ADDED="added",s.QUEUED="queued",s.ACCEPTED=s.QUEUED,s.UPLOADING="uploading",s.PROCESSING=s.UPLOADING,s.CANCELED="canceled",s.ERROR="error",s.SUCCESS="success";var u=function(e,t,n,i,r,s,o,a,u,l){var c=function(e){e.naturalWidth;var t=e.naturalHeight,n=document.createElement("canvas");n.width=1,n.height=t;var i=n.getContext("2d");i.drawImage(e,0,0);for(var r=i.getImageData(1,0,1,t).data,s=0,o=t,a=t;s<a;)0===r[4*(a-1)+3]?o=a:s=a,a=o+s>>1;var u=a/t;return 0===u?1:u}(t);return e.drawImage(t,n,i,r,s,o,a,u,l/c)},l=function(){function e(){n(this,e)}return i(e,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(e){for(var t="",n=void 0,i=void 0,r="",s=void 0,o=void 0,a=void 0,u="",l=0;s=(n=e[l++])>>2,o=(3&n)<<4|(i=e[l++])>>4,a=(15&i)<<2|(r=e[l++])>>6,u=63&r,isNaN(i)?a=u=64:isNaN(r)&&(u=64),t=t+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(u),n=i=r="",s=o=a=u="",l<e.length;);return t}},{key:"restore",value:function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var n=this.decode64(e.replace("data:image/jpeg;base64,","")),i=this.slice2Segments(n),r=this.exifManipulation(t,i);return"data:image/jpeg;base64,"+this.encode64(r)}},{key:"exifManipulation",value:function(e,t){var n=this.getExifArray(t),i=this.insertExif(e,n);return new Uint8Array(i)}},{key:"getExifArray",value:function(e){for(var t=void 0,n=0;n<e.length;){if(255===(t=e[n])[0]&225===t[1])return t;n++}return[]}},{key:"insertExif",value:function(e,t){var n=e.replace("data:image/jpeg;base64,",""),i=this.decode64(n),r=i.indexOf(255,3),s=i.slice(0,r),o=i.slice(r),a=s;return a=(a=a.concat(t)).concat(o)}},{key:"slice2Segments",value:function(e){for(var t=0,n=[];!(255===e[t]&218===e[t+1]);){if(255===e[t]&216===e[t+1])t+=2;else{var i=t+(256*e[t+2]+e[t+3])+2,r=e.slice(t,i);n.push(r),t=i}if(t>e.length)break}return n}},{key:"decode64",value:function(e){var t=void 0,n=void 0,i="",r=void 0,s=void 0,o="",a=0,u=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(a++))<<2|(r=this.KEY_STR.indexOf(e.charAt(a++)))>>4,n=(15&r)<<4|(s=this.KEY_STR.indexOf(e.charAt(a++)))>>2,i=(3&s)<<6|(o=this.KEY_STR.indexOf(e.charAt(a++))),u.push(t),64!==s&&u.push(n),64!==o&&u.push(i),t=n=i="",r=s=o="",a<e.length;);return u}}]),e}();l.initClass(),s._autoDiscoverFunction=function(){if(s.autoDiscover)return s.discover()},function(e,t){var n=!1,i=!0,r=e.document,s=r.documentElement,o=r.addEventListener?"addEventListener":"attachEvent",a=r.addEventListener?"removeEventListener":"detachEvent",u=r.addEventListener?"":"on",l=function c(i){if("readystatechange"!==i.type||"complete"===r.readyState)return("load"===i.type?e:r)[a](u+i.type,c,!1),!n&&(n=!0)?t.call(e,i.type||i):void 0};if("complete"!==r.readyState){if(r.createEventObject&&s.doScroll){try{i=!e.frameElement}catch(i){}i&&function d(){try{s.doScroll("left")}catch(e){return void setTimeout(d,50)}return l("poll")}()}r[o](u+"DOMContentLoaded",l,!1),r[o](u+"readystatechange",l,!1),e[o](u+"load",l,!1)}}(window,s._autoDiscoverFunction)}(e={exports:{}},e.exports),e.exports);return n.autoDiscover=!1,{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"dropzoneElement","class":{"vue-dropzone dropzone":e.includeStyling},attrs:{id:e.id}},[e.useCustomSlot?n("div",{staticClass:"dz-message"},[e._t("default",[e._v("Drop files here to upload")])],2):e._e()])},staticRenderFns:[],props:{id:{type:String,required:!0,"default":"dropzone"},options:{type:Object,required:!0},includeStyling:{type:Boolean,"default":!0,required:!1},awss3:{type:Object,required:!1,"default":null},destroyDropzone:{type:Boolean,"default":!0,required:!1},duplicateCheck:{type:Boolean,"default":!1,required:!1},useCustomSlot:{type:Boolean,"default":!1,required:!1}},data:function(){return{isS3:!1,isS3OverridesServerPropagation:!1,wasQueueAutoProcess:!0}},computed:{dropzoneSettings:function(){var e={thumbnailWidth:200,thumbnailHeight:200};return Object.keys(this.options).forEach(function(t){e[t]=this.options[t]},this),null!==this.awss3&&(e.autoProcessQueue=!1,this.isS3=!0,this.isS3OverridesServerPropagation=!1===this.awss3.sendFileToServer,void 0!==this.options.autoProcessQueue&&(this.wasQueueAutoProcess=this.options.autoProcessQueue),this.isS3OverridesServerPropagation&&(e.url=function(e){return e[0].s3Url})),e}},methods:{manuallyAddFile:function(e,t){if(e.manuallyAdded=!0,this.dropzone.emit("addedfile",e),this.dropzone.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.dropzone.options.maxThumbnailFilesize*1024){t&&this.dropzone.emit("thumbnail",e,t);for(var n=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),i=0;i<n.length;i++)n[i].style.width=this.dropzoneSettings.thumbnailWidth+"px",n[i].style.height=this.dropzoneSettings.thumbnailHeight+"px",n[i].style["object-fit"]="contain"}this.dropzone.emit("complete",e),this.dropzone.options.maxFiles&&this.dropzone.options.maxFiles--,this.dropzone.files.push(e),this.$emit("vdropzone-file-added-manually",e)},setOption:function(e,t){this.dropzone.options[e]=t},removeAllFiles:function(e){this.dropzone.removeAllFiles(e)},processQueue:function(){var e=this,t=this.dropzone;this.isS3&&!this.wasQueueAutoProcess?this.getQueuedFiles().forEach(function(t){e.getSignedAndUploadToS3(t)}):this.dropzone.processQueue(),this.dropzone.on("success",function(){t.options.autoProcessQueue=!0}),this.dropzone.on("queuecomplete",function(){t.options.autoProcessQueue=!1})},init:function(){return this.dropzone.init()},destroy:function(){return this.dropzone.destroy()},updateTotalUploadProgress:function(){return this.dropzone.updateTotalUploadProgress()},getFallbackForm:function(){return this.dropzone.getFallbackForm()},getExistingFallback:function(){return this.dropzone.getExistingFallback()},setupEventListeners:function(){return this.dropzone.setupEventListeners()},removeEventListeners:function(){return this.dropzone.removeEventListeners()},disable:function(){return this.dropzone.disable()},enable:function(){return this.dropzone.enable()},filesize:function(e){return this.dropzone.filesize(e)},accept:function(e,t){return this.dropzone.accept(e,t)},addFile:function(e){return this.dropzone.addFile(e)},removeFile:function(e){this.dropzone.removeFile(e)},getAcceptedFiles:function(){return this.dropzone.getAcceptedFiles()},getRejectedFiles:function(){return this.dropzone.getRejectedFiles()},getFilesWithStatus:function(){return this.dropzone.getFilesWithStatus()},getQueuedFiles:function(){return this.dropzone.getQueuedFiles()},getUploadingFiles:function(){return this.dropzone.getUploadingFiles()},getAddedFiles:function(){return this.dropzone.getAddedFiles()},getActiveFiles:function(){return this.dropzone.getActiveFiles()},getSignedAndUploadToS3:function(e){var n=this,i=t.sendFile(e,this.awss3,this.isS3OverridesServerPropagation);this.isS3OverridesServerPropagation?i.then(function(){setTimeout(function(){return n.dropzone.processFile(e)})}):i.then(function(t){t.success?(e.s3ObjectLocation=t.message,setTimeout(function(){return n.dropzone.processFile(e)}),n.$emit("vdropzone-s3-upload-success",t.message)):void 0!==t.message?n.$emit("vdropzone-s3-upload-error",t.message):n.$emit("vdropzone-s3-upload-error","Network Error : Could not send request to AWS. (Maybe CORS error)")}),i["catch"](function(e){alert(e)})},setAWSSigningURL:function(e){this.isS3&&(this.awss3.signingURL=e)}},mounted:function(){if(!this.$isServer||!this.hasBeenMounted){this.hasBeenMounted=!0,this.dropzone=new n(this.$refs.dropzoneElement,this.dropzoneSettings);var e=this;this.dropzone.on("thumbnail",function(t,n){e.$emit("vdropzone-thumbnail",t,n)}),this.dropzone.on("addedfile",function(t){var n,i;if(e.duplicateCheck&&this.files.length)for(n=0,i=this.files.length;n<i-1;n++)this.files[n].name===t.name&&this.files[n].size===t.size&&this.files[n].lastModifiedDate.toString()===t.lastModifiedDate.toString()&&(this.removeFile(t),e.$emit("vdropzone-duplicate-file",t));e.$emit("vdropzone-file-added",t),e.isS3&&e.wasQueueAutoProcess&&e.getSignedAndUploadToS3(t)}),this.dropzone.on("addedfiles",function(t){e.$emit("vdropzone-files-added",t)}),this.dropzone.on("removedfile",function(t){e.$emit("vdropzone-removed-file",t),t.manuallyAdded&&e.dropzone.options.maxFiles++}),this.dropzone.on("success",function(t,n){if(e.$emit("vdropzone-success",t,n),e.isS3){if(e.isS3OverridesServerPropagation){var i=(new window.DOMParser).parseFromString(n,"text/xml").firstChild.children[0].innerHTML;e.$emit("vdropzone-s3-upload-success",i)}e.wasQueueAutoProcess&&e.setOption("autoProcessQueue",!1)}}),this.dropzone.on("successmultiple",function(t,n){e.$emit("vdropzone-success-multiple",t,n)}),this.dropzone.on("error",function(t,n,i){e.$emit("vdropzone-error",t,n,i),this.isS3&&e.$emit("vdropzone-s3-upload-error")}),this.dropzone.on("errormultiple",function(t,n,i){e.$emit("vdropzone-error-multiple",t,n,i)}),this.dropzone.on("sending",function(t,n,i){if(e.isS3)if(e.isS3OverridesServerPropagation){var r=t.s3Signature;Object.keys(r).forEach(function(e){i.append(e,r[e])})}else i.append("s3ObjectLocation",t.s3ObjectLocation);e.$emit("vdropzone-sending",t,n,i)}),this.dropzone.on("sendingmultiple",function(t,n,i){e.$emit("vdropzone-sending-multiple",t,n,i)}),this.dropzone.on("complete",function(t){e.$emit("vdropzone-complete",t)}),this.dropzone.on("completemultiple",function(t){e.$emit("vdropzone-complete-multiple",t)}),this.dropzone.on("canceled",function(t){e.$emit("vdropzone-canceled",t)}),this.dropzone.on("canceledmultiple",function(t){e.$emit("vdropzone-canceled-multiple",t)}),this.dropzone.on("maxfilesreached",function(t){e.$emit("vdropzone-max-files-reached",t)}),this.dropzone.on("maxfilesexceeded",function(t){
e.$emit("vdropzone-max-files-exceeded",t)}),this.dropzone.on("processing",function(t){e.$emit("vdropzone-processing",t)}),this.dropzone.on("processing",function(t){e.$emit("vdropzone-processing",t)}),this.dropzone.on("processingmultiple",function(t){e.$emit("vdropzone-processing-multiple",t)}),this.dropzone.on("uploadprogress",function(t,n,i){e.$emit("vdropzone-upload-progress",t,n,i)}),this.dropzone.on("totaluploadprogress",function(t,n,i){e.$emit("vdropzone-total-upload-progress",t,n,i)}),this.dropzone.on("reset",function(){e.$emit("vdropzone-reset")}),this.dropzone.on("queuecomplete",function(){e.$emit("vdropzone-queue-complete")}),this.dropzone.on("drop",function(t){e.$emit("vdropzone-drop",t)}),this.dropzone.on("dragstart",function(t){e.$emit("vdropzone-drag-start",t)}),this.dropzone.on("dragend",function(t){e.$emit("vdropzone-drag-end",t)}),this.dropzone.on("dragenter",function(t){e.$emit("vdropzone-drag-enter",t)}),this.dropzone.on("dragover",function(t){e.$emit("vdropzone-drag-over",t)}),this.dropzone.on("dragleave",function(t){e.$emit("vdropzone-drag-leave",t)}),e.$emit("vdropzone-mounted")}},beforeDestroy:function(){this.destroyDropzone&&this.dropzone.destroy()}}})},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t){return e.filter(t)[0]}function t(n,i){if(void 0===i&&(i=[]),null===n||"object"!=typeof n)return n;var r=e(i,function(e){return e.original===n});if(r)return r.copy;var s=Array.isArray(n)?[]:{};return i.push({original:n,copy:s}),Object.keys(n).forEach(function(e){s[e]=t(n[e],i)}),s}function n(e){void 0===e&&(e={});var n=e.collapsed;void 0===n&&(n=!0);var i=e.transformer;void 0===i&&(i=function(e){return e});var s=e.mutationTransformer;return void 0===s&&(s=function(e){return e}),function(e){var o=t(e.state);e.subscribe(function(e,a){if("undefined"!=typeof console){var u=t(a),l=new Date,c=" @ "+r(l.getHours(),2)+":"+r(l.getMinutes(),2)+":"+r(l.getSeconds(),2)+"."+r(l.getMilliseconds(),3),d=s(e),f="mutation "+e.type+c,h=n?console.groupCollapsed:console.group;try{h.call(console,f)}catch(p){console.log(f)}console.log("%c prev state","color: #9E9E9E; font-weight: bold",i(o)),console.log("%c mutation","color: #03A9F4; font-weight: bold",d),console.log("%c next state","color: #4CAF50; font-weight: bold",i(u));try{console.groupEnd()}catch(p){console.log(" log end ")}o=u}})}}function i(e,t){return new Array(t+1).join(e)}function r(e,t){return i("0",t-e.toString().length)+e}return n})},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(151)}]);
//# 